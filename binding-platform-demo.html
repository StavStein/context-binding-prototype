<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Binding Platform · Studio 2</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Syne:wght@400;600;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#f5f5f8; --sur:#ffffff; --sur2:#f0f0f5; --sur3:#e8e8f0;
  --b1:#e0e0ea; --b2:#c8c8d8; --b3:#a8a8c0;
  --acc:#3b82f6; --acc-d:#3b82f612; --acc-b:#3b82f640;
  --grn:#d946a8; --grn-d:#d946a812; --grn-b:#d946a835;
  --red:#ef4444; --yel:#d97706;
  --t1:#1a1a2e; --t2:#4a4a6a; --t3:#8888a8; --t4:#b0b0c8;
  --panel:280px; --left:260px; --top:44px; --top2:36px;
  --shadow:0 1px 3px #00000010;
}
html.dark {
  --bg:#0d0d14; --sur:#13131e; --sur2:#1a1a2e; --sur3:#22223a;
  --b1:#252540; --b2:#36366a; --b3:#4a4a88;
  --acc:#3b82f6; --acc-d:#3b82f615; --acc-b:#3b82f650;
  --grn:#f472b6; --grn-d:#f472b615; --grn-b:#f472b640;
  --red:#ff6b6b; --yel:#ffb347;
  --t1:#e4e4f0; --t2:#9090b8; --t3:#55557a; --t4:#33334a;
  --shadow:0 1px 3px #00000040;
}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--t1);font-family:'DM Sans',sans-serif;font-size:13px;height:100vh;overflow:hidden;display:flex;flex-direction:column}

/* TOPBAR */
.topbar{height:var(--top);background:var(--sur);border-bottom:1px solid var(--b1);display:flex;align-items:center;padding:0 16px;gap:0;flex-shrink:0;z-index:200}
.tb-left{display:flex;align-items:center;gap:4px;height:100%}
.tb-icon{width:30px;height:30px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}
.tb-icon svg{width:18px;height:18px}
.sep{width:1px;height:18px;background:var(--b2);margin:0 10px}
.page-sel-wrap{position:relative}
.page-sel{display:flex;align-items:center;gap:6px;padding:5px 12px;border-radius:6px;cursor:pointer;font-size:12px;color:var(--t1);font-weight:500;transition:.12s;max-width:120px;min-width:0}
.page-sel-name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:block;flex:1;min-width:0}
.page-sel:hover{background:var(--sur2)}
.page-sel-chevron{font-size:8px;color:var(--t3);margin-left:2px;flex-shrink:0}

.pages-panel{display:none;position:absolute;top:calc(100% + 6px);left:0;width:240px;overflow-y:auto;background:var(--sur);border:1px solid var(--b2);border-radius:8px;box-shadow:0 8px 30px #0002;z-index:500;padding:4px 0;font-family:'DM Sans',sans-serif}
.pages-panel.open{display:block}
.pp-item{padding:7px 14px;font-size:12px;color:var(--t2);cursor:pointer;transition:.1s;display:flex;align-items:center;gap:8px}
.pp-item:hover{background:var(--sur2);color:var(--t1)}
.pp-item.active{background:var(--acc-d);color:var(--acc);font-weight:500}
.pp-group{padding:7px 14px 4px;font-size:10px;font-weight:600;color:var(--t3);letter-spacing:.3px;margin-top:4px;border-top:1px solid var(--b1);cursor:default}
.pp-sub{padding:7px 14px 7px 26px;font-size:12px;color:var(--t2);cursor:pointer;transition:.1s;display:flex;align-items:center;gap:8px}
.pp-sub:hover{background:var(--sur2);color:var(--t1)}
.pp-manage{padding:8px 14px;font-size:11px;color:var(--acc);cursor:pointer;text-align:center;border-top:1px solid var(--b1);margin-top:4px}
.pp-manage:hover{background:var(--sur2)}
.tb-tabs{display:flex;align-items:center;gap:2px;height:100%;margin-left:0}
.tb-tab{padding:0 14px;height:100%;display:flex;align-items:center;font-size:12px;color:var(--t3);cursor:pointer;border-bottom:2px solid transparent;transition:.12s;user-select:none}
.tb-tab:hover{color:var(--t2)}
.tb-tab.active{color:var(--t1);border-bottom-color:var(--acc);font-weight:500}

.tb-center{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;height:100%;overflow:hidden;min-width:0}
@media(max-width:900px){.tb-center{display:none}}
.tb-tool{width:26px;height:26px;border-radius:5px;display:flex;align-items:center;justify-content:center;color:var(--t3);cursor:pointer;font-size:13px;transition:.12s}
.tb-tool:hover{background:var(--sur2);color:var(--t1)}
.tb-zoom{font-size:11px;color:var(--t3);font-family:'DM Mono',monospace;padding:2px 6px;border-radius:4px;cursor:pointer}
.tb-zoom:hover{background:var(--sur2);color:var(--t2)}
.tb-url{display:flex;align-items:center;gap:6px;background:var(--sur2);border:1px solid var(--b1);border-radius:12px;padding:3px 10px;font-size:9px;color:var(--t3);font-family:'DM Mono',monospace;max-width:240px;overflow:hidden;white-space:nowrap}
.tb-url-link{color:var(--acc);font-size:9px;cursor:pointer;white-space:nowrap}

.tb-right{display:flex;align-items:center;gap:10px;margin-left:auto;flex-shrink:0}
.btn-ghost{padding:4px 12px;border-radius:6px;border:1px solid var(--b2);background:transparent;color:var(--t2);cursor:pointer;font-size:12px;font-family:'DM Sans',sans-serif;transition:.15s}
.btn-ghost:hover{color:var(--t1);border-color:var(--b3)}
.btn-upgrade{padding:6px 16px;border-radius:6px;border:1px solid #7c3aed;background:transparent;color:#7c3aed;cursor:pointer;font-size:11px;font-family:'DM Sans',sans-serif;font-weight:500;transition:.15s}
.btn-upgrade:hover{background:#7c3aed12}
.btn-pub{padding:6px 20px;border-radius:6px;border:none;background:#2563eb;color:#fff;cursor:pointer;font-size:12px;font-family:'DM Sans',sans-serif;font-weight:500;transition:.15s}
.btn-pub:hover{background:#1d4ed8}
.btn-preview{width:28px;height:28px;border-radius:6px;border:1px solid var(--b2);background:transparent;color:var(--t3);cursor:pointer;transition:.15s;display:flex;align-items:center;justify-content:center;padding:0}
.btn-preview:hover{color:var(--t1);border-color:var(--b3);background:var(--sur2)}
.btn-preview svg{width:16px;height:16px;stroke:currentColor;fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}

/* LAYOUT */
.editor{display:flex;flex:1;overflow:hidden;position:relative}

/* LEFT PANEL - AI Chat */
.lp{width:var(--left);background:var(--sur);border-right:1px solid var(--b1);display:flex;flex-direction:column;flex-shrink:0;overflow:hidden}
.lp-messages{flex:1;overflow-y:auto;padding:14px}
.lp-msg{margin-bottom:14px;font-size:12px;line-height:1.7;color:var(--t2)}
.lp-msg-user{background:var(--sur2);border-radius:10px;padding:10px 12px;color:var(--t1);font-size:12px;line-height:1.6;margin-bottom:10px}
.lp-msg-ai{padding:0 2px}
.lp-progress{margin-top:8px}
.lp-progress-head{display:flex;align-items:center;gap:5px;font-size:11px;font-weight:500;color:var(--t1);cursor:pointer;margin-bottom:6px}
.lp-progress-body{font-size:11px;color:var(--t2);line-height:1.7;padding-left:2px}
.lp-progress-body a{color:var(--acc);text-decoration:underline;cursor:pointer}
.lp-actions{display:flex;gap:6px;margin-top:8px}
.lp-action{width:24px;height:24px;border-radius:5px;border:1px solid var(--b1);display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:11px;color:var(--t3)}
.lp-action:hover{background:var(--sur2);color:var(--t1)}
.lp-input-wrap{border-top:1px solid var(--b1);padding:10px 12px;display:flex;align-items:center;gap:8px}
.lp-input{flex:1;background:var(--sur2);border:1px solid var(--b1);border-radius:8px;padding:8px 12px;font-size:12px;color:var(--t1);font-family:'DM Sans',sans-serif;outline:none}
.lp-input::placeholder{color:var(--t3)}
.lp-input:focus{border-color:var(--acc)}
.lp-input-actions{display:flex;gap:4px}
.lp-input-btn{width:24px;height:24px;border-radius:5px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:12px;color:var(--t3)}
.lp-input-btn:hover{color:var(--t1)}
.lp-bottom{display:flex;align-items:center;justify-content:space-between;padding:6px 12px;border-top:1px solid var(--b1)}
.lp.collapsed{display:none}
.lp-bottom-icons{display:flex;gap:4px}

/* EDITOR TOOLBAR */
.editor-toolbar{width:44px;background:var(--sur);border-right:1px solid var(--b1);display:flex;flex-direction:column;align-items:center;padding:10px 0;flex-shrink:0;overflow-y:auto;gap:2px}
.et-btn{width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--t3);transition:.15s;border:none;background:transparent;font-size:14px}
.et-btn:hover{background:var(--sur2);color:var(--t1)}
.et-btn.active{background:var(--acc-d);color:var(--acc)}
.et-btn svg{width:18px;height:18px;stroke:currentColor;fill:none;stroke-width:1.5;stroke-linecap:round;stroke-linejoin:round}
.et-spacer{height:16px;flex-shrink:0}
.et-bottom{margin-top:auto;display:flex;flex-direction:column;align-items:center;gap:2px}

.add-el-panel{display:none;width:240px;background:var(--sur);border-right:1px solid var(--b1);flex-shrink:0;overflow-y:auto;flex-direction:column}
.add-el-panel.open{display:flex}
.add-el-header{padding:14px 16px 10px;display:flex;align-items:center;justify-content:space-between}
.add-el-title{font-size:13px;font-weight:600;color:var(--t1)}
.add-el-close{width:22px;height:22px;border-radius:5px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--t3);border:none;background:none;font-size:14px;transition:.12s}
.add-el-close:hover{background:var(--sur2);color:var(--t1)}
.add-el-search{margin:0 12px 10px;padding:7px 10px;border-radius:6px;border:1px solid var(--b1);background:var(--sur2);font-size:11px;color:var(--t1);font-family:'DM Sans',sans-serif;outline:none}
.add-el-search::placeholder{color:var(--t3)}
.add-el-search:focus{border-color:var(--acc)}
.add-el-group{padding:6px 16px 4px;font-size:10px;font-weight:600;color:var(--t3);letter-spacing:.4px;text-transform:uppercase}
.add-el-item{display:flex;align-items:center;gap:10px;padding:8px 16px;cursor:grab;transition:.12s;user-select:none}
.add-el-item:hover{background:var(--sur2)}
.add-el-item:active{cursor:grabbing;opacity:.7}
.add-el-item-icon{width:36px;height:36px;border-radius:8px;background:var(--sur2);border:1px solid var(--b1);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.add-el-item-info{display:flex;flex-direction:column;gap:1px;min-width:0}
.add-el-item-name{font-size:12px;font-weight:500;color:var(--t1)}
.add-el-item-desc{font-size:10px;color:var(--t3);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.add-el-drag-ghost{position:fixed;pointer-events:none;z-index:9999;padding:8px 14px;background:var(--acc);color:#fff;border-radius:8px;font-size:12px;font-weight:500;font-family:'DM Sans',sans-serif;box-shadow:0 4px 16px #0003;opacity:.9;white-space:nowrap}
.canvas-drop-indicator{position:absolute;left:0;right:0;height:3px;background:var(--acc);border-radius:2px;z-index:100;pointer-events:none;display:none}
.c-el.bound[draggable="true"]{cursor:grab}
.c-el.bound[draggable="true"]:active{cursor:grabbing}
.c-el[draggable="true"]{cursor:grab}
.c-el[draggable="true"]:active{cursor:grabbing}
.c-section:not(.has-ctx).el-drop-target-empty{outline:2px dashed #e84393;outline-offset:-2px;background:color-mix(in srgb, #e84393 5%, transparent)}
.c-section:not(.has-ctx).el-drop-target-empty .s-body{pointer-events:none}
.c-section.el-drop-target{outline:2px dashed #e84393;outline-offset:-2px;background:color-mix(in srgb, #e84393 5%, transparent)}
.c-section.el-drop-target .s-body{pointer-events:none}
.el-drag-ghost{position:fixed;pointer-events:none;z-index:9999;padding:6px 12px;background:#e84393;color:#fff;border-radius:8px;font-size:11px;font-weight:500;font-family:'DM Sans',sans-serif;box-shadow:0 4px 16px #0003;opacity:.9;white-space:nowrap;display:flex;align-items:center;gap:6px}
.toast-undo{display:inline;margin-left:8px;color:var(--acc);text-decoration:underline;cursor:pointer;font-weight:600}
.ctx-menu{display:none;position:fixed;z-index:9999;background:var(--sur);border:1px solid var(--b2);border-radius:8px;box-shadow:0 8px 30px #0003;padding:4px 0;min-width:140px;font-family:'DM Sans',sans-serif}
.ctx-menu.open{display:block}
.ctx-menu-item{padding:7px 14px;font-size:12px;color:var(--t2);cursor:pointer;display:flex;align-items:center;gap:8px;transition:.1s}
.ctx-menu-item:hover{background:var(--sur2);color:var(--t1)}
.ctx-menu-item.danger{color:#e84393}
.ctx-menu-item.danger:hover{background:#fce4ec;color:#e84393}
.ctx-menu-item.spec{color:var(--acc)}
.ctx-menu-item.spec:hover{background:var(--acc-d);color:var(--acc)}
.ctx-menu-sep{height:1px;background:var(--b1);margin:4px 0}
.et-btn.product-mode-active{background:linear-gradient(135deg,#7c3aed20,#3b82f620);color:#7c3aed;border:1px solid #7c3aed40;position:relative}
.et-btn.product-mode-active::after{content:'';position:absolute;top:3px;right:3px;width:6px;height:6px;background:#7c3aed;border-radius:50%;box-shadow:0 0 6px #7c3aed80}
html.dark .et-btn.product-mode-active{color:#a78bfa}
html.dark .et-btn.product-mode-active::after{background:#a78bfa;box-shadow:0 0 6px #a78bfa80}
body.product-mode .c-el:hover,body.product-mode .c-section:hover{outline:2px dashed #7c3aed40;outline-offset:-1px;cursor:help}
.spec-page{display:none;position:fixed;top:0;left:0;right:0;bottom:0;z-index:9000;background:var(--bg);overflow-y:auto}
.spec-page.active{display:block}
.spec-topbar{position:sticky;top:0;z-index:10;background:var(--sur);border-bottom:1px solid var(--b1);padding:10px 24px;display:flex;align-items:center;gap:12px}
.spec-back-btn{display:flex;align-items:center;gap:6px;padding:6px 14px;border-radius:8px;border:1px solid var(--b2);background:transparent;color:var(--t2);cursor:pointer;font-size:12px;font-family:'DM Sans',sans-serif;transition:.15s}
.spec-back-btn:hover{background:var(--sur2);color:var(--t1);border-color:var(--b3)}
.spec-back-btn svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.spec-topbar-title{font-size:13px;font-weight:600;color:var(--t1);display:flex;align-items:center;gap:8px}
.spec-topbar-badge{font-size:10px;padding:2px 8px;border-radius:10px;background:linear-gradient(135deg,#7c3aed20,#3b82f620);color:#7c3aed;font-weight:600;letter-spacing:.3px}
.spec-topbar-element{display:flex;align-items:center;gap:8px;margin-left:auto;padding:4px 12px;background:var(--sur2);border:1px solid var(--b1);border-radius:8px;font-size:11px;color:var(--t2)}
.spec-topbar-element-icon{font-size:14px;color:var(--t3)}
.spec-topbar-element-name{font-weight:600;color:var(--t1)}
.spec-topbar-element-type{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace}
.spec-topbar-element-binding{display:flex;align-items:center;gap:4px;padding:2px 6px;background:var(--grn-d);border:1px solid var(--grn-b);border-radius:6px;font-size:10px;font-family:'DM Mono',monospace;color:var(--grn)}
.spec-body{max-width:780px;margin:0 auto;padding:40px 32px 80px}
.spec-hero{margin-bottom:36px}
.spec-hero h1{font-family:'Syne',sans-serif;font-size:28px;font-weight:800;color:var(--t1);margin-bottom:8px}
.spec-hero-sub{font-size:13px;color:var(--t3);line-height:1.6}
.spec-meta{display:flex;gap:16px;margin-top:16px;flex-wrap:wrap}
.spec-meta-item{display:flex;align-items:center;gap:6px;font-size:11px;color:var(--t3);padding:4px 10px;background:var(--sur);border:1px solid var(--b1);border-radius:6px}
.spec-section{margin-bottom:32px}
.spec-section-title{font-family:'Syne',sans-serif;font-size:16px;font-weight:700;color:var(--t1);margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid var(--b1);display:flex;align-items:center;gap:8px}
.spec-text{font-size:13px;line-height:1.8;color:var(--t2);margin-bottom:12px}
.spec-list{list-style:none;padding:0;margin:0 0 12px}
.spec-list li{position:relative;padding:8px 12px 8px 28px;font-size:12px;line-height:1.7;color:var(--t2);border-left:2px solid var(--b1);margin-bottom:2px;transition:.15s}
.spec-list li:hover{background:var(--sur);border-left-color:var(--acc)}
.spec-list li::before{content:'→';position:absolute;left:10px;color:var(--acc);font-weight:600}
.spec-table{width:100%;border-collapse:collapse;margin:12px 0;font-size:12px}
.spec-table th{text-align:left;padding:8px 12px;background:var(--sur2);color:var(--t1);font-weight:600;border:1px solid var(--b1);font-size:11px;text-transform:uppercase;letter-spacing:.3px}
.spec-table td{padding:8px 12px;border:1px solid var(--b1);color:var(--t2);line-height:1.6;vertical-align:top}
.spec-table tr:hover td{background:var(--sur)}
.spec-code{font-family:'DM Mono',monospace;font-size:11px;background:var(--sur2);padding:2px 6px;border-radius:4px;color:var(--acc)}
.spec-note{padding:12px 16px;background:var(--acc-d);border:1px solid var(--acc-b);border-radius:8px;font-size:12px;line-height:1.7;color:var(--t2);margin:12px 0;display:flex;gap:10px}
.spec-note-icon{font-size:16px;flex-shrink:0;margin-top:1px}
.spec-wireframe{border:1px solid var(--b1);border-radius:10px;overflow:hidden;margin:16px 0;background:var(--sur)}
.spec-wireframe-label{font-size:10px;font-weight:600;color:var(--t3);padding:8px 14px;background:var(--sur2);border-bottom:1px solid var(--b1);text-transform:uppercase;letter-spacing:.5px}
.spec-wireframe-body{padding:20px;display:flex;justify-content:center}
.spec-wireframe-body img,.spec-wireframe-body svg{max-width:100%;border-radius:6px}
.spec-flow{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin:12px 0}
.spec-flow-step{padding:6px 12px;background:var(--sur);border:1px solid var(--b1);border-radius:6px;font-size:11px;color:var(--t2);font-weight:500}
.spec-flow-arrow{color:var(--t3);font-size:14px}
.spec-status{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:10px;font-size:10px;font-weight:600}
.spec-status.implemented{background:#d946a812;color:#d946a8}
.spec-status.in-progress{background:#d9770612;color:#d97706}
.spec-status.planned{background:#3b82f612;color:#3b82f6}
.spec-demo-wrap{border:1px solid var(--b1);border-radius:12px;overflow:hidden;margin:16px 0;background:var(--sur)}
.spec-demo-label{display:flex;align-items:center;justify-content:space-between;font-size:10px;font-weight:600;color:var(--t3);padding:8px 14px;background:var(--sur2);border-bottom:1px solid var(--b1);text-transform:uppercase;letter-spacing:.5px}
.spec-demo-badge{font-size:9px;padding:2px 8px;border-radius:10px;background:#22c55e18;color:#22c55e;font-weight:600;letter-spacing:.3px;display:flex;align-items:center;gap:4px}
.spec-demo-badge::before{content:'';width:6px;height:6px;border-radius:50%;background:#22c55e;animation:spec-pulse 1.5s ease-in-out infinite}
@keyframes spec-pulse{0%,100%{opacity:1}50%{opacity:.3}}
.spec-demo-body{padding:24px;display:flex;justify-content:center;background:var(--bg);position:relative;min-height:340px}
.spec-demo-canvas{position:relative;width:460px}
.spec-demo-step{position:absolute;opacity:0;transition:opacity .4s ease}
.spec-demo-step.active{opacity:1}
.spec-demo-timeline{display:flex;align-items:center;gap:0;padding:10px 14px;border-top:1px solid var(--b1);background:var(--sur2)}
.spec-demo-dot{width:8px;height:8px;border-radius:50%;background:var(--b2);cursor:pointer;transition:.2s;flex-shrink:0}
.spec-demo-dot.active{background:var(--acc);box-shadow:0 0 8px var(--acc-b)}
.spec-demo-dot.done{background:var(--grn)}
.spec-demo-line{flex:1;height:2px;background:var(--b1)}
.spec-demo-line.done{background:var(--grn)}
.spec-demo-caption{padding:8px 14px;font-size:11px;color:var(--t2);text-align:center;border-top:1px solid var(--b1);min-height:34px;display:flex;align-items:center;justify-content:center;gap:6px}
.spec-demo-caption b{color:var(--t1)}
.spec-demo-controls{display:flex;align-items:center;gap:8px;padding:8px 14px;border-top:1px solid var(--b1);justify-content:center}
.spec-demo-btn{padding:4px 14px;border-radius:6px;border:1px solid var(--b2);background:transparent;color:var(--t2);cursor:pointer;font-size:11px;font-family:'DM Sans',sans-serif;transition:.15s;display:flex;align-items:center;gap:4px}
.spec-demo-btn:hover{background:var(--sur);color:var(--t1);border-color:var(--b3)}
.spec-demo-btn.playing{background:var(--acc-d);color:var(--acc);border-color:var(--acc-b)}
.tb-ai-btn{padding:4px 10px;border-radius:6px;border:1px solid var(--acc-b);background:var(--acc-d);color:var(--acc);cursor:pointer;font-size:11px;font-family:'DM Sans',sans-serif;font-weight:500;transition:.15s;display:flex;align-items:center;gap:4px}
.tb-ai-btn:hover{background:var(--acc-b)}
.tb-ai-btn.active{background:var(--acc);color:#fff;border-color:var(--acc)}

/* CANVAS */
.canvas{flex:1;position:relative;overflow:auto;padding:20px;display:flex;justify-content:center;align-items:flex-start;
  background:radial-gradient(ellipse 700px 400px at 25% 70%,#7c6fff09,transparent),var(--bg);transition:padding-right .25s}
.canvas.inspector-open{padding-right:calc(var(--panel) + 20px)}
.canvas.panning{cursor:grabbing!important;user-select:none}
.canvas-grid{position:absolute;inset:0;
  background-image:linear-gradient(var(--b1) 1px,transparent 1px),linear-gradient(90deg,var(--b1) 1px,transparent 1px);
  background-size:24px 24px;opacity:.55;pointer-events:none;z-index:0}
.canvas-inner{position:relative;z-index:1;display:flex;flex-direction:column;gap:0;width:100%;max-width:100%}
.canvas-inner.hidden-page{display:none}

/* Items List Page */
.items-page{position:relative;z-index:1;width:720px;background:#fff;border-radius:8px;box-shadow:0 2px 16px #0001;overflow:visible;display:none}
.items-page.active-page{display:block}
.items-page-header{padding:32px 36px 24px}
.items-page-title{font-family:'Syne',sans-serif;font-weight:800;font-size:32px;color:#1a1aff;font-style:italic}
.items-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0;padding:0 36px 32px}
.items-card{display:flex;flex-direction:column;cursor:pointer;position:relative}
.items-card-img{width:100%;aspect-ratio:1;background:#222;overflow:hidden;display:flex;align-items:center;justify-content:center}
.items-card-img svg{width:80%;height:80%;opacity:.9}
.items-card-body{padding:10px 8px 14px}
.items-card-title{font-family:'Syne',sans-serif;font-style:italic;font-weight:600;font-size:13px;color:#1a1aff;margin-bottom:6px}
.items-card-desc{font-size:10px;color:#555;line-height:1.6;margin-bottom:10px}
.items-card-btn{display:inline-block;padding:6px 14px;background:#111;color:#fff;font-size:10px;font-weight:600;border-radius:2px;cursor:pointer;letter-spacing:.3px}

/* Multi-State Box */
.msb{border:2px dashed var(--b2);border-radius:12px;position:relative;overflow:visible;cursor:pointer;transition:border-color .2s,box-shadow .2s;background:var(--sur)}
.msb:hover{border-color:var(--t3)}
.msb.sel{border-color:var(--t3);box-shadow:0 0 0 3px var(--b2)}
.msb.bound{border-color:var(--acc)}
.msb.bound:hover{border-color:color-mix(in srgb, var(--acc) 80%, transparent)}
.msb.bound.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.msb-header{display:none}
.msb-pill{position:absolute;top:0;left:10px;transform:translateY(-50%);height:auto;overflow:hidden;font-size:8px;padding:0;pointer-events:auto;cursor:pointer;border-radius:20px;white-space:nowrap;max-width:320px;display:none;align-items:center;z-index:10}
.msb.bound .msb-pill{display:flex;opacity:0;transition:opacity .15s}
.msb.bound:hover .msb-pill{opacity:1}
.msb.bound.sel .msb-pill{opacity:1}
.msb.bound:not(.sel) .msb-pill{background:var(--sur);border:1px solid var(--acc);color:var(--acc)}
.msb.bound:not(.sel) .msb-pill .el-bind-sep{background:var(--acc);opacity:.3}
.msb.bound:not(.sel) .msb-pill .el-bind-sec{opacity:.65}
.msb.bound:not(.sel) .msb-pill .el-bind-sec:hover{opacity:1;background:rgba(108,92,231,.1)}
.msb.bound:not(.sel) .msb-pill .el-bind-ctx:hover{background:rgba(108,92,231,.1)}
.msb.bound.sel .msb-pill{background:var(--acc);color:#fff}
.msb.bound.sel .msb-pill .el-bind-sep{background:#fff;opacity:.3}
.msb.bound.sel .msb-pill .el-bind-sec{opacity:.8}
.msb.bound.sel .msb-pill .el-bind-sec:hover{opacity:1;background:rgba(255,255,255,.15)}
.msb.bound.sel .msb-pill .el-bind-ctx:hover{background:rgba(255,255,255,.15)}
.msb-view-sel{position:absolute;top:0;right:10px;transform:translateY(-50%);display:none;align-items:center;gap:0;background:var(--sur);border-radius:20px;overflow:hidden;z-index:10;pointer-events:auto;font-size:8px;border:1px solid var(--acc)}
.msb.bound .msb-view-sel{display:flex;opacity:0;transition:opacity .15s}
.msb.bound:hover .msb-view-sel{opacity:1}
.msb.bound.sel .msb-view-sel{opacity:1}
.msb.bound.sel .msb-view-sel{background:var(--acc);border-color:var(--acc)}
.msb-view-btn{padding:2px 8px;font-size:8px;font-family:'DM Mono',monospace;cursor:pointer;color:var(--acc);transition:.12s;border:none;background:none;opacity:.65}
.msb-view-btn:hover{opacity:1;background:rgba(108,92,231,.1)}
.msb-view-btn.active{background:var(--acc);color:#fff;font-weight:600;opacity:1}
.msb.bound.sel .msb-view-btn{color:rgba(255,255,255,.7)}
.msb.bound.sel .msb-view-btn:hover{color:#fff;background:rgba(255,255,255,.15)}
.msb.bound.sel .msb-view-btn.active{background:#fff;color:var(--acc)}
.msb-view-btn.disabled{opacity:.35;text-decoration:line-through;pointer-events:auto}
.msb-view-btn.disabled.active{background:var(--t3);opacity:.5;text-decoration:line-through}
.msb-body{min-height:400px;padding:28px;padding-top:36px;position:relative}
.msb-view{display:none}
.msb-view.active{display:block}

/* Item Detail Page */
.item-detail-page{position:relative;z-index:1;width:720px;background:#fff;border-radius:8px;box-shadow:0 2px 16px #0001;overflow:visible;display:none}
.item-detail-page.active-page{display:block}
.c-page{border:2px dashed var(--b2);border-radius:14px;position:relative;cursor:pointer;transition:border-color .2s,box-shadow .2s;padding:0;overflow:visible}
.c-page:hover{border-color:var(--b3)}
.c-page.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.c-page.has-ctx{border-color:var(--b2)}
.c-page.has-ctx.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.c-page .ctx-pill{display:block}
.c-page:not(.has-ctx) .ctx-pill .ctx-bind-icon{background:var(--b3);color:var(--t3);box-shadow:0 1px 4px rgba(0,0,0,.1)}
.c-page:not(.has-ctx) .ctx-pill .ctx-bind-icon:hover{background:var(--b2);color:var(--t1);box-shadow:0 2px 8px rgba(0,0,0,.15)}
.c-page.has-ctx:not(.sel) .ctx-pill .ctx-bind-icon{background:#e84393;color:#fff;box-shadow:0 2px 8px rgba(232,67,147,.35)}
.c-page.has-ctx:not(.sel) .ctx-pill .ctx-bind-icon:hover{background:#d63384;color:#fff;box-shadow:0 4px 14px rgba(232,67,147,.45)}
.c-page.has-ctx.sel .ctx-pill .ctx-bind-icon{background:#e84393;color:#fff;box-shadow:0 2px 8px rgba(232,67,147,.35)}
.c-page-label{position:absolute;top:-10px;right:14px;background:var(--sur);border:1px solid var(--b2);border-radius:4px;padding:1px 8px;font-size:9px;font-family:'DM Mono',monospace;color:var(--t3);letter-spacing:.5px;text-transform:uppercase;z-index:5}
.c-page > .c-section{margin:12px;border-radius:0}
.c-page > .c-section:first-of-type{margin-top:20px}
.c-page > .c-section:last-of-type{margin-bottom:12px}
.detail-related-section{padding:14px}
.detail-related-title{font-family:'Syne',sans-serif;font-weight:700;font-size:16px;color:#1a1a2e;margin-bottom:12px;padding:0 4px}
.detail-related-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.detail-related-card{background:#f8f8fa;border-radius:8px;overflow:hidden;border:1px solid #eee}
.detail-related-thumb{height:80px;background:#ddd;display:flex;align-items:center;justify-content:center}
.detail-related-thumb svg{width:50%;height:50%;opacity:.7}
.detail-related-info{padding:8px 10px}
.detail-related-name{font-size:11px;font-weight:600;color:#1a1a2e}
.detail-related-price{font-size:10px;color:#888;margin-top:2px}
.item-ctrl{display:flex;align-items:center;gap:0;background:#fff;border-bottom:1px solid #e5e5e5;padding:0 16px;height:36px;font-size:12px;font-family:'DM Sans',sans-serif}
.item-ctrl-site{color:#1a1aff;font-weight:600;font-size:12px;padding-right:12px;white-space:nowrap}
.item-ctrl-nav{color:#555;font-size:11px;padding:0 8px;cursor:pointer}
.item-ctrl-sep{width:1px;height:18px;background:#e5e5e5;margin:0 4px;flex-shrink:0}
.item-ctrl-drag{color:#bbb;font-size:14px;cursor:grab;padding:0 6px;letter-spacing:2px}
.item-ctrl-select{flex:1;display:flex;align-items:center;gap:0;background:#f5f5f5;border:1px solid #e0e0e0;border-radius:4px;padding:4px 10px;margin:0 6px;font-size:12px;color:#333;min-width:0}
.item-ctrl-select-name{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.item-ctrl-count{color:#999;font-size:11px;white-space:nowrap;margin-left:8px;cursor:pointer}
.item-ctrl-edit{color:#1a1aff;font-size:12px;font-weight:500;cursor:pointer;white-space:nowrap;padding-left:8px}
.item-ctrl-arrows{display:flex;align-items:center;gap:2px;margin-left:6px}
.item-ctrl-arrow{width:22px;height:22px;border-radius:4px;border:1px solid #e0e0e0;background:#fff;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:11px;color:#555;transition:.1s}
.item-ctrl-arrow:hover{background:#f0f0f0;color:#111}
.item-detail-hero{background:#111;width:100%;aspect-ratio:16/9;display:flex;align-items:center;justify-content:center;overflow:hidden}
.item-detail-hero>svg{width:60%;height:60%;opacity:.9}
.item-detail-body{padding:32px 36px}
.item-detail-title{font-family:'Syne',sans-serif;font-style:italic;font-weight:700;font-size:28px;color:#1a1aff;margin-bottom:14px}
.item-detail-desc{font-size:13px;color:#555;line-height:1.8;max-width:520px}

/* SECTIONS */
.c-section{border-radius:0;border:1.5px solid var(--b2);background:var(--sur);overflow:visible;cursor:pointer;position:relative;transition:border-color .2s,box-shadow .2s}
.c-section:hover{border-color:var(--b3)}
.c-section.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.c-section.has-ctx{border-color:var(--b2)}
.c-section.has-ctx.sel{border-color:#e84393;box-shadow:0 0 0 3px rgba(232,67,147,.2)}

.ctx-pill{position:absolute;top:8px;left:0;z-index:10;display:none;pointer-events:none}
.ctx-pill .ctx-bind-icon{width:28px;height:28px;margin-left:-15px;border-radius:8px;background:var(--b3);color:var(--t3);display:flex;align-items:center;justify-content:center;cursor:pointer;pointer-events:auto;box-shadow:0 1px 4px rgba(0,0,0,.1);transition:transform .15s,box-shadow .15s,background .15s,color .15s}
.ctx-pill .ctx-bind-icon:hover{transform:scale(1.1);background:var(--b2);color:var(--t1);box-shadow:0 2px 8px rgba(0,0,0,.15)}
.ctx-pill .ctx-bind-icon:active{transform:scale(.95)}
.ctx-pill .ctx-bind-icon svg{width:16px;height:16px}
.c-section .ctx-pill{display:block}
.c-section.has-ctx .ctx-pill .ctx-bind-icon{background:#e84393;color:#fff;box-shadow:0 2px 8px rgba(232,67,147,.35)}
.c-section.has-ctx .ctx-pill .ctx-bind-icon:hover{background:#d63384;color:#fff;box-shadow:0 4px 14px rgba(232,67,147,.45)}
.c-section.has-ctx.sel .ctx-pill .ctx-bind-icon{background:#e84393;color:#fff;box-shadow:0 2px 8px rgba(232,67,147,.35)}
.c-repeater.bound .rep-pill{display:flex;align-items:center;opacity:0;transition:opacity .15s}
.c-repeater.bound:hover .rep-pill{opacity:1}
.c-repeater.bound.sel .rep-pill{opacity:1}
.c-repeater.bound:not(.sel) .rep-pill{background:var(--sur);border:1px solid var(--grn);color:var(--grn)}
.c-repeater.bound:not(.sel) .rep-pill .el-bind-sep{background:var(--grn);opacity:.3}
.c-repeater.bound:not(.sel) .rep-pill .el-bind-sec{opacity:.65}
.c-repeater.bound:not(.sel) .rep-pill .el-bind-sec:hover{opacity:1;background:rgba(16,185,129,.1)}
.c-repeater.bound:not(.sel) .rep-pill .el-bind-ctx:hover{background:rgba(16,185,129,.1)}
.c-repeater.bound.sel .rep-pill{background:var(--grn);color:#fff}
.c-repeater.bound.sel .rep-pill .el-bind-sep{background:#fff;opacity:.3}
.c-repeater.bound.sel .rep-pill .el-bind-sec{opacity:.8}
.c-repeater.bound.sel .rep-pill .el-bind-sec:hover{opacity:1;background:rgba(255,255,255,.15)}
.c-repeater.bound.sel .rep-pill .el-bind-ctx:hover{background:rgba(255,255,255,.15)}
.rep-pill{position:absolute;top:0;left:10px;transform:translateY(-50%);height:auto;overflow:hidden;font-size:8px;padding:0;pointer-events:auto;cursor:pointer;border-radius:20px;white-space:nowrap;max-width:320px}

.s-top{padding:8px 12px 7px;border-bottom:1px solid var(--b1);display:flex;align-items:center;gap:6px;font-family:'DM Mono',monospace;font-size:10px;color:var(--t3)}
.s-name{flex:1}
.s-body{padding:32px;padding-top:36px;padding-bottom:60px;display:flex;flex-direction:column;gap:24px;overflow:visible;min-height:600px}

/* CANVAS ELEMENTS - visual */
.c-el{border-radius:8px;cursor:pointer;transition:all .18s;position:relative;overflow:visible}
.c-el:hover .c-el-overlay{opacity:1}
.c-el.sel .c-el-overlay{opacity:1;border-color:var(--acc)}
.c-el.bound .c-el-overlay{border-color:var(--grn)}
.c-el.bound.sel .c-el-overlay{opacity:1;border-color:#e84393}
.c-el-img.sel,.c-el-img.sel:hover{outline:2px solid var(--acc);outline-offset:-2px}
.c-el-img.bound{outline:1.5px solid var(--grn-b);outline-offset:-1px}
.c-el-img.bound.sel{outline:2px solid #e84393;outline-offset:-2px}

.c-el-overlay{position:absolute;inset:0;border:1.5px solid transparent;border-radius:8px;pointer-events:none;opacity:0;transition:opacity .15s}
.c-el.sel .c-el-overlay{opacity:1}
/* floating type label above element */
/* floating tags row above element */
.el-tags{position:absolute;top:0;left:8px;transform:translateY(-50%);z-index:20;
  display:flex;gap:4px;align-items:center;pointer-events:none;z-index:10;
  opacity:0;transition:opacity .15s}
.c-el.sel .el-tags{opacity:1}
.c-el.bound:hover .el-tags{opacity:1}
.el-type-tag{background:var(--sur);border:1px solid var(--b2);color:var(--t3);
  font-family:'DM Mono',monospace;font-size:9px;font-weight:500;
  padding:1px 7px;border-radius:10px;white-space:nowrap;line-height:1.6;
  display:flex;align-items:center;gap:4px;pointer-events:auto;cursor:pointer}
.c-el.sel .el-type-tag{background:var(--sur2);border-color:var(--acc-b);color:var(--acc)}
.c-el.bound .el-type-tag{border-color:var(--grn-b);color:var(--grn)}
.c-el.bound.sel .el-type-tag{border-color:#f8a4c8;color:#e84393}
.el-type-tag .el-bound-indicator{display:none;width:10px;height:10px;flex-shrink:0}
.c-el.bound .el-type-tag .el-bound-indicator{display:block}
.type-tag-label,.type-tag-bind-icon{cursor:pointer;border-radius:4px;transition:background .12s}
.type-tag-label:hover{opacity:.7}
.type-tag-bind-icon:hover{opacity:.7}
.type-tag-bind-icon{display:flex;align-items:center}
.el-bind-tag{display:none}
.el-bind-sec,.el-bind-ctx{padding:2px 7px;display:inline-block;transition:.12s}
.el-bind-sec{border-radius:10px 0 0 10px;opacity:.65;font-weight:700}
.el-bind-ctx{border-radius:0 10px 10px 0;overflow:hidden;text-overflow:ellipsis}
.el-bind-sep{width:1px;height:10px;background:var(--grn);opacity:.3;flex-shrink:0}
.el-bind-icon{vertical-align:-1px;margin-right:2px;opacity:.7;flex-shrink:0}

/* Text element */
.c-el-text{background:var(--sur2);padding:16px 18px 18px;min-height:64px;display:flex;flex-direction:column;gap:4px;align-items:flex-start;position:relative;border-radius:8px}
.c-el-text .val{font-size:22px;font-family:'Syne',sans-serif;font-weight:600;color:var(--t1);transition:color .2s;line-height:1.3}
.c-el-text .val.static{color:var(--t1)}
.c-el-text .src-tag,.c-el-badge .src-tag{display:none}
.c-el-text.bound .val{color:var(--t1);font-size:22px;font-family:'Syne',sans-serif;font-weight:600}
.c-el-text.editing{outline:2px solid var(--acc);outline-offset:-2px;z-index:10}
.c-el-text.editing .val{cursor:text;outline:none}
.c-el-text.editing .c-el-overlay{pointer-events:none;opacity:0}

/* Image element */
.c-el-img{background:var(--sur2);height:320px;display:flex;align-items:center;justify-content:center;gap:8px;flex-direction:column;position:relative;overflow:hidden}.c-el-img .el-tags{top:6px;left:6px;transform:none}
.c-el-img .img-placeholder{font-size:28px;opacity:.4}
.c-el-icon{display:flex!important;align-items:center;justify-content:center}
.c-el-img.bound .img-placeholder{opacity:1}

/* Button element */
.c-el-btn-wrap{display:flex;padding:24px 24px;background:var(--sur2);justify-content:flex-start;min-height:80px;align-items:center}
.c-el-btn{padding:16px 40px;border-radius:8px;background:#ec4899;color:#fff;font-size:16px;font-weight:500;font-family:'DM Sans',sans-serif;pointer-events:none;white-space:nowrap}
.c-el-btn.bound{background:var(--sur3);color:var(--grn);border:1px solid var(--grn-b);font-family:'DM Mono',monospace;font-size:11px}

/* Toggle element */
.c-el-toggle{position:relative;min-height:30px}
.c-el-toggle .toggle-track.on{background:var(--acc)!important}

/* Dropdown element */
.c-el-dropdown{position:relative;min-height:30px}

/* Bound indicator dot */
.bound-dot{width:5px;height:5px;border-radius:50%;background:var(--grn);position:absolute;top:6px;right:7px;display:none}
.c-el.bound .bound-dot{display:none}

.c-row{display:flex;gap:20px;overflow:visible}
.c-row>.c-el{flex:1}

/* ── REPEATER */
.c-repeater{border:1.5px solid var(--b2);border-radius:10px;overflow:visible;cursor:pointer;
  position:relative;background:var(--sur2);transition:border-color .18s}
.c-repeater:hover{border-color:var(--b3)}
.c-repeater.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.c-repeater.bound{border-color:var(--grn)}
.c-repeater.sel.bound{box-shadow:0 0 0 3px var(--grn-d)}
.rep-header{padding:7px 10px;display:none;align-items:center;gap:7px;border-bottom:1px solid var(--b1)}
.rep-icon{font-size:12px;color:var(--t3)}
.rep-label{font-family:'DM Mono',monospace;font-size:10px;color:var(--t3);font-weight:500}
.rep-count{margin-left:auto;font-family:'DM Mono',monospace;font-size:10px;color:var(--t3)}
.c-repeater.bound .rep-count{color:var(--grn)}
.rep-bind-btn{width:22px;height:22px;border:1px solid var(--b2);border-radius:5px;
  display:flex;align-items:center;justify-content:center;color:var(--t3);
  cursor:pointer;transition:.15s;background:var(--sur3);flex-shrink:0}
.rep-bind-btn:hover{color:var(--acc);border-color:var(--acc-b);background:var(--acc-d)}
.c-repeater.bound .rep-bind-btn{color:var(--grn);border-color:var(--grn-b)}

/* ── SKELETON EMPTY STATE */
.rep-skeleton-overlay{position:absolute;inset:0;z-index:20;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,.55);backdrop-filter:blur(1px);border-radius:inherit}
[data-theme="dark"] .rep-skeleton-overlay{background:rgba(20,20,30,.65)}
.rep-skeleton-overlay .rep-skel-icon{font-size:28px;margin-bottom:8px;opacity:.7}
.rep-skeleton-overlay .rep-skel-title{font-size:13px;font-weight:600;color:var(--t1);margin-bottom:4px}
.rep-skeleton-overlay .rep-skel-desc{font-size:11px;color:var(--t3);margin-bottom:14px;text-align:center;line-height:1.5}
.rep-skeleton-overlay .rep-skel-btn{display:inline-flex;align-items:center;gap:6px;padding:7px 18px;border-radius:8px;background:var(--acc);color:#fff;font-size:12px;font-weight:600;border:none;cursor:pointer;transition:.15s;box-shadow:0 2px 8px rgba(59,130,246,.3)}
.rep-skeleton-overlay .rep-skel-btn:hover{background:#2563eb;box-shadow:0 4px 14px rgba(59,130,246,.4)}
.c-repeater.has-skeleton .rep-grid,.c-repeater.has-skeleton .detail-related-grid{filter:blur(2px) grayscale(.8);opacity:.25;pointer-events:none}
.c-repeater.has-skeleton .rep-header{pointer-events:none;opacity:.3}

/* ── REPEATER ITEMS */
.rep-grid{display:flex;flex-direction:column;gap:16px;padding:20px}
.rep-item{border:1.5px solid var(--b2);border-radius:10px;overflow:visible;cursor:pointer;position:relative;
  display:flex;gap:20px;padding:20px;background:var(--sur2);transition:border-color .15s}
.rep-item:hover{border-color:var(--b3)}
.rep-item.sel{border-color:var(--acc);box-shadow:0 0 0 3px var(--acc-d)}
.rep-thumb{width:140px;height:140px;flex-shrink:0;border-radius:7px;overflow:hidden;padding:0 !important}
.rep-content{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}
.rep-meta{display:flex;gap:8px;align-items:center;margin-top:2px}
.rep-cat{font-size:12px;font-family:'DM Mono',monospace;color:var(--acc);background:var(--acc-d);
  padding:1px 6px;border-radius:4px}
.rep-time{font-size:12px;color:var(--t3);font-family:'DM Mono',monospace}
.rep-item .c-el-text{background:transparent;padding:2px 0;min-height:unset;border-radius:0}
.rep-item .c-el-text .val{font-size:13px}
.rep-item .c-el-text .val.static{color:var(--t2)}
.c-el-badge{background:transparent;padding:0;min-height:unset;border-radius:4px;display:inline-flex;
  align-items:center;position:relative;cursor:pointer}
.c-el-badge:hover .c-el-overlay{opacity:.4}
.c-el-badge.sel .c-el-overlay{opacity:1;border-radius:4px}

/* ── IMAGE PROP CONTROLLER */
.img-prop-row{flex-direction:column;align-items:stretch}
.img-ctrl{display:flex;gap:8px;background:var(--sur3);border-radius:8px;padding:8px;border:1px solid var(--b1)}
.img-ctrl.bound{border-color:var(--grn-b);background:var(--grn-d)}
.img-ctrl-thumb{width:64px;height:64px;flex-shrink:0;position:relative;border-radius:6px;overflow:hidden;background:var(--sur2)}
.img-ctrl-chip{font-size:9px;font-family:'DM Mono',monospace;color:#4a0025;
  background:var(--grn);padding:2px 6px;border-radius:6px;line-height:1.4;
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:56px}
.img-ctrl-actions{flex:1;display:flex;flex-direction:column;gap:4px;min-width:0}
.img-ctrl-hint{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace}
.img-ctrl-field{font-size:10px;color:var(--grn);font-family:'DM Mono',monospace;font-weight:500}
.img-ctrl-unbind{font-size:9px;color:var(--t3);cursor:pointer;font-family:'DM Mono',monospace}
.img-ctrl-unbind:hover{color:var(--red)}

/* ── RIGHT PANEL */
.rp{width:var(--panel);background:var(--sur);border-left:1px solid var(--b1);display:none;flex-direction:column;overflow:hidden;position:fixed;right:0;top:var(--top);bottom:0;z-index:1000;box-shadow:-4px 0 12px rgba(0,0,0,.15)}
.rp.open{display:flex}

.rp-head{padding:12px 14px 10px;border-bottom:1px solid var(--b1)}
.rp-el-name{font-family:'Syne',sans-serif;font-weight:700;font-size:15px}
.rp-el-type{font-family:'DM Mono',monospace;font-size:10px;color:var(--t3);margin-top:2px}

.rp-tabs{display:flex;border-bottom:1px solid var(--b1);flex-shrink:0}
.rp-tab{flex:1;padding:8px 4px;text-align:center;font-size:11px;color:var(--t3);cursor:pointer;border-bottom:2px solid transparent;transition:.12s;user-select:none}
.rp-tab:hover{color:var(--t2)}
.rp-tab.active{color:var(--acc);border-bottom-color:var(--acc)}

.rp-body{flex:1;overflow-y:auto}
::-webkit-scrollbar{width:3px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--b2);border-radius:2px}

/* Panel section */
.ps{padding:11px 14px;border-bottom:1px solid var(--b1)}
.ps:last-child{border-bottom:none}
.ps-lbl{font-size:10px;letter-spacing:.7px;text-transform:uppercase;color:var(--t3);font-family:'DM Mono',monospace;margin-bottom:9px}

/* Collapsible sub-category */
.rp-cat{border-bottom:1px solid var(--b1)}
.rp-cat:last-child{border-bottom:none}
.rp-cat-head{display:flex;align-items:center;gap:6px;padding:10px 14px;cursor:pointer;user-select:none;transition:background .12s}
.rp-cat-head:hover{background:var(--sur2)}
.rp-cat-chevron{font-size:10px;color:var(--t3);transition:transform .2s;display:inline-block;width:12px;text-align:center}
.rp-cat.open .rp-cat-chevron{transform:rotate(90deg)}
.rp-cat-title{font-size:11px;font-weight:600;color:var(--t1);flex:1}
.rp-cat-count{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace}
.rp-cat-body{display:none;padding:0 14px 12px}
.rp-cat.open .rp-cat-body{display:block}

/* Design rows */
.d-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.d-lbl{font-size:12px;color:var(--t2)}
.d-inp{background:var(--sur2);border:1px solid var(--b2);border-radius:5px;color:var(--t1);padding:4px 8px;font-size:12px;font-family:'DM Sans',sans-serif;outline:none;width:110px}
.d-inp:focus{border-color:var(--acc)}
.seg{display:flex;gap:2px}
.seg-b{padding:3px 8px;border-radius:4px;border:1px solid var(--b2);font-size:11px;color:var(--t3);cursor:pointer;background:transparent;transition:.12s}
.seg-b:hover{color:var(--t2)}
.seg-b.on{background:var(--sur3);color:var(--t1);border-color:var(--b3)}
.swatch{width:22px;height:22px;border-radius:4px;border:1px solid var(--b2);cursor:pointer;flex-shrink:0}

/* Design Image controls */
.di-align-bar{display:flex;justify-content:center;gap:6px;padding:14px 0;border-bottom:1px solid var(--b1)}
.di-align-icon{width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--t2);border-radius:4px;transition:.12s}
.di-align-icon:hover{background:var(--sur3);color:var(--t1)}
.di-align-icon svg{width:20px;height:20px}
.di-section{padding:14px 16px}
.di-toggle-row{display:flex;align-items:center;justify-content:space-between}
.di-label{font-size:14px;color:var(--t1);font-weight:400;font-family:'DM Sans',sans-serif}
.di-divider{height:1px;background:var(--b1);margin:0 16px}
.di-collapse-row{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer}
.di-collapse-row:hover{background:var(--sur2)}
.di-collapse-arrow{width:10px;height:10px;color:var(--t3);flex-shrink:0}
.di-nav-row{padding:14px 16px}
.di-nav-arrow{width:8px;height:14px;color:var(--t3);flex-shrink:0}
.di-sub-label{font-size:14px;color:var(--t1);font-weight:400;font-family:'DM Sans',sans-serif;margin-bottom:10px}
.di-slider-row{display:flex;align-items:center;gap:10px}
.di-range-wrap{flex:1;display:flex;align-items:center}
.di-range{-webkit-appearance:none;width:100%;height:4px;border-radius:2px;background:var(--b1);outline:none;cursor:pointer}
.di-range::-webkit-slider-thumb{-webkit-appearance:none;width:14px;height:14px;border-radius:50%;background:var(--acc);cursor:pointer;border:2px solid #fff;box-shadow:0 1px 3px rgba(0,0,0,.15)}
.di-range-blue::-webkit-slider-thumb{background:var(--acc)}
.di-val-box{display:flex;align-items:center;gap:2px;border:1px solid var(--b1);border-radius:6px;padding:4px 8px;min-width:56px}
.di-val-input{width:32px;border:none;background:transparent;font-size:14px;font-family:'DM Sans',sans-serif;color:var(--t1);text-align:right;outline:none}
.di-val-unit{font-size:13px;color:var(--t3);font-family:'DM Sans',sans-serif}
.di-select{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border:1px solid var(--b1);border-radius:8px;font-size:14px;color:var(--t1);font-family:'DM Sans',sans-serif;cursor:pointer;margin-top:8px}
.di-select:hover{border-color:var(--b2)}
.di-select svg{width:10px;height:10px;color:var(--t3);flex-shrink:0}

/* Toggle */
.tog-row{display:flex;align-items:center;justify-content:space-between;padding:5px 0}
.tog-lbl{font-size:12px;color:var(--t2)}
.tog{width:30px;height:17px;border-radius:9px;background:var(--sur3);cursor:pointer;position:relative;transition:background .2s;flex-shrink:0}
.tog.on{background:var(--acc)}
.tog::after{content:'';position:absolute;top:2px;left:2px;width:13px;height:13px;background:#fff;border-radius:7px;transition:left .2s}
.tog.on::after{left:15px}

/* Anim rows */
.anim-r{display:flex;align-items:center;gap:8px;padding:7px 0;border-bottom:1px solid var(--b1)}
.anim-r:last-child{border-bottom:none}
.anim-add{font-size:11px;color:var(--acc);cursor:pointer;margin-left:auto}

/* ── BINDING CONTROLLER (property row) */
.prop-wrap{margin-bottom:7px}
.prop-key{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;margin-bottom:3px}
.prop-row-wrap{display:flex;align-items:center;gap:6px}
.prop-row{display:flex;align-items:stretch;border:1px solid var(--b2);border-radius:7px;overflow:hidden;transition:border-color .15s;background:var(--sur2);flex:1;min-width:0}
.prop-row:hover{border-color:var(--b3)}
.prop-row.bound{border-color:var(--grn-b);background:var(--grn-d)}
.prop-row.active-bind{border-color:var(--acc);background:var(--acc-d)}

.prop-main{flex:1;min-width:0;padding:5px 10px 6px}
.prop-val{display:flex;align-items:center;gap:5px;min-height:18px}
.prop-static{background:transparent;border:none;outline:none;color:var(--t1);font-size:12px;font-family:'DM Sans',sans-serif;width:100%}
.prop-static::placeholder{color:var(--t3);font-style:italic}
.prop-bound-chip{display:none;align-items:center;gap:4px;background:var(--grn-d);border:1px solid var(--grn-b);border-radius:4px;padding:2px 7px;font-family:'DM Mono',monospace;font-size:10px;color:var(--grn);cursor:pointer;white-space:nowrap;max-width:180px;overflow:hidden;text-overflow:ellipsis}
.prop-bound-detail{flex-direction:column;align-items:flex-start;gap:3px;max-width:none;overflow:visible;background:transparent;border:none;padding:0;flex:1}
.prop-bound-ctx{font-size:10px;color:var(--t3);letter-spacing:.3px;font-family:'DM Sans',sans-serif;cursor:pointer;transition:color .12s}
.prop-bound-ctx:hover{color:var(--acc);text-decoration:underline}
.prop-bound-field{font-size:11px;padding:2px 7px;display:inline-flex;align-items:center;gap:4px;width:fit-content;background:#fce4ec;color:#e84393;border-radius:10px;font-weight:600}
.prop-row.bound .prop-bound-chip{display:flex}
.prop-row.bound .prop-static{display:none}
.chip-x{opacity:.6;margin-left:2px;font-size:11px}
.chip-x:hover{opacity:1}

.bind-btn{width:28px;height:28px;border:1px solid var(--b2);border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--t3);transition:.15s;flex-shrink:0;background:var(--sur2)}
.bind-btn:hover{color:var(--acc);border-color:var(--acc-b);background:var(--acc-d)}
.bind-btn.bound{color:var(--grn);border-color:var(--grn-b);background:var(--grn-d)}
.bind-btn svg{width:12px;height:12px;pointer-events:none}

/* ── FUNCTION PARAMS (sub-properties) */
.fn-params{margin-top:2px;padding:4px 0 0 12px;border-left:2px solid color-mix(in srgb, var(--acc) 30%, var(--b1))}
.fn-params-header{display:flex;align-items:center;gap:4px;margin-bottom:5px}
.fn-params-label{font-size:9px;font-weight:500;color:var(--t3);text-transform:uppercase;letter-spacing:.5px}
.fn-param-wrap{margin-bottom:4px}
.fn-param-wrap:last-child{margin-bottom:0}
.fn-param-key{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;margin-bottom:2px}
.fn-param-row{display:flex;align-items:stretch;border:1px solid var(--b1);border-radius:6px;overflow:hidden;transition:border-color .15s;background:var(--sur)}
.fn-param-row:hover{border-color:var(--b3)}
.fn-param-row.bound{border-color:var(--grn-b);background:var(--grn-d)}
.fn-param-row.active-bind{border-color:var(--acc);background:var(--acc-d)}
.fn-param-row .prop-main{flex:1;min-width:0;padding:3px 8px}
.fn-param-row .prop-bound-chip{display:none}
.fn-param-row.bound .prop-bound-chip{display:flex}
.fn-param-row .bind-btn{width:24px;border-left:1px solid var(--b1)}
.fn-param-row.bound .bind-btn{color:var(--grn);border-color:var(--grn-b)}
.fn-param-input{width:100%;border:none;outline:none;background:transparent;font-size:11px;font-family:'DM Sans',sans-serif;color:var(--t1);padding:2px 0}
.fn-param-input::placeholder{color:var(--t3);font-style:italic;font-size:10px}
.fn-param-input.has-value{color:var(--t1)}

/* ── DROPDOWN */
.dd{position:fixed;z-index:1100;background:var(--sur2);border:1px solid var(--b2);border-radius:10px;width:260px;box-shadow:0 12px 40px #00000070;display:none;overflow:hidden}
.dd.open{display:block;animation:pop .14s ease}
@keyframes pop{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:none}}

.dd-head{padding:9px 12px 8px;border-bottom:1px solid var(--b1);display:flex;align-items:center;justify-content:space-between}
.dd-title{font-family:'DM Mono',monospace;font-size:10px;color:var(--t3)}
.dd-x{cursor:pointer;color:var(--t3);font-size:13px;line-height:1}
.dd-x:hover{color:var(--t1)}

.dd-notice{padding:4px 12px 2px;font-size:10px;color:var(--yel);font-family:'DM Mono',monospace}
.dd-empty{padding:14px 12px;color:var(--t3);font-size:11px;line-height:1.6}

/* Two-column selectors */
.dd-selectors{padding:10px 12px;display:flex;flex-direction:column;gap:10px}
.dd-sel-group{display:flex;flex-direction:column;gap:5px}
.dd-sel-label{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.5px}
.dd-sel-box{background:var(--sur3);border:1px solid var(--b2);border-radius:6px;cursor:pointer;transition:border-color .15s;position:relative}
.dd-sel-box:hover{border-color:var(--b3)}
.dd-sel-box.active{border-color:var(--acc)}
.dd-sel-box.filled{border-color:var(--grn-b)}
.dd-sel-trigger{padding:7px 10px;display:flex;align-items:center;gap:7px;font-size:12px;color:var(--t2)}
.dd-sel-trigger.has-val{color:var(--t1)}
.dd-sel-trigger.has-val.green{color:var(--grn);font-family:'DM Mono',monospace;font-size:11px}
.dd-sel-chevron{margin-left:auto;color:var(--t3);font-size:10px;transition:transform .15s}
.dd-sel-box.open .dd-sel-chevron{transform:rotate(180deg)}
.dd-sel-dropdown{display:none;border-top:1px solid var(--b1);max-height:240px;overflow-y:auto}
.dd-sel-box.open .dd-sel-dropdown{display:block}
.dd-sel-search{display:block;width:calc(100% - 16px);margin:6px 8px 2px;background:var(--sur2);border:1px solid var(--b2);border-radius:5px;padding:4px 8px;font-size:11px;color:var(--t1);font-family:'DM Sans',sans-serif;outline:none}
.dd-sel-search:focus{border-color:var(--acc)}
.dd-src-section{padding:0}
.dd-src-header{display:flex;align-items:center;gap:6px;padding:8px 10px 4px;font-size:9px;color:var(--t3);font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.6px;font-weight:500;position:sticky;top:0;background:var(--sur3);z-index:1}
.dd-src-header svg{width:10px;height:10px;opacity:.5;flex-shrink:0}
.dd-src-header .dd-src-count{margin-left:auto;font-size:8px;min-width:14px;height:14px;display:flex;align-items:center;justify-content:center;border-radius:7px;background:var(--b1);color:var(--t3);font-weight:600}
.dd-src-divider{height:1px;background:var(--b1);margin:2px 0}
.dd-sel-item{padding:7px 10px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .1s;font-size:12px;border-radius:4px;margin:1px 4px}
.dd-sel-item:hover{background:var(--sur2)}
.dd-sel-item.sel{background:var(--acc-d);color:var(--acc)}
.dd-sel-item-name{font-size:12px;font-weight:500;color:var(--t1);line-height:1.3}
.dd-sel-item.sel .dd-sel-item-name{color:var(--acc)}
.dd-sel-item-sub{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;line-height:1.3;margin-top:1px}
.dd-sel-item.sel .dd-sel-item-sub{color:var(--acc);opacity:.6}
.dd-sel-tag{margin-left:auto;font-size:9px;padding:2px 6px;border-radius:4px;background:var(--sur2);color:var(--t3);font-family:'DM Mono',monospace;flex-shrink:0;border:1px solid var(--b1)}
.dd-sel-item.sel .dd-sel-tag{background:var(--acc-d);color:var(--acc);border-color:var(--acc-b)}
.dd-sel-item.dim{opacity:.4}

.dd-confirm{display:none;margin:0 12px 10px;padding:7px;background:var(--acc);border:none;border-radius:6px;color:#fff;font-size:12px;font-weight:500;cursor:pointer;width:calc(100% - 24px);font-family:'DM Sans',sans-serif;transition:background .15s}
.dd-confirm:hover{background:#6a5dee}
.dd-confirm.show{display:block}

/* ── CONTEXT PANEL */
.ctx-group{background:transparent;border:none;border-radius:0;padding:0;margin-bottom:0}
.ctx-group:last-of-type{margin-bottom:6px}
.ctx-link-connector{display:flex;align-items:center;gap:6px;margin:0 20px;padding:2px 0;color:var(--t3);font-size:10px;font-family:'DM Mono',monospace}
.ctx-link-line{flex:1;height:0;border-top:1px dashed var(--grn);opacity:.4}
.ctx-link-icon{display:flex;align-items:center;gap:4px;color:var(--grn);font-size:10px;white-space:nowrap;opacity:.8}
.ctx-link-icon svg{width:12px;height:12px;stroke:var(--grn);fill:none;stroke-width:2}
.ctx-filter-row{display:flex;align-items:center;gap:8px;margin:6px 0 2px;padding:5px 8px;background:var(--b1);border:1px solid var(--b2);border-radius:5px;font-size:10px;color:var(--t2);font-family:'Inter',sans-serif;position:relative}
.ctx-filter-row.off{background:var(--b1);border-color:var(--b2);color:var(--t3)}
.ctx-filter-row.off .ctx-filter-label{opacity:.6}
.ctx-filter-label{flex:1;display:flex;align-items:center;gap:5px}
.ctx-filter-label svg{width:11px;height:11px;stroke:currentColor;fill:none;stroke-width:2;flex-shrink:0}
.ctx-filter-toggle{position:relative;width:30px;height:16px;flex-shrink:0;cursor:pointer}
.ctx-filter-toggle input{opacity:0;width:0;height:0;position:absolute}
.ctx-filter-slider{position:absolute;inset:0;background:var(--b2);border-radius:8px;transition:.2s}
.ctx-filter-slider:before{content:'';position:absolute;height:12px;width:12px;left:2px;bottom:2px;background:#fff;border-radius:50%;transition:.2s}
.ctx-filter-toggle input:checked + .ctx-filter-slider{background:#4caf50}
.ctx-filter-toggle input:checked + .ctx-filter-slider:before{transform:translateX(14px)}
.ctx-filter-confirm{position:absolute;top:calc(100% + 4px);left:0;right:0;background:var(--sur);border:1px solid var(--b2);border-radius:8px;box-shadow:0 4px 16px rgba(0,0,0,.25);padding:10px 12px;z-index:100;font-family:'Inter',sans-serif;display:none}
.ctx-filter-confirm.open{display:block}
.ctx-filter-confirm-msg{font-size:11px;color:var(--t2);line-height:1.5;margin-bottom:8px}
.ctx-filter-confirm-actions{display:flex;gap:6px;justify-content:flex-end}
.ctx-filter-confirm-actions button{border:none;border-radius:5px;padding:4px 10px;font-size:11px;cursor:pointer;font-family:'Inter',sans-serif;transition:.12s}
.ctx-filter-confirm-actions .btn-off{background:var(--acc);color:#fff}
.ctx-filter-confirm-actions .btn-off:hover{background:var(--acc-h)}
.ctx-filter-confirm-actions .btn-keep{background:var(--b1);color:var(--t2)}
.ctx-filter-confirm-actions .btn-keep:hover{background:var(--b2)}
.ctx-link-toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:var(--sur);border:1px solid var(--b2);border-radius:8px;padding:8px 16px;font-size:12px;color:var(--t2);box-shadow:0 4px 16px rgba(0,0,0,.3);z-index:200;opacity:0;transition:opacity .3s;pointer-events:none;font-family:'Inter',sans-serif}
.ctx-link-toast.show{opacity:1}
.ctx-section-label{padding:8px 14px 4px;font-size:9px;font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.5px;color:var(--t3);display:flex;align-items:center;gap:6px}
.ctx-section-label:after{content:'';flex:1;height:1px;background:var(--b1)}
.ctx-parent-note-wrap{margin:8px 14px 0;padding:0}
.ctx-parent-note-label{font-size:10px;color:var(--t3);margin-bottom:2px;padding:0 2px}
.ctx-parent-note-item{display:flex;align-items:center;gap:4px;padding:4px 8px;border-radius:5px;font-size:11px;color:var(--t2);cursor:pointer;transition:.12s}
.ctx-parent-note-item:hover{background:var(--b1);color:var(--acc)}
.ctx-parent-note-arrow{font-size:10px;color:var(--t3);margin-left:auto;opacity:0;transition:.12s}
.ctx-parent-note-item:hover .ctx-parent-note-arrow{opacity:1;color:var(--acc)}
.ctx-tree-cta{display:flex;align-items:center;gap:6px;margin:4px 14px 10px;padding:6px 10px;border-radius:6px;font-size:11px;color:var(--t3);cursor:pointer;transition:.12s}
.ctx-tree-cta:hover{background:var(--b1);color:var(--t1)}
.ctx-tree-cta svg{opacity:.5;transition:.12s}
.ctx-tree-cta:hover svg{opacity:1}

.ctx-card{background:var(--sur2);border:1px solid var(--b2);border-radius:8px;padding:8px 10px;position:relative;margin:6px 14px}
.ctx-card.primary{border-left:3px solid var(--acc);background:color-mix(in srgb, var(--acc) 4%, var(--sur2))}
.ctx-card.unconfigured{border-left:3px solid var(--yel);border-style:dashed;border-left-style:solid;opacity:.85}
.ctx-card-lock{display:flex;align-items:center;gap:4px;margin-top:4px;font-size:10px;color:var(--t3);font-style:italic}
.ctx-card-lock svg{width:10px;height:10px;fill:none;stroke:var(--t3);stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
.ctx-card-name{font-weight:500;font-size:12px;display:flex;align-items:center;gap:4px;flex-wrap:wrap;padding-right:60px}
.ctx-card-src{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;margin-top:2px}
.ctx-card-menu{position:absolute;top:7px;right:10px}
.ctx-card-dots{color:var(--t3);cursor:pointer;font-size:16px;line-height:1;padding:2px 4px;
  border-radius:4px;letter-spacing:1px}
.ctx-card-dots:hover{color:var(--t1);background:var(--b2)}
.ctx-card-dropdown{position:absolute;right:0;top:22px;background:var(--sur3);border:1px solid var(--b2);
  border-radius:8px;padding:4px;min-width:150px;z-index:200;display:none;
  box-shadow:0 8px 24px #0006}
.ctx-card-dropdown.open{display:block}
.ctx-dd-item{padding:7px 10px;border-radius:5px;font-size:11px;cursor:pointer;white-space:nowrap}
.ctx-dd-item:hover{background:var(--b2)}
.ctx-dd-item.danger{color:var(--red)}
.ctx-dd-item.danger:hover{background:#3a0a0a}
.ctx-dd-item.disabled{position:relative}
.ctx-dd-item.disabled:hover .ctx-dd-tooltip{opacity:1;visibility:visible;transform:translateX(-50%) translateY(0)}
.ctx-dd-tooltip{position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%) translateY(4px);
  background:#1a1a2e;border:1px solid #333;border-radius:8px;padding:8px 12px;font-size:11px;
  color:#fff;white-space:normal;width:200px;line-height:1.5;text-align:center;
  opacity:0;visibility:hidden;transition:.15s;pointer-events:none;
  box-shadow:0 6px 20px #000a;z-index:300}
.ctx-dd-sep{height:1px;background:var(--b2);margin:3px 0}
.ctx-rename-input{background:var(--sur2);border:1px solid var(--acc-b);border-radius:5px;
  padding:3px 7px;font-size:12px;color:var(--t1);width:100%;outline:none;font-family:inherit}
.type-badge{font-size:9px;padding:1px 5px;border-radius:3px;font-family:'DM Mono',monospace;font-weight:500}
.tb-obj{background:var(--acc-d);color:var(--acc)}
.tb-list{background:#ff6b6b20;color:var(--red)}

.add-ctx-btn{border:1px dashed var(--b2);border-radius:8px;padding:8px 12px;display:flex;align-items:center;gap:6px;font-size:12px;color:var(--t3);cursor:pointer;transition:.2s;margin-top:2px}
.add-ctx-btn:hover{border-color:var(--acc);color:var(--acc);background:var(--acc-d)}

.ctx-config-row{display:flex;flex-direction:column;gap:3px;margin-bottom:8px}
.ctx-config-row label{font-size:11px;color:var(--t2)}
.ctx-config-row select{background:var(--sur3);border:1px solid var(--b2);border-radius:5px;color:var(--t1);padding:4px 8px;font-size:12px;font-family:'DM Sans',sans-serif;outline:none;cursor:pointer}
.ctx-config-row select:focus{border-color:var(--acc)}

/* Sort/Filter entry buttons */
.sf-entry{display:flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid var(--b2);border-radius:8px;cursor:pointer;transition:.15s;margin-bottom:6px;background:var(--sur2)}
.sf-entry:hover{border-color:var(--b3);background:var(--sur3)}
.sf-entry-icon{width:28px;height:28px;border-radius:6px;background:var(--b1);display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0}
.sf-entry-info{flex:1;min-width:0}
.sf-entry-label{font-size:12px;font-weight:500;color:var(--t1)}
.sf-entry-desc{font-size:10px;color:var(--t3);margin-top:1px}
.sf-entry-arrow{color:var(--t3);font-size:12px}

/* Sort/Filter dialog */
.sf-dialog-overlay{position:fixed;inset:0;background:#00000050;z-index:1300;display:none;align-items:center;justify-content:center}
.sf-dialog-overlay.open{display:flex}
.sf-dialog{background:#fff;border-radius:12px;width:480px;box-shadow:0 20px 60px #00000025;animation:pop .18s ease;overflow:hidden}
.sf-dialog-head{padding:20px 24px 16px;display:flex;align-items:center;justify-content:space-between}
.sf-dialog-title{font-family:'DM Sans',sans-serif;font-weight:700;font-size:18px;color:#1a1a2e}
.sf-dialog-head-actions{display:flex;align-items:center;gap:8px}
.sf-dialog-help{width:28px;height:28px;border-radius:50%;border:1px solid #e0e0e0;display:flex;align-items:center;justify-content:center;font-size:13px;color:#999;cursor:pointer;background:#fff}
.sf-dialog-close{width:28px;height:28px;border-radius:50%;background:#f0f0f0;display:flex;align-items:center;justify-content:center;font-size:14px;color:#666;cursor:pointer;border:none}
.sf-dialog-close:hover{background:#e0e0e0}
.sf-dialog-desc{padding:0 24px 20px;font-size:13px;color:#666;line-height:1.6}
.sf-dialog-body{padding:0 24px 16px}
.sf-row{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.sf-select{flex:1;height:36px;padding:0 12px;border:1px solid #e0e0e0;border-radius:8px;font-size:13px;color:#1a1a2e;background:#f8f8fa;font-family:'DM Sans',sans-serif;appearance:none;cursor:pointer;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' viewBox='0 0 10 6'%3E%3Cpath d='M1 1l4 4 4-4' stroke='%23999' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 10px center}
.sf-select:focus{outline:none;border-color:#4353ff}
.sf-input{flex:1;height:36px;padding:0 12px;border:1px solid #e0e0e0;border-radius:8px;font-size:13px;color:#1a1a2e;background:#f8f8fa;font-family:'DM Sans',sans-serif}
.sf-input:focus{outline:none;border-color:#4353ff}
.sf-sort-btns{display:flex;border:1px solid #e0e0e0;border-radius:8px;overflow:hidden}
.sf-sort-btn{width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:13px;font-weight:700;color:#666;background:#fff;border:none;border-right:1px solid #e0e0e0;font-family:'DM Sans',sans-serif}
.sf-sort-btn:last-child{border-right:none}
.sf-sort-btn.active{background:#eef0ff;color:#4353ff}
.sf-sort-btn:hover{background:#f4f4f8}
.sf-delete-btn{width:36px;height:36px;display:flex;align-items:center;justify-content:center;cursor:pointer;border:1px solid #e0e0e0;border-radius:8px;background:#fff;font-size:15px;color:#666}
.sf-delete-btn:hover{background:#fef0f0;color:#e53935;border-color:#fcc}
.sf-add{padding:10px 0;font-size:13px;color:#4353ff;cursor:pointer;font-weight:500;display:flex;align-items:center;gap:4px}
.sf-add:hover{text-decoration:underline}
.sf-dialog-foot{padding:12px 24px 20px;display:flex;justify-content:flex-end;gap:10px}
.sf-btn-cancel{padding:8px 24px;border-radius:20px;border:1px solid #e0e0e0;background:#fff;font-size:13px;font-weight:500;color:#1a1a2e;cursor:pointer;font-family:'DM Sans',sans-serif}
.sf-btn-cancel:hover{background:#f4f4f8}
.sf-btn-apply{padding:8px 28px;border-radius:20px;border:none;background:#4353ff;font-size:13px;font-weight:600;color:#fff;cursor:pointer;font-family:'DM Sans',sans-serif}
.sf-btn-apply:hover{background:#3342dd}
.sf-field-label{font-size:11px;font-weight:500;color:#999;margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}

/* Change Image modal */
.ci-overlay{position:fixed;inset:0;background:#00000050;z-index:1300;display:none;align-items:center;justify-content:center}
.ci-overlay.open{display:flex}
.ci-dialog{background:#fff;border-radius:12px;width:520px;box-shadow:0 20px 60px #00000025;animation:pop .18s ease;overflow:hidden}
.ci-head{padding:20px 24px 16px;display:flex;align-items:center;justify-content:space-between}
.ci-title{font-family:'DM Sans',sans-serif;font-weight:700;font-size:18px;color:#1a1a2e}
.ci-close{width:28px;height:28px;border-radius:50%;background:#f0f0f0;display:flex;align-items:center;justify-content:center;font-size:14px;color:#666;cursor:pointer;border:none}
.ci-close:hover{background:#e0e0e0}
.ci-tabs{display:flex;gap:0;border-bottom:1px solid #e8e8ee;padding:0 24px}
.ci-tab{padding:10px 16px;font-size:13px;font-weight:500;color:#888;cursor:pointer;border-bottom:2px solid transparent;transition:.15s;font-family:'DM Sans',sans-serif}
.ci-tab:hover{color:#1a1a2e}
.ci-tab.active{color:#1a1a2e;border-bottom-color:#1a1a2e}
.ci-body{padding:20px 24px}
.ci-upload-area{border:2px dashed #d0d0d8;border-radius:10px;padding:40px 20px;display:flex;flex-direction:column;align-items:center;gap:12px;cursor:pointer;transition:.15s}
.ci-upload-area:hover{border-color:#4353ff;background:#f6f7ff}
.ci-upload-icon{width:48px;height:48px;border-radius:50%;background:#f0f0f8;display:flex;align-items:center;justify-content:center;color:#888}
.ci-upload-icon svg{width:24px;height:24px}
.ci-upload-text{font-size:14px;font-weight:500;color:#1a1a2e;font-family:'DM Sans',sans-serif}
.ci-upload-sub{font-size:12px;color:#999;font-family:'DM Sans',sans-serif}
.ci-foot{padding:12px 24px 20px;display:flex;justify-content:flex-end;gap:10px}
.ci-btn{padding:8px 24px;border-radius:20px;font-size:13px;font-weight:500;cursor:pointer;font-family:'DM Sans',sans-serif;border:none;transition:.15s}
.ci-btn-cancel{background:#fff;color:#1a1a2e;border:1px solid #e0e0e0}
.ci-btn-cancel:hover{background:#f4f4f8}

/* Context picker modal */
.modal-overlay{position:fixed;inset:0;background:#00000075;z-index:1200;display:none;align-items:center;justify-content:center}
.modal-overlay.open{display:flex}
.modal-box{background:var(--sur2);border:1px solid var(--b2);border-radius:14px;width:360px;overflow:hidden;box-shadow:0 20px 80px #00000080;animation:pop .18s ease}
.modal-head{padding:14px 16px 12px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid var(--b1)}
.modal-title{font-family:'Syne',sans-serif;font-weight:700;font-size:15px}
.modal-x{cursor:pointer;color:var(--t3);font-size:16px}
.modal-x:hover{color:var(--t1)}
.modal-list{padding:6px 8px;display:flex;flex-direction:column;gap:0;max-height:400px;overflow-y:auto}
.modal-divider{height:1px;min-height:1px;flex-shrink:0;background:var(--b2);margin:8px 10px}
.modal-group-label,.modal-app-label{font-size:11px;font-weight:600;color:var(--t3);padding:14px 10px 6px;letter-spacing:.06em;text-transform:uppercase}
.modal-group-label:first-child,.modal-app-label:first-child{padding-top:8px}
.modal-create-btn{display:flex;align-items:center;gap:8px;padding:9px 10px;border-radius:8px;border:none;cursor:pointer;transition:.15s;color:var(--acc);font-size:13px;font-weight:500;background:transparent}
.modal-create-btn:hover{background:var(--acc-d)}
.modal-item{padding:10px 10px;border-radius:8px;border:none;cursor:pointer;transition:background .12s;display:flex;align-items:center;gap:10px}
.modal-item:hover{background:var(--sur3)}
.modal-item.sel{background:var(--acc-d)}
.modal-item.attached{background:var(--acc-d)}
.modal-item.attached.sel{background:#ff6b6b15}
.modal-check{width:18px;height:18px;border-radius:5px;border:1.5px solid var(--b2);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:11px;margin-left:auto;transition:.12s}
.modal-item.attached .modal-check{background:var(--acc);border-color:var(--acc);color:#fff}
.modal-item.attached.sel .modal-check{background:var(--red);border-color:var(--red);color:#fff}
.modal-item-icon{font-size:18px}
.modal-item-name{font-weight:500;font-size:14px}
.modal-item-sub{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;margin-top:2px}
.modal-foot{padding:10px 12px;border-top:1px solid var(--b1);display:flex;gap:8px}
.modal-btn{flex:1;padding:9px;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;font-family:'DM Sans',sans-serif;border:none;transition:.15s}
.modal-cancel{background:var(--sur3);color:var(--t2)}
.modal-ok{background:var(--acc);color:#fff;opacity:.5;pointer-events:none}
.modal-ok.ready{opacity:1;pointer-events:all}

/* Tree panel */
.tree-panel{position:fixed;right:calc(var(--panel) + 8px);top:52px;width:196px;background:var(--sur2);border:1px solid var(--b2);border-radius:10px;box-shadow:0 8px 40px #00000060;z-index:1050;display:none;overflow:hidden;animation:pop .14s ease}
.tree-panel.open{display:block}
.tp-head{padding:7px 12px;border-bottom:1px solid var(--b1);font-family:'DM Mono',monospace;font-size:10px;color:var(--t3);display:flex;justify-content:space-between;align-items:center}
.tp-x{cursor:pointer}
.tp-x:hover{color:var(--t1)}
.tp-body{padding:8px}
.tp-row{display:flex;gap:0;align-items:flex-start;margin-bottom:1px}
.tp-indent{width:14px;height:18px;border-left:1px solid var(--b2);border-bottom:1px solid var(--b2);border-radius:0 0 0 4px;margin-top:-8px;flex-shrink:0}
.tp-item{flex:1;padding:3px 7px;border-radius:5px;font-size:11px;color:var(--t2);display:flex;align-items:center;gap:5px;cursor:pointer;transition:.12s}
.tp-item:hover{background:var(--sur3)}
.tp-item.ctx{color:var(--grn);opacity:.6}
.tp-item.ctx:hover{opacity:.9}
.tp-dot{width:5px;height:5px;border-radius:50%;background:var(--grn);opacity:.5;flex-shrink:0}

/* Toast */
.toast{position:fixed;bottom:18px;right:18px;background:var(--sur2);border:1px solid var(--b2);border-radius:8px;padding:8px 14px;font-size:12px;z-index:1400;display:flex;align-items:center;gap:6px;opacity:0;transform:translateY(6px);transition:.22s;pointer-events:none;max-width:460px}
.toast.show{opacity:1;transform:none;pointer-events:auto}
.toast.ok{border-color:var(--grn-b);color:var(--grn)}

/* Action Bar */
.action-bar{position:fixed;bottom:24px;left:50%;transform:translateX(-50%);background:var(--sur);border:1px solid var(--b1);border-radius:10px;display:none;align-items:center;height:44px;padding:0 6px;z-index:1000;box-shadow:0 4px 16px rgba(0,0,0,.08)}
.action-bar.open{display:flex}
.action-bar-text{padding:0 16px;font-size:13px;font-weight:500;color:var(--t1);cursor:pointer;height:100%;display:flex;align-items:center;white-space:nowrap;transition:color .15s}
.action-bar-text:hover{color:var(--acc)}
.action-bar-sep{width:1px;height:20px;background:var(--b1);flex-shrink:0}
.action-bar-icon{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;color:var(--t1);transition:background .15s,color .15s;flex-shrink:0}
.action-bar-icon:hover{background:var(--sur2);color:var(--acc)}
.action-bar-icon svg{width:18px;height:18px}
.ab-dropdown{display:flex;align-items:center;gap:4px;padding:0 10px;height:100%;cursor:pointer;white-space:nowrap;font-size:13px;font-weight:500;color:var(--t1);transition:color .15s}
.ab-dropdown:hover{color:var(--acc)}
.ab-dropdown svg{width:10px;height:10px;flex-shrink:0;opacity:.5}
.ab-link{display:flex;align-items:center;gap:5px;padding:0 10px;height:100%;cursor:pointer;font-size:13px;font-weight:500;color:var(--t1);transition:color .15s;white-space:nowrap}
.ab-link:hover{color:var(--acc)}
.ab-link svg{width:16px;height:16px}
.ab-color{width:22px;height:22px;border-radius:50%;border:2px solid var(--b1);cursor:pointer;flex-shrink:0;transition:border-color .15s}
.ab-color:hover{border-color:var(--b3)}

/* Link Panel */
.link-panel{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);width:320px;background:var(--sur);border:1px solid var(--b1);border-radius:14px;box-shadow:0 8px 32px rgba(0,0,0,.12);z-index:1050;display:none;flex-direction:column;font-family:'DM Sans',sans-serif}
.link-panel.open{display:flex}
.link-panel-head{display:flex;align-items:center;justify-content:space-between;padding:18px 20px 14px}
.link-panel-title{font-size:18px;font-weight:600;color:var(--t1)}
.link-panel-head-actions{display:flex;align-items:center;gap:8px}
.link-panel-head-btn{width:28px;height:28px;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;color:var(--t2);transition:background .15s,color .15s;font-size:14px}
.link-panel-head-btn:hover{background:var(--sur2);color:var(--t1)}
.link-panel-body{padding:0 20px 20px;display:flex;flex-direction:column;gap:16px}
.link-panel-tabs{display:flex;gap:0;padding:0}
.link-panel-tab{width:44px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:8px;cursor:pointer;color:var(--t3);transition:background .15s,color .15s}
.link-panel-tab:hover{background:var(--sur2);color:var(--t1)}
.link-panel-tab.active{background:var(--sur2);color:var(--t1)}
.link-panel-tab svg{width:20px;height:20px}
.link-panel-label{font-size:13px;font-weight:600;color:var(--t1)}
.link-panel-select{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:var(--sur2);border-radius:8px;font-size:13px;color:var(--t3);cursor:pointer}
.link-panel-select svg{width:12px;height:12px;color:var(--t3)}
.link-panel-toggle{display:flex;border:1px solid var(--b1);border-radius:8px;overflow:hidden}
.link-panel-toggle-btn{flex:1;padding:10px 0;text-align:center;font-size:13px;font-weight:500;cursor:pointer;color:var(--t2);transition:background .15s,color .15s}
.link-panel-toggle-btn.active{background:var(--sur);color:var(--acc);border:1px solid var(--acc);border-radius:7px;margin:-1px}
.link-panel-toggle-btn:not(.active){background:var(--sur2)}
.link-panel-adv{display:flex;align-items:center;gap:6px;font-size:13px;font-weight:600;color:var(--t1);cursor:pointer;padding:4px 0}
.link-panel-adv:hover{color:var(--acc)}
.link-panel-adv svg{width:12px;height:12px}
.link-panel-foot{display:flex;align-items:center;justify-content:space-between;padding:14px 20px;border-top:1px solid var(--b1)}
.link-panel-remove{font-size:13px;color:var(--t3);cursor:pointer;transition:color .15s}
.link-panel-remove:hover{color:var(--red)}
.link-panel-foot-actions{display:flex;gap:8px}
.link-panel-btn{padding:8px 20px;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;border:1px solid var(--acc);font-family:'DM Sans',sans-serif;transition:opacity .15s}
.link-panel-btn.cancel{background:transparent;color:var(--acc)}
.link-panel-btn.cancel:hover{background:var(--acc-d)}
.link-panel-btn.done{background:var(--sur2);color:var(--t3);border-color:var(--b1);cursor:default}
.link-panel-bound{display:flex;align-items:center;gap:10px;padding:12px;background:var(--grn-d);border:1px solid var(--grn-b);border-radius:10px}
.link-panel-bound-info{flex:1;display:flex;flex-direction:column;gap:6px}
.link-panel-bound-source{font-size:12px;color:var(--t2);display:flex;align-items:center;gap:5px}
.link-panel-bound-chip{display:inline-flex;align-items:center;gap:5px;padding:3px 10px;background:var(--grn-d);border-radius:5px;font-size:12px;font-weight:500;font-family:'DM Mono',monospace;color:var(--grn)}
.link-panel-bound-chip-x{cursor:pointer;opacity:.6;font-size:10px;transition:opacity .15s}
.link-panel-bound-chip-x:hover{opacity:1}
.link-panel-bound-icon{color:var(--grn);flex-shrink:0}
.link-panel-bound-icon svg{width:20px;height:20px}

/* Edit Text Connect Panel */
.et-panel{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);width:340px;background:var(--sur);border:1px solid var(--b1);border-radius:14px;box-shadow:0 8px 32px rgba(0,0,0,.12);z-index:1050;display:none;flex-direction:column;font-family:'DM Sans',sans-serif}
.et-panel.open{display:flex}
.et-panel-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px 10px}
.et-panel-title{font-size:14px;font-weight:600;color:var(--t1)}
.et-panel-close{width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:6px;cursor:pointer;color:var(--t2);transition:background .15s,color .15s;font-size:12px}
.et-panel-close:hover{background:var(--sur2);color:var(--t1)}
.et-panel-body{padding:0 16px 16px;display:flex;flex-direction:column;gap:12px}
.et-panel-row{display:flex;flex-direction:column;gap:6px}
.et-panel-label{font-size:12px;font-weight:600;color:var(--t1)}
.et-panel-input-wrap{display:flex;align-items:center;gap:6px}
.et-panel-input{flex:1;min-width:0;padding:8px 12px;background:var(--sur2);border:1px solid var(--b1);border-radius:8px;font-size:12px;color:var(--t1);font-family:'DM Sans',sans-serif;outline:none;transition:border-color .15s}
.et-panel-input:focus{border-color:var(--acc)}
.et-panel-input::placeholder{color:var(--t3);font-style:italic}
.et-panel-input.bound{display:none}
.et-panel-input-wrap.bound .et-panel-input{display:none}
.et-panel-bound-tag{display:none;flex:1;min-width:0;padding:6px 10px;background:var(--grn-d);border:1px solid var(--grn-b);border-radius:8px;align-items:center;gap:6px;cursor:default}
.et-panel-input-wrap.bound .et-panel-bound-tag{display:flex}
.et-panel-bound-tag-ctx{font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;white-space:nowrap}
.et-panel-bound-tag-field{font-size:11px;padding:2px 7px;background:#fce4ec;color:#e84393;border-radius:10px;font-weight:600;font-family:'DM Mono',monospace;display:inline-flex;align-items:center;gap:4px;white-space:nowrap}
.et-panel-bound-tag-x{font-size:10px;cursor:pointer;opacity:.7;transition:opacity .12s}
.et-panel-bound-tag-x:hover{opacity:1}
.et-panel-bind{width:32px;height:32px;border:1px solid var(--b2);border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--t3);transition:.15s;flex-shrink:0;background:var(--sur2)}
.et-panel-bind:hover{color:var(--acc);border-color:var(--acc-b);background:var(--acc-d)}
.et-panel-bind.bound{color:var(--grn);border-color:var(--grn-b);background:var(--grn-d)}
.et-panel-bind svg{width:14px;height:14px;pointer-events:none}
.et-panel-params-link{display:flex;align-items:center;gap:5px;padding:5px 10px;border-radius:6px;font-size:10px;font-family:'DM Mono',monospace;color:var(--acc);cursor:pointer;transition:background .12s;margin-top:-4px}
.et-panel-params-link:hover{background:var(--acc-d)}
.et-panel-params-link .et-params-count{font-weight:700}
.et-panel-params-link .et-params-arrow{margin-left:auto;font-size:9px;opacity:.6}

/* Inspector Toggle (floating right) */
.inspector-toggle{position:fixed;right:12px;top:50%;transform:translateY(-50%);width:36px;height:36px;background:var(--sur);border:1px solid var(--b1);border-radius:10px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1000;box-shadow:0 2px 10px rgba(0,0,0,.06);transition:box-shadow .15s,border-color .15s,right .25s;color:var(--t1)}
.inspector-toggle:hover{border-color:var(--b2);box-shadow:0 4px 14px rgba(0,0,0,.1)}
.inspector-toggle svg{width:18px;height:18px}

.ctx-tree-btn{padding:5px 10px;border-radius:6px;border:1px solid var(--b2);background:transparent;color:var(--t2);font-size:11px;cursor:pointer;font-family:'DM Sans',sans-serif;transition:.15s;display:flex;align-items:center;gap:5px}
.ctx-tree-btn:hover{border-color:var(--acc);color:var(--acc)}

/* Context settings sub-panel (drill-down) */
.highlight-bind{outline:2px solid #e84393;outline-offset:2px;box-shadow:0 0 14px #e8439366;z-index:50;position:relative;transition:outline .15s,box-shadow .15s}

/* Combined fields toggle + usage */
.ctx-fields-toggle{display:flex;align-items:center;gap:5px;margin-top:5px;padding:4px 0 0;border-top:1px solid var(--b1);cursor:pointer;font-size:10px;font-family:'DM Mono',monospace;transition:.15s;color:var(--t3)}
.ctx-fields-toggle:hover{color:var(--t1)}
.ctx-expand-chevron{font-size:8px;transition:transform .15s;display:inline-block}
.ctx-fields-toggle.open .ctx-expand-chevron{transform:rotate(90deg)}
.ctx-fields-count{flex:1}
.ctx-fields-count .count-num{font-weight:600}
.ctx-fields-count.active{color:var(--grn)}
.ctx-fields-count.idle{color:var(--t3)}
.ctx-fields-list{display:none;margin-top:6px;border-top:1px solid var(--b1);padding-top:6px}
.ctx-fields-list.open{display:block}
.ctx-field-row{display:flex;align-items:center;gap:8px;padding:6px 4px;border-radius:5px;transition:.1s}
.ctx-field-row:hover{background:var(--b1)}
.ctx-field-icon{width:20px;height:20px;border-radius:4px;background:var(--b1);display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--t2);flex-shrink:0;font-family:'DM Sans',sans-serif}
.ctx-field-name{flex:1;font-size:12px;color:var(--t1);min-width:0;border-radius:4px;padding:1px 3px;margin:-1px -3px;transition:.12s}
.ctx-field-name[onclick]:hover{background:var(--acc-d);color:var(--acc)}
.ctx-field-badge{font-size:9px;font-weight:600;padding:2px 8px;border-radius:10px;flex-shrink:0}
.ctx-field-badge.in-use{background:#fce4ec;color:#e84393}
.ctx-field-badge.unused{color:var(--t3);font-weight:400;font-style:italic}
.ctx-field-add{font-size:10px;color:var(--acc);cursor:pointer;padding:2px 4px 4px;margin-top:-2px}
.ctx-field-add:hover{text-decoration:underline}
.ctx-field-remove{font-size:13px;color:var(--t3);cursor:pointer;padding:0 2px;margin-left:2px;line-height:1;border-radius:3px;opacity:0;transition:.15s}
.ctx-field-row:hover .ctx-field-remove{opacity:1}
.ctx-field-remove:hover{color:#e84393;background:rgba(232,67,147,.1)}
.ctx-fields-footer{margin-top:6px;padding-top:6px;border-top:1px solid var(--b1)}
.ctx-fields-section{margin-top:6px;padding-top:6px;border-top:1px solid var(--b1)}
.ctx-fields-section-head{display:flex;align-items:center;justify-content:space-between;padding:4px 4px;font-size:10px;color:var(--t3);cursor:pointer;border-radius:5px;font-family:'DM Mono',monospace;text-transform:uppercase;letter-spacing:.3px}
.ctx-fields-section-head:hover{background:var(--b1);color:var(--t2)}
.ctx-fields-section-head .ctx-expand-chevron{font-size:9px;display:inline-block;transition:transform .2s;transform:rotate(0deg)}
.ctx-fields-section-head .ctx-expand-chevron.open{transform:rotate(90deg)}
.ctx-fields-section-body{display:none;padding-top:2px}
.ctx-fields-section-body.open{display:block}
.ctx-action-row{display:flex;align-items:center;gap:8px;padding:5px 4px;border-radius:5px;transition:.1s;cursor:pointer}
.ctx-action-row:hover{background:var(--b1)}
.ctx-action-icon{width:20px;height:20px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0}
.ctx-action-icon.item-action{background:var(--acc-d);color:var(--acc)}
.ctx-action-icon.ctx-action{background:rgba(76,175,80,.1);color:var(--grn)}
.ctx-action-label{flex:1;font-size:11px;color:var(--t2)}
.ctx-action-scope{font-size:8px;color:var(--t3);font-family:'DM Mono',monospace;padding:1px 5px;border-radius:3px;background:var(--b1);flex-shrink:0}
.ctx-meta-row{display:flex;align-items:center;gap:8px;padding:5px 4px;border-radius:5px;transition:.1s}
.ctx-meta-row:hover{background:var(--b1)}
.ctx-meta-icon{width:20px;height:20px;border-radius:4px;background:rgba(255,193,7,.1);display:flex;align-items:center;justify-content:center;font-size:10px;color:#f59e0b;flex-shrink:0;font-family:'DM Mono',monospace;font-weight:700}
.ctx-meta-label{flex:1;font-size:11px;color:var(--t2)}
.ctx-meta-type{font-size:9px;color:var(--t3);font-family:'DM Mono',monospace}
.ctx-fields-system{display:flex;align-items:center;justify-content:space-between;padding:5px 4px;font-size:11px;color:var(--t2);cursor:pointer;border-radius:5px}
.ctx-fields-system:hover{background:var(--b1)}
.ctx-fields-system .ctx-expand-chevron{font-size:10px;display:inline-block;transition:transform .2s;transform:rotate(0deg)}
.ctx-fields-system .ctx-expand-chevron.open{transform:rotate(90deg)}
.ctx-fields-open{display:flex;align-items:center;gap:5px;padding:6px 4px;font-size:11px;color:var(--acc);cursor:pointer}
.ctx-fields-open:hover{text-decoration:underline}

.ctx-gear{width:24px;height:24px;border-radius:5px;border:1px solid var(--b2);display:flex;align-items:center;justify-content:center;
  cursor:pointer;color:var(--t3);background:transparent;transition:.15s;flex-shrink:0;font-size:12px;line-height:1}
.ctx-gear:hover{color:var(--acc);border-color:var(--acc-b);background:var(--acc-d)}

.ctx-settings-panel{animation:ctxSlideIn .18s ease}
@keyframes ctxSlideIn{from{opacity:0;transform:translateX(8px)}to{opacity:1;transform:none}}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}
@keyframes spin{to{transform:rotate(360deg)}}

.ctx-back{display:flex;align-items:center;gap:6px;padding:10px 14px 8px;cursor:pointer;color:var(--t2);font-size:12px;
  border-bottom:1px solid var(--b1);transition:.12s;user-select:none}
.ctx-back:hover{color:var(--t1);background:var(--sur2)}
.ctx-back-arrow{font-size:14px;line-height:1}

.ctx-settings-head{padding:12px 14px 10px;border-bottom:1px solid var(--b1);display:flex;align-items:center;gap:8px}
.ctx-settings-icon{font-size:18px}
.ctx-settings-title{font-family:'Syne',sans-serif;font-weight:700;font-size:14px;flex:1;min-width:0}
.ctx-settings-badge{font-size:9px;padding:1px 5px;border-radius:3px;font-family:'DM Mono',monospace;font-weight:500}

.ctx-settings-section{padding:12px 14px;border-bottom:1px solid var(--b1)}
.ctx-settings-section:last-child{border-bottom:none}
.ctx-settings-section-lbl{font-size:10px;letter-spacing:.7px;text-transform:uppercase;color:var(--t3);font-family:'DM Mono',monospace;margin-bottom:10px}

.ctx-cfg-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.ctx-cfg-row:last-child{margin-bottom:0}
.ctx-cfg-lbl{font-size:12px;color:var(--t2)}
.ctx-cfg-select{background:var(--sur3);border:1px solid var(--b2);border-radius:5px;color:var(--t1);padding:5px 8px;
  font-size:12px;font-family:'DM Sans',sans-serif;outline:none;cursor:pointer;min-width:120px;max-width:150px}
.ctx-cfg-select:focus{border-color:var(--acc)}
.ctx-cfg-toggle{display:flex;gap:2px}
.ctx-cfg-toggle .seg-b{padding:4px 10px}

/* Add Field modal */
.af-overlay{position:fixed;inset:0;background:#00000060;z-index:800;display:none;align-items:center;justify-content:center}
.af-overlay.open{display:flex}
.af-box{background:#fff;border:1px solid #e0e0e0;border-radius:14px;width:380px;box-shadow:0 24px 80px #00000018;animation:pop .18s ease;overflow:hidden}
.af-head{padding:16px 20px 12px;display:flex;align-items:flex-start;justify-content:space-between}
.af-title{font-family:'Syne',sans-serif;font-weight:700;font-size:16px;color:#1a1a1a}
.af-head-actions{display:flex;align-items:center;gap:8px}
.af-help{width:22px;height:22px;border-radius:50%;border:1px solid #d0d0d0;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:11px;color:#888}
.af-help:hover{border-color:#999;color:#333}
.af-close{width:22px;height:22px;border-radius:50%;border:1px solid #d0d0d0;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:13px;color:#888;background:none}
.af-close:hover{border-color:#999;color:#333}
.af-subtitle{padding:0 20px 16px;font-size:12px;color:#666;line-height:1.5}
.af-subtitle b{color:#1a1a1a;font-weight:600}
.af-body{padding:0 20px 20px;display:flex;flex-direction:column;gap:16px}
.af-label{font-size:11px;color:#555;font-weight:500;margin-bottom:5px}
.af-select-wrap{position:relative}
.af-select{width:100%;padding:9px 12px;border-radius:8px;border:1px solid #d0d0d0;background:#fff;color:#1a1a1a;font-size:13px;font-family:'DM Sans',sans-serif;cursor:pointer;display:flex;align-items:center;gap:8px;transition:border-color .15s;box-sizing:border-box}
.af-select:hover{border-color:#aaa}
.af-select.open{border-color:#3b5bdb;border-radius:8px 8px 0 0}
.af-select-icon{font-size:14px;flex-shrink:0}
.af-select-chevron{margin-left:auto;font-size:10px;color:#999;transition:transform .15s}
.af-select.open .af-select-chevron{transform:rotate(180deg)}
.af-dropdown{display:none;position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #3b5bdb;border-top:1px solid #eee;border-radius:0 0 8px 8px;z-index:10;overflow:hidden;box-sizing:border-box}
.af-select.open+.af-dropdown{display:block}
.af-dropdown-item{padding:8px 12px;cursor:pointer;display:flex;align-items:center;gap:8px;font-size:13px;color:#1a1a1a;transition:background .1s}
.af-dropdown-item:hover{background:#f5f5f5}
.af-dropdown-item.sel{background:#eef1fb;color:#3b5bdb}
.af-dropdown-icon{font-size:14px;width:20px;text-align:center;flex-shrink:0}
.af-input-wrap{display:flex;flex-direction:column}
.af-input-label{font-size:11px;color:#555;font-weight:500;margin-bottom:5px;display:flex;align-items:center;gap:3px}
.af-input-label .af-required{color:#e03131;font-weight:700}
.af-input{width:100%;padding:9px 12px;border-radius:8px;border:1px solid #d0d0d0;background:#fff;color:#1a1a1a;font-size:13px;font-family:'DM Sans',sans-serif;outline:none;transition:border-color .15s;box-sizing:border-box}
.af-input:focus{border-color:#3b5bdb}
.af-input::placeholder{color:#aaa}
.af-checkbox-row{display:flex;align-items:flex-start;gap:8px;padding:2px 0}
.af-checkbox{width:18px;height:18px;border-radius:4px;border:2px solid #3b5bdb;background:#3b5bdb;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0;margin-top:1px;transition:.15s}
.af-checkbox.off{background:transparent;border-color:#ccc}
.af-checkbox-check{color:#fff;font-size:11px;font-weight:700}
.af-checkbox.off .af-checkbox-check{display:none}
.af-checkbox-text{font-size:12px;color:#555;line-height:1.5}
.af-checkbox-text b{color:#1a1a1a;font-weight:600}
.af-foot{padding:12px 20px 16px;display:flex;justify-content:flex-end;gap:8px}
.af-btn{padding:9px 22px;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;font-family:'DM Sans',sans-serif;border:none;transition:.15s}
.af-btn-cancel{background:transparent;color:#555;border:1px solid #d0d0d0}
.af-btn-cancel:hover{background:#f5f5f5}
.af-btn-add{background:#3b5bdb;color:#fff}
.af-btn-add:hover{filter:brightness(1.1)}
.af-btn-add:disabled{opacity:.5;cursor:not-allowed;filter:none}

/* Empty field warning on canvas elements */
.c-el.empty-field{opacity:.7;position:relative}
.c-el.empty-field .el-bind-tag{border-color:#e67700;color:#e67700;display:flex}
.c-el.empty-field .el-type-tag{display:inline-block}
.empty-field-tooltip{display:none;position:absolute;bottom:calc(100% + 8px);left:50%;transform:translateX(-50%);background:#1a1a1a;color:#ddd;border-radius:10px;padding:14px 16px;width:250px;font-size:12px;line-height:1.6;z-index:100;pointer-events:none;box-shadow:0 8px 30px #00000060}
.empty-field-tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:#1a1a1a}
.empty-field-tooltip b{color:#fff;font-weight:600}
.empty-field-tooltip u{text-decoration:underline;text-underline-offset:2px}
.c-el.empty-field:hover .empty-field-tooltip{display:block}

/* + Add field link in context card */
.ctx-add-field-btn{display:flex;align-items:center;gap:4px;padding:5px 0 2px;font-size:10px;color:var(--acc);cursor:pointer;font-family:'DM Mono',monospace;transition:.15s;opacity:.7}
.ctx-add-field-btn:hover{opacity:1}
.ctx-add-field-btn svg{width:10px;height:10px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round}

/* + Add field link in dd field dropdown */
.dd-add-field-btn{display:none;padding:8px 12px;align-items:center;gap:6px;cursor:pointer;font-size:11px;color:var(--acc);font-weight:500;border-top:1px solid var(--b1);transition:background .1s;background:var(--sur3)}
.dd-sel-box.open .dd-add-field-btn{display:flex}
.dd-add-field-btn:hover{background:var(--acc-d)}
.dd-add-field-btn svg{width:11px;height:11px;stroke:currentColor;fill:none;stroke-width:2;stroke-linecap:round}

/* Code panel — light mode (One Light) */
.code-panel-overlay{position:fixed;inset:0;top:44px;z-index:500;display:none;background:var(--sur)}
.code-panel-overlay.open{display:flex}
.code-panel{flex:1;display:flex;flex-direction:column;background:#fafafa;color:#383a42;font-family:'DM Mono',monospace;font-size:12px;overflow:hidden}
.code-panel-header{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;border-bottom:1px solid #e0e0e0;background:#f0f0f2}
.code-panel-tabs{display:flex;gap:0}
.code-panel-tab{padding:7px 14px;font-size:11px;color:#999;cursor:pointer;border-bottom:2px solid transparent;transition:.12s}
.code-panel-tab:hover{color:#383a42}
.code-panel-tab.active{color:#4078f2;border-bottom-color:#4078f2}
.code-panel-close{padding:4px 8px;cursor:pointer;color:#999;font-size:14px;border-radius:4px;transition:.12s}
.code-panel-close:hover{color:#383a42;background:#e0e0e0}
.code-panel-body{flex:1;overflow:auto;padding:0}
.code-panel-gutter{display:flex}
.code-line-nums{padding:12px 0;text-align:right;color:#b0b0b0;font-size:11px;line-height:1.7;user-select:none;padding-right:12px;padding-left:16px;border-right:1px solid #e0e0e0;flex-shrink:0}
.code-line-nums div{padding:0 4px}
.code-lines{flex:1;padding:12px 16px;font-size:11px;line-height:1.7;overflow-x:auto;white-space:pre}
.code-lines .hl-kw{color:#a626a4}
.code-lines .hl-fn{color:#4078f2}
.code-lines .hl-str{color:#50a14f}
.code-lines .hl-num{color:#c18401}
.code-lines .hl-cm{color:#a0a1a7;font-style:italic}
.code-lines .hl-ty{color:#c18401}
.code-lines .hl-op{color:#0184bc}
.code-lines .hl-br{color:#383a42}
.code-lines .hl-prop{color:#e45649}
.code-highlight-line{background:#f0f0f0;display:block;margin:0 -16px;padding:0 16px;border-left:3px solid #c18401}

/* Code panel — dark mode (Catppuccin Mocha) */
html.dark .code-panel{background:#1e1e2e;color:#cdd6f4}
html.dark .code-panel-header{border-bottom-color:#313244;background:#181825}
html.dark .code-panel-tab{color:#6c7086}
html.dark .code-panel-tab:hover{color:#cdd6f4}
html.dark .code-panel-tab.active{color:#89b4fa;border-bottom-color:#89b4fa}
html.dark .code-panel-close{color:#6c7086}
html.dark .code-panel-close:hover{color:#cdd6f4;background:#313244}
html.dark .code-line-nums{color:#45475a;border-right-color:#313244}
html.dark .code-lines .hl-kw{color:#cba6f7}
html.dark .code-lines .hl-fn{color:#89b4fa}
html.dark .code-lines .hl-str{color:#a6e3a1}
html.dark .code-lines .hl-num{color:#fab387}
html.dark .code-lines .hl-cm{color:#6c7086}
html.dark .code-lines .hl-ty{color:#f9e2af}
html.dark .code-lines .hl-op{color:#89dceb}
html.dark .code-lines .hl-br{color:#cdd6f4}
html.dark .code-lines .hl-prop{color:#cdd6f4}
html.dark .code-highlight-line{background:#313244;border-left-color:#f9e2af}
</style>
</head>
<body>

<div class="topbar">
  <div class="tb-left">
    <div class="tb-icon">
      <svg viewBox="0 0 20 20" fill="none"><rect x="1" y="1" width="18" height="18" rx="4" fill="var(--t1)"/><circle cx="10" cy="10" r="4.5" fill="var(--sur)"/></svg>
    </div>
    <div class="sep"></div>
    <div class="page-sel-wrap">
      <div class="page-sel" onclick="togglePagesPanel(event)"><span class="page-sel-name">📄 Demo 26.2</span> <span class="page-sel-chevron">▾</span></div>
      <div class="pages-panel" id="pages-panel">
        <div class="pp-item" onclick="selectPage(this,'Homepage')">📄 Home</div>
        <div class="pp-item" onclick="selectPage(this,'Items (List)')">📄 Items (List)</div>
        <div class="pp-item" onclick="selectPage(this,'Repeater Usecases')">📄 Repeater Usecases</div>
        <div class="pp-item" onclick="selectPage(this,'Multi-State Box')">◫ Multi-State Box</div>
        <div class="pp-item" onclick="selectPage(this,'Demo')">📄 Demo</div>
        <div class="pp-item active" onclick="selectPage(this,'Demo 26.2')">📄 Demo 26.2</div>
        <div class="pp-group">Item Pages (Dynamic)</div>
        <div class="pp-sub" onclick="selectPage(this,'Product Item')">🛒 Product Item</div>
        <div class="pp-manage">Manage Pages</div>
      </div>
    </div>
    <div class="sep"></div>
    <div class="tb-tabs">
      <div class="tb-tab active" onclick="closeCodePanel()">Design</div>
      <div class="tb-tab" onclick="openCodeTab()">Code</div>
    </div>
    <div class="sep"></div>
    <button class="tb-ai-btn" id="ai-toggle" onclick="toggleAiPanel()" title="Toggle AI panel">✦ AI</button>
  </div>
  <div class="tb-center">
    <div class="tb-tool">↩</div>
    <div class="tb-tool">↪</div>
    <div class="sep"></div>
    <div class="tb-tool">▤</div>
    <div class="tb-tool">◫</div>
    <div class="sep"></div>
    <div class="tb-zoom">70%</div>
    <div class="sep"></div>
    <div class="tb-url" style="margin-left:6px">
      <span>https://editorx.wixstudio.com/my-site-24</span>
      <span class="tb-url-link">Connect Domain</span>
    </div>
  </div>
  <div class="tb-right">
    <button class="btn-ghost" id="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">☀️</button>
    <button class="btn-preview" title="Preview">
      <svg viewBox="0 0 20 20"><path d="M1 10s3.5-7 9-7 9 7 9 7-3.5 7-9 7-9-7-9-7z"/><circle cx="10" cy="10" r="3"/></svg>
    </button>
    <button class="btn-upgrade">Upgrade</button>
    <button class="btn-pub">Publish</button>
  </div>
</div>

<!-- CODE PANEL -->
<div class="code-panel-overlay" id="code-panel-overlay">
  <div class="code-panel">
    <div class="code-panel-header">
      <div class="code-panel-tabs">
        <div class="code-panel-tab active">Page Code</div>
        <div class="code-panel-tab">Site Code</div>
        <div class="code-panel-tab">Packages</div>
      </div>
      <div class="code-panel-close" onclick="closeCodePanel()">✕</div>
    </div>
    <div class="code-panel-body">
      <div class="code-panel-gutter">
        <div class="code-line-nums" id="code-line-nums"></div>
        <div class="code-lines" id="code-lines"></div>
      </div>
    </div>
  </div>
</div>

<div class="editor">
  <!-- LEFT PANEL - AI Chat -->
  <div class="lp collapsed">
    <div class="lp-messages">
      <div class="lp-msg-user">Show only 3 classes at a time and add navigation buttons, so visitors can navigate between all the classes</div>
      <div class="lp-msg-ai">
        <div class="lp-progress">
          <div class="lp-progress-head">Show progress ▾</div>
          <div class="lp-progress-body">
            To show only 3 classes at a time, I added pagination to the section and set it to show 3 items per page.<br><br>
            Site visitors will be able to move between pages using the navigation buttons. You can configure it in the <a>Settings panel</a>, or let me know if there's anything you'd like to change.
          </div>
        </div>
        <div class="lp-actions">
          <div class="lp-action">👍</div>
          <div class="lp-action">👎</div>
          <div class="lp-action">📋</div>
          <div class="lp-action">↻</div>
        </div>
      </div>
    </div>
    <div class="lp-input-wrap">
      <input class="lp-input" placeholder="Ask me anything">
    </div>
    <div class="lp-bottom">
      <div class="lp-bottom-icons">
        <div class="lp-input-btn">＋</div>
        <div class="lp-input-btn">⚙</div>
        <div class="lp-input-btn">📎</div>
      </div>
      <div class="lp-bottom-icons">
        <div class="lp-input-btn">🖼</div>
      </div>
    </div>
  </div>

  <!-- EDITOR TOOLBAR -->
  <div class="editor-toolbar">
    <button class="et-btn" id="add-el-toggle" title="Add Elements" onclick="toggleAddElementsPanel()">
      <svg viewBox="0 0 20 20"><line x1="10" y1="4" x2="10" y2="16"/><line x1="4" y1="10" x2="16" y2="10"/></svg>
    </button>
    <button class="et-btn" title="Edit">
      <svg viewBox="0 0 20 20"><path d="M12.5 3.5l4 4L7 17H3v-4z"/><line x1="11" y1="5" x2="15" y2="9"/></svg>
    </button>
    <button class="et-btn" title="Layers">
      <svg viewBox="0 0 20 20"><path d="M10 2l8 4-8 4-8-4z"/><path d="M2 10l8 4 8-4"/><path d="M2 14l8 4 8-4"/></svg>
    </button>
    <button class="et-btn" title="Sections">
      <svg viewBox="0 0 20 20"><rect x="3" y="3" width="14" height="14" rx="2"/></svg>
    </button>
    <button class="et-btn" title="Members">
      <svg viewBox="0 0 20 20"><circle cx="8" cy="6" r="3"/><path d="M2 17c0-3.3 2.7-6 6-6s6 2.7 6 6"/><circle cx="14" cy="5" r="2"/><path d="M14 10c2.2 0 4 1.8 4 4v3"/></svg>
    </button>
    <div class="et-spacer"></div>
    <button class="et-btn" title="Text">
      <svg viewBox="0 0 20 20"><path d="M5 4h10M10 4v12M7 16h6"/></svg>
    </button>
    <button class="et-btn" title="Media">
      <svg viewBox="0 0 20 20"><rect x="3" y="3" width="14" height="14" rx="2"/><circle cx="7.5" cy="7.5" r="1.5"/><path d="M3 13l4-4 3 3 2-2 5 5"/></svg>
    </button>
    <button class="et-btn" title="Widgets">
      <svg viewBox="0 0 20 20"><circle cx="8" cy="6" r="3"/><path d="M2 17c0-3.3 2.7-6 6-6"/><circle cx="14" cy="6" r="3"/><path d="M14 10c3.3 0 6 2.7 6 6"/></svg>
    </button>
    <button class="et-btn" title="Apps">
      <svg viewBox="0 0 20 20"><rect x="3" y="3" width="6" height="6" rx="1"/><rect x="11" y="3" width="6" height="6" rx="1"/><rect x="3" y="11" width="6" height="6" rx="1"/><rect x="11" y="11" width="6" height="6" rx="1"/></svg>
    </button>
    <div class="et-spacer"></div>
    <button class="et-btn" title="Layout">
      <svg viewBox="0 0 20 20"><rect x="3" y="3" width="14" height="14" rx="2"/><line x1="3" y1="8" x2="17" y2="8"/><line x1="8" y1="8" x2="8" y2="17"/></svg>
    </button>
    <div class="et-bottom">
      <button class="et-btn" title="Comments">
        <svg viewBox="0 0 20 20"><path d="M3 3h14v10H8l-4 4v-4H3z" rx="2"/></svg>
      </button>
      <button class="et-btn" id="product-mode-btn" title="Product Mode" onclick="toggleProductMode()">
        <svg viewBox="0 0 20 20"><path d="M4 4h12v2H4z"/><path d="M4 8h8v1.5H4z"/><path d="M4 11.5h10v1.5H4z"/><path d="M4 15h6v1.5H4z"/><rect x="14" y="10" width="4" height="6" rx="1" fill="currentColor" opacity=".3"/><path d="M15 11.5h2M15 13h2"/></svg>
      </button>
      <button class="et-btn" title="Help">
        <svg viewBox="0 0 20 20"><circle cx="10" cy="10" r="7"/><path d="M8 7.5a2.5 2.5 0 0 1 4 2c0 1.5-2 2-2 3"/><circle cx="10" cy="14.5" r=".5" fill="currentColor" stroke="none"/></svg>
      </button>
    </div>
  </div>

  <!-- ADD ELEMENTS PANEL -->
  <div class="add-el-panel" id="add-el-panel">
    <div class="add-el-header">
      <span class="add-el-title">Add Elements</span>
      <button class="add-el-close" onclick="toggleAddElementsPanel()" title="Close">×</button>
    </div>
    <input class="add-el-search" type="text" placeholder="Search components…" oninput="filterAddElements(this.value)">
    <div class="add-el-group">Components</div>
    <div class="add-el-item" draggable="true" data-component="repeater" onclick="addComponentToCanvas('repeater')" ondragstart="onDragStartComponent(event,'repeater')">
      <div class="add-el-item-icon">↻</div>
      <div class="add-el-item-info">
        <div class="add-el-item-name">Repeater</div>
        <div class="add-el-item-desc">Repeats content for each item in a list</div>
      </div>
    </div>
    <div class="add-el-item" draggable="true" data-component="multistatebox" onclick="addComponentToCanvas('multistatebox')" ondragstart="onDragStartComponent(event,'multistatebox')">
      <div class="add-el-item-icon">◫</div>
      <div class="add-el-item-info">
        <div class="add-el-item-name">Multi-State Box</div>
        <div class="add-el-item-desc">Shows different views based on a state field</div>
      </div>
    </div>
  </div>

  <!-- CANVAS -->
  <div class="canvas" id="canvas" onclick="canvasClick(event)">
    <div class="canvas-grid"></div>
    <div class="canvas-inner hidden-page">

      <!-- Section: Hero -->
      <div class="c-section has-ctx" id="sec-hero" onclick="selEl(event,'sec-hero')">
        <div class="ctx-pill" id="pill-sec-hero"></div>
        <div class="s-body">
          <div class="c-row" style="align-items:stretch">
            <div class="c-el c-el-img" id="el-img" onclick="selEl(event,'el-img')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
              <div class="bound-dot"></div>
              <img id="cimg-el-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='180' viewBox='0 0 300 180'%3E%3Cdefs%3E%3ClinearGradient id='sky' x1='0' y1='0' x2='0' y2='1'%3E%3Cstop offset='0%25' stop-color='%2387CEEB'/%3E%3Cstop offset='100%25' stop-color='%23E0F0FF'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23sky)' width='300' height='180'/%3E%3Ccircle cx='240' cy='40' r='30' fill='%23FFD700' opacity='.8'/%3E%3Crect y='130' width='300' height='50' fill='%23228B22' rx='4'/%3E%3Crect x='60' y='80' width='40' height='50' fill='%23CD853F' rx='2'/%3E%3Crect x='65' y='85' width='12' height='12' fill='%2387CEEB' rx='1'/%3E%3Crect x='83' y='85' width='12' height='12' fill='%2387CEEB' rx='1'/%3E%3Crect x='72' y='105' width='14' height='25' fill='%238B4513' rx='1'/%3E%3C/svg%3E"
                style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="Tel Aviv">
            </div>
            <div class="c-el c-el-btn-wrap" id="el-btn" onclick="selEl(event,'el-btn')" style="flex:.8;align-items:center">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
              <div class="bound-dot"></div>
              <div class="c-el-btn" id="v-el-btn">Click me</div>
            </div>
          </div>
          <!-- Countdown element (bound to custom context) -->
          <div class="c-el c-el-text bound" id="el-countdown" onclick="selEl(event,'el-countdown')">
            <div class="c-el-overlay"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">⏱ UpcomingClassCountdown · timeLeft</div></div>
            <div class="bound-dot"></div>
            <span class="src-tag" id="src-el-countdown"></span>
            <span class="val" id="v-el-countdown">20:45:11</span>
          </div>
        </div>
      </div>

      <!-- Section: Weather (context already attached) -->
      <div class="c-section has-ctx" id="sec-weather" onclick="selEl(event,'sec-weather')">
        <div class="ctx-pill" id="pill-sec-weather"></div>
        <div class="s-body" style="padding-top:20px">
          <!-- Weather image + Snowman -->
          <div class="c-row" style="align-items:stretch;padding-top:8px;margin-top:-8px">
            <div style="flex:1;overflow:visible">
              <div class="c-el c-el-img" id="el-weather-img" onclick="selEl(event,'el-weather-img')" style="padding:0;height:280px">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <img id="cimg-el-weather-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='280' viewBox='0 0 300 280'%3E%3Crect fill='%23f0f0f5' width='300' height='280'/%3E%3Crect x='90' y='80' width='120' height='90' rx='8' fill='%23ddd'/%3E%3Ccircle cx='130' cy='110' r='16' fill='%23ccc'/%3E%3Cpolygon points='100,165 150,115 200,165' fill='%23c5c5c5'/%3E%3Cpolygon points='140,165 175,130 210,165' fill='%23bbb'/%3E%3C/svg%3E"
                     style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="image placeholder">
                
              </div>
            </div>
            <!-- Snowman icon -->
            <div class="c-el c-el-icon" id="el-snowman" onclick="selEl(event,'el-snowman')" style="flex:none;width:64px;align-items:center;justify-content:center;padding:4px">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Icon</div><div class="el-bind-tag"></div></div>
              <svg id="v-snowman" width="44" height="56" viewBox="0 0 44 56" fill="none" xmlns="http://www.w3.org/2000/svg" style="pointer-events:none;transition:opacity .3s">
                <!-- Body bottom -->
                <circle cx="22" cy="42" r="12" fill="#dde8f0" stroke="#b0c8d8" stroke-width="1.5"/>
                <!-- Body top -->
                <circle cx="22" cy="22" r="9" fill="#eaf3f8" stroke="#b0c8d8" stroke-width="1.5"/>
                <!-- Head -->
                <circle cx="22" cy="8" r="6" fill="#f2f8fb" stroke="#b0c8d8" stroke-width="1.5"/>
                <!-- Eyes -->
                <circle cx="20" cy="6.5" r="1.1" fill="#2a3f5f"/>
                <circle cx="24" cy="6.5" r="1.1" fill="#2a3f5f"/>
                <!-- Nose (carrot) -->
                <polygon points="22,8.5 25,9.5 22,10.2" fill="#f97316"/>
                <!-- Smile dots -->
                <circle cx="20.5" cy="10.5" r="0.7" fill="#2a3f5f"/>
                <circle cx="22" cy="11.3" r="0.7" fill="#2a3f5f"/>
                <circle cx="23.5" cy="10.5" r="0.7" fill="#2a3f5f"/>
                <!-- Buttons -->
                <circle cx="22" cy="19" r="1.2" fill="#2a3f5f"/>
                <circle cx="22" cy="22.5" r="1.2" fill="#2a3f5f"/>
                <circle cx="22" cy="26" r="1.2" fill="#2a3f5f"/>
                <!-- Arms -->
                <line x1="13" y1="21" x2="5" y2="16" stroke="#7a5c3a" stroke-width="2" stroke-linecap="round"/>
                <line x1="5" y1="16" x2="3" y2="13" stroke="#7a5c3a" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="5" y1="16" x2="2" y2="17" stroke="#7a5c3a" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="31" y1="21" x2="39" y2="16" stroke="#7a5c3a" stroke-width="2" stroke-linecap="round"/>
                <line x1="39" y1="16" x2="41" y2="13" stroke="#7a5c3a" stroke-width="1.5" stroke-linecap="round"/>
                <line x1="39" y1="16" x2="42" y2="17" stroke="#7a5c3a" stroke-width="1.5" stroke-linecap="round"/>
                <!-- Hat brim -->
                <rect x="15" y="3.5" width="14" height="2" rx="1" fill="#1e293b"/>
                <!-- Hat top -->
                <rect x="17.5" y="-3" width="9" height="7.5" rx="1.5" fill="#1e293b"/>
                <!-- Scarf -->
                <path d="M15 14.5 Q22 17 29 14.5" stroke="#ef4444" stroke-width="2.5" fill="none" stroke-linecap="round"/>
                <path d="M26 14.5 Q28 18 25 20" stroke="#ef4444" stroke-width="2" fill="none" stroke-linecap="round"/>
              </svg>
            </div>
          </div>

          <!-- City text - already bound -->
          <div class="c-el c-el-text bound" id="el-city" onclick="selEl(event,'el-city')">
            <div class="c-el-overlay"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">☁ Weather App · city</div></div>
            <div class="bound-dot"></div>
            <span class="src-tag" id="src-el-city"></span>
            <span class="val" id="v-el-city">Tel Aviv</span>
          </div>
          <div class="c-row">
            <!-- Temp - bound -->
            <div class="c-el c-el-text bound" id="el-temp" onclick="selEl(event,'el-temp')">
              <div class="c-el-overlay"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">☁ Weather App · temperature</div></div>
              <div class="bound-dot"></div>
              <span class="src-tag" id="src-el-temp"></span>
              <span class="val" id="v-el-temp">24°C</span>
            </div>
            <!-- Condition - bound to twoValuesConcat function -->
            <div class="c-el c-el-text bound" id="el-cond" onclick="selEl(event,'el-cond')">
              <div class="c-el-overlay"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">⚡ myFunctions · twoValuesConcat</div></div>
              <div class="bound-dot"></div>
              <span class="src-tag" id="src-el-cond"></span>
              <span class="val" id="v-el-cond">Tel Aviv · Sunny</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Section: Articles (contains the repeater) -->
      <div class="c-section" id="sec-articles" onclick="selEl(event,'sec-articles')">
        <div class="ctx-pill" id="pill-sec-articles"></div>
        <div class="s-body" style="gap:8px;padding-top:20px">
          <!-- Repeater inside section -->
          <div class="c-repeater" id="repeater-articles" onclick="selEl(event,'repeater-articles')">
            <div class="ctx-pill rep-pill" id="pill-repeater-articles"></div>
            <div class="c-el-overlay"></div>
            <span class="rep-count" id="rep-count-articles" style="display:none">— not connected</span>
            <div class="rep-grid">
          <div class="rep-item" id="rep-item-1" onclick="selEl(event,'rep-item-1')">
            <div class="c-el-overlay"></div>
            <!-- thumbnail -->
            <div class="c-el c-el-img rep-thumb" id="el-art-thumb-1" onclick="selEl(event,'el-art-thumb-1')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
              <img src="data:image/png;base64,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" style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="thumb">
            </div>
            <!-- text content -->
            <div class="rep-content">
              <div class="c-el c-el-text" id="el-art-title-1" onclick="selEl(event,'el-art-title-1')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-title-1"></span>
                <span class="val static" id="v-el-art-title-1">Article Title</span>
              </div>
              <div class="c-el c-el-text" id="el-art-author-1" onclick="selEl(event,'el-art-author-1')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-author-1"></span>
                <span class="val static" id="v-el-art-author-1" style="font-size:11px;color:var(--t2)">Author name</span>
              </div>
              <div class="rep-meta">
                <div class="c-el c-el-badge" id="el-art-cat-1" onclick="selEl(event,'el-art-cat-1')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-cat-1"></span>
                  <span class="rep-cat" id="v-el-art-cat-1">Category</span>
                </div>
                <div class="c-el c-el-badge" id="el-art-time-1" onclick="selEl(event,'el-art-time-1')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-time-1"></span>
                  <span class="rep-time" id="v-el-art-time-1">– min read</span>
                </div>
              </div>
            </div>
          </div>
          <div class="rep-item" id="rep-item-2" onclick="selEl(event,'rep-item-2')">
            <div class="c-el-overlay"></div>
            <!-- thumbnail -->
            <div class="c-el c-el-img rep-thumb" id="el-art-thumb-2" onclick="selEl(event,'el-art-thumb-2')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
              <img src="data:image/png;base64,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" style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="thumb">
            </div>
            <!-- text content -->
            <div class="rep-content">
              <div class="c-el c-el-text" id="el-art-title-2" onclick="selEl(event,'el-art-title-2')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-title-2"></span>
                <span class="val static" id="v-el-art-title-2">Article Title</span>
              </div>
              <div class="c-el c-el-text" id="el-art-author-2" onclick="selEl(event,'el-art-author-2')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-author-2"></span>
                <span class="val static" id="v-el-art-author-2" style="font-size:11px;color:var(--t2)">Author name</span>
              </div>
              <div class="rep-meta">
                <div class="c-el c-el-badge" id="el-art-cat-2" onclick="selEl(event,'el-art-cat-2')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-cat-2"></span>
                  <span class="rep-cat" id="v-el-art-cat-2">Category</span>
                </div>
                <div class="c-el c-el-badge" id="el-art-time-2" onclick="selEl(event,'el-art-time-2')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-time-2"></span>
                  <span class="rep-time" id="v-el-art-time-2">– min read</span>
                </div>
              </div>
            </div>
          </div>
          <div class="rep-item" id="rep-item-3" onclick="selEl(event,'rep-item-3')">
            <div class="c-el-overlay"></div>
            <!-- thumbnail -->
            <div class="c-el c-el-img rep-thumb" id="el-art-thumb-3" onclick="selEl(event,'el-art-thumb-3')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
              <img src="data:image/png;base64,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" style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="thumb">
            </div>
            <!-- text content -->
            <div class="rep-content">
              <div class="c-el c-el-text" id="el-art-title-3" onclick="selEl(event,'el-art-title-3')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-title-3"></span>
                <span class="val static" id="v-el-art-title-3">Article Title</span>
              </div>
              <div class="c-el c-el-text" id="el-art-author-3" onclick="selEl(event,'el-art-author-3')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                <span class="src-tag" id="src-el-art-author-3"></span>
                <span class="val static" id="v-el-art-author-3" style="font-size:11px;color:var(--t2)">Author name</span>
              </div>
              <div class="rep-meta">
                <div class="c-el c-el-badge" id="el-art-cat-3" onclick="selEl(event,'el-art-cat-3')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-cat-3"></span>
                  <span class="rep-cat" id="v-el-art-cat-3">Category</span>
                </div>
                <div class="c-el c-el-badge" id="el-art-time-3" onclick="selEl(event,'el-art-time-3')">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <span class="src-tag" id="src-el-art-time-3"></span>
                  <span class="rep-time" id="v-el-art-time-3">– min read</span>
                </div>
              </div>
            </div>
          </div>
            </div><!-- /rep-grid -->
          </div><!-- /c-repeater -->
        </div>
      </div>

      <!-- Section: Empty -->
      <div class="c-section" id="sec-empty" onclick="selEl(event,'sec-empty')">
        <div class="ctx-pill" id="pill-sec-empty"></div>
        <div class="s-body" style="min-height:500px"></div>
      </div>

    </div>

    <!-- ITEMS LIST PAGE -->
    <div class="items-page" id="items-page">
      <div class="c-section" id="sec-items" onclick="selEl(event,'sec-items')">
        <div class="ctx-pill" id="pill-sec-items"></div>
        <div class="items-page-header">
          <div class="c-el" id="el-items-title" onclick="selEl(event,'el-items-title')" style="cursor:pointer;display:inline-block">
            <div class="c-el-overlay" style="border-radius:4px"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
            <div class="items-page-title" id="v-el-items-title">My Items</div>
          </div>
        </div>

        <div class="c-repeater" id="repeater-items" onclick="selEl(event,'repeater-items')" style="margin:0 36px 32px;border-radius:6px">
          <div class="ctx-pill rep-pill" id="pill-repeater-items"></div>
          <div class="c-el-overlay"></div>
          <div class="rep-header">
            <span class="rep-icon">↻</span>
            <span class="rep-label">Repeater</span>
            <span class="rep-count" id="rep-count-items">— not connected</span>
            <div class="rep-bind-btn" onclick="openDd(event,'repeater-items','Items')" title="Connect to list">
              <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">
                <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
              </svg>
            </div>
          </div>
          <div class="items-grid">
            <!-- Item 1: Sunny Day Tee -->
            <div class="items-card rep-item" id="rep-item-s1" onclick="selEl(event,'rep-item-s1')">
              <div class="c-el-overlay"></div>
              <div class="c-el items-card-img" id="el-item-img-1" onclick="selEl(event,'el-item-img-1')">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="120" height="120" fill="#1a1a2e"/>
                  <path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#f0f0f0" stroke="#ddd" stroke-width="1"/>
                  <circle cx="60" cy="62" r="10" fill="#FFD700" opacity=".8"/>
                  <path d="M55 55 Q60 48 65 55" stroke="#87CEEB" stroke-width="1.5" fill="none"/>
                </svg>
              </div>
              <div class="items-card-body">
                <div class="c-el" id="el-item-title-1" onclick="selEl(event,'el-item-title-1')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-title" id="v-el-item-title-1">Sunny Day Tee</div>
                </div>
                <div class="c-el" id="el-item-desc-1" onclick="selEl(event,'el-item-desc-1')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-desc" id="v-el-item-desc-1">Classic cotton tee featuring our iconic sun logo. Perfect for warm weather days.</div>
                </div>
                <div class="c-el" id="el-item-btn-1" onclick="selEl(event,'el-item-btn-1')" style="cursor:pointer;display:inline-block">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-btn">Add to Cart</div>
                </div>
              </div>
            </div>

            <!-- Item 2: Cloud Nine Hoodie -->
            <div class="items-card rep-item" id="rep-item-s2" onclick="selEl(event,'rep-item-s2')">
              <div class="c-el-overlay"></div>
              <div class="c-el items-card-img" id="el-item-img-2" onclick="selEl(event,'el-item-img-2')" style="background:#d4c4a8">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="120" height="120" fill="#d4c4a8"/>
                  <path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#fff" stroke="#eee" stroke-width="1"/>
                  <ellipse cx="60" cy="60" rx="12" ry="6" fill="#ccc" opacity=".6"/>
                  <ellipse cx="55" cy="58" rx="8" ry="5" fill="#ddd" opacity=".7"/>
                  <path d="M50 72 L52 68 L56 70 L60 66 L64 70 L68 68 L70 72" stroke="#87CEEB" stroke-width="1" fill="none"/>
                </svg>
              </div>
              <div class="items-card-body">
                <div class="c-el" id="el-item-title-2" onclick="selEl(event,'el-item-title-2')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-title" id="v-el-item-title-2">Cloud Nine Hoodie</div>
                </div>
                <div class="c-el" id="el-item-desc-2" onclick="selEl(event,'el-item-desc-2')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-desc" id="v-el-item-desc-2">Cozy pullover hoodie with cloud pattern. Stay warm when the forecast turns cold.</div>
                </div>
                <div class="c-el" id="el-item-btn-2" onclick="selEl(event,'el-item-btn-2')" style="cursor:pointer;display:inline-block">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-btn">Add to Cart</div>
                </div>
              </div>
            </div>

            <!-- Item 3: Storm Chaser Vest -->
            <div class="items-card rep-item" id="rep-item-s3" onclick="selEl(event,'rep-item-s3')">
              <div class="c-el-overlay"></div>
              <div class="c-el items-card-img" id="el-item-img-3" onclick="selEl(event,'el-item-img-3')" style="background:#333">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="120" height="120" fill="#333"/>
                  <path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#444" stroke="#555" stroke-width="1"/>
                  <path d="M58 55 L55 65 L62 62 L59 72" stroke="#FFD700" stroke-width="2" stroke-linecap="round"/>
                  <ellipse cx="60" cy="52" rx="10" ry="4" fill="#666" opacity=".5"/>
                </svg>
              </div>
              <div class="items-card-body">
                <div class="c-el" id="el-item-title-3" onclick="selEl(event,'el-item-title-3')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-title" id="v-el-item-title-3">Storm Chaser Vest</div>
                </div>
                <div class="c-el" id="el-item-desc-3" onclick="selEl(event,'el-item-desc-3')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-desc" id="v-el-item-desc-3">Lightweight weatherproof vest with lightning bolt emblem. Built for adventure.</div>
                </div>
                <div class="c-el" id="el-item-btn-3" onclick="selEl(event,'el-item-btn-3')" style="cursor:pointer;display:inline-block">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-btn">Add to Cart</div>
                </div>
              </div>
            </div>

            <!-- Item 4: Forecast Cap -->
            <div class="items-card rep-item" id="rep-item-s4" onclick="selEl(event,'rep-item-s4')">
              <div class="c-el-overlay"></div>
              <div class="c-el items-card-img" id="el-item-img-4" onclick="selEl(event,'el-item-img-4')" style="background:#888">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="120" height="120" fill="#888"/>
                  <path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#999" stroke="#aaa" stroke-width="1"/>
                  <circle cx="55" cy="60" r="4" fill="#87CEEB" opacity=".6"/>
                  <circle cx="65" cy="58" r="3" fill="#87CEEB" opacity=".5"/>
                  <circle cx="60" cy="65" r="3.5" fill="#87CEEB" opacity=".55"/>
                  <line x1="56" y1="70" x2="56" y2="78" stroke="#87CEEB" stroke-width="1" opacity=".5"/>
                  <line x1="60" y1="72" x2="60" y2="80" stroke="#87CEEB" stroke-width="1" opacity=".5"/>
                  <line x1="64" y1="70" x2="64" y2="78" stroke="#87CEEB" stroke-width="1" opacity=".5"/>
                </svg>
              </div>
              <div class="items-card-body">
                <div class="c-el" id="el-item-title-4" onclick="selEl(event,'el-item-title-4')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-title" id="v-el-item-title-4">Rainy Day Polo</div>
                </div>
                <div class="c-el" id="el-item-desc-4" onclick="selEl(event,'el-item-desc-4')" style="cursor:pointer">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-desc" id="v-el-item-desc-4">Water-resistant polo with rain droplet print. Stylish in any weather condition.</div>
                </div>
                <div class="c-el" id="el-item-btn-4" onclick="selEl(event,'el-item-btn-4')" style="cursor:pointer;display:inline-block">
                  <div class="c-el-overlay"></div>
                  <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
                  <div class="items-card-btn">Add to Cart</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MULTI-STATE BOX PAGE -->
    <div class="items-page" id="msb-page">
      <div class="c-section" id="sec-msb" onclick="selEl(event,'sec-msb')" style="margin:16px">
        <div class="ctx-pill" id="pill-sec-msb"></div>
        <div style="padding:24px 24px 12px">
          <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:18px;color:var(--t1);margin-bottom:4px">Articles</div>
          <div style="font-size:12px;color:var(--t3)">Multi-State Container driven by <b>itemsStatus</b> enum from CMS · Articles</div>
        </div>
        <div class="msb bound" id="msb-articles" onclick="selEl(event,'msb-articles')" style="margin:12px 24px 24px">
          <div class="c-el-overlay" style="border-radius:12px"></div>
          <div class="msb-pill" id="pill-msb-articles"></div>
          <div class="msb-view-sel" id="msb-view-sel">
            <button class="msb-view-btn" data-view="loading" onclick="switchMsbView(event,'loading')">Loading</button>
            <button class="msb-view-btn" data-view="empty" onclick="switchMsbView(event,'empty')">Empty</button>
            <button class="msb-view-btn active" data-view="hasItems" onclick="switchMsbView(event,'hasItems')">Has Items</button>
          </div>
          <div class="msb-header">
            <span class="msb-icon">◫</span>
            <span class="msb-label">Multi-State</span>
            <span class="msb-binding">📚 Articles · itemsStatus</span>
          </div>
          <div class="msb-body">
            <!-- Unbound View (no Active State binding) -->
            <div class="msb-view" id="msb-view-unbound">
              <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;gap:10px">
                <div style="font-size:36px;opacity:.3">◫</div>
                <div style="font-size:14px;font-weight:600;color:var(--t2)">Which view should I show?</div>
                <div style="font-size:12px;color:var(--t3);text-align:center;line-height:1.6;max-width:260px">Pick a data field that tells me what state we're in — and I'll show the right view automatically.</div>
                <div style="margin-top:4px;padding:7px 16px;border:1px dashed var(--acc);border-radius:6px;font-size:12px;color:var(--acc);cursor:pointer" onclick="selEl(event,'msb-articles');S.tab='settings';renderRP()">Choose a field →</div>
              </div>
            </div>
            <!-- Loading View -->
            <div class="msb-view" id="msb-view-loading">
              <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px 0;gap:12px">
                <div style="width:32px;height:32px;border:3px solid var(--b2);border-top-color:var(--acc);border-radius:50%;animation:spin 1s linear infinite"></div>
                <div class="c-el" id="el-msb-loading-text" onclick="selEl(event,'el-msb-loading-text')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div style="font-size:14px;color:var(--t3)">Loading articles...</div>
                </div>
              </div>
            </div>
            <!-- Empty View -->
            <div class="msb-view" id="msb-view-empty">
              <div style="display:flex;flex-direction:column;align-items:center;gap:12px;padding:32px 0">
                <div style="font-size:36px;opacity:.4">📭</div>
                <div class="c-el" id="el-msb-empty-title" onclick="selEl(event,'el-msb-empty-title')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
                  <div style="font-size:14px;color:var(--t3)">No articles yet</div>
                </div>
                <div class="c-el" id="el-msb-empty-btn" onclick="selEl(event,'el-msb-empty-btn')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Button</div><div class="el-bind-tag"></div></div>
                  <div style="padding:8px 20px;background:var(--acc);color:#fff;border-radius:6px;font-size:12px;font-weight:500;display:inline-block">Create Article</div>
                </div>
              </div>
            </div>
            <!-- Has Items View -->
            <div class="msb-view active" id="msb-view-hasItems">
              <div class="c-repeater bound" id="repeater-msb-items" onclick="selEl(event,'repeater-msb-items')" style="border-radius:6px">
                <div class="ctx-pill rep-pill" id="pill-repeater-msb-items"></div>
                <div class="c-el-overlay"></div>
                <div class="rep-header">
                  <span class="rep-icon">↻</span>
                  <span class="rep-label">Repeater</span>
                  <span class="rep-count" id="rep-count-msb-items">📚 items · 3 items</span>
                  <div class="rep-bind-btn" onclick="openDd(event,'repeater-msb-items','Items')" title="Connect to list">
                    <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">
                      <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
                    </svg>
                  </div>
                </div>
                <div style="display:flex;flex-direction:column;gap:8px;padding:8px">
                  <div class="rep-item" id="rep-msb-item-1" onclick="selEl(event,'rep-msb-item-1')" style="padding:10px;border-radius:8px;border:1px solid var(--b1);cursor:pointer;position:relative;display:flex;gap:12px;align-items:flex-start">
                    <div class="c-el-overlay"></div>
                    <div class="c-el bound" id="el-msb-item-thumb-1" onclick="selEl(event,'el-msb-item-thumb-1')" style="cursor:pointer;flex-shrink:0">
                      <div class="c-el-overlay" style="border-radius:6px"></div>
                      <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag">📚 Articles · thumbnail</div></div>
                      <div style="width:56px;height:56px;border-radius:6px;background:var(--b1);display:flex;align-items:center;justify-content:center;font-size:20px;color:var(--t3)">🖼</div>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:3px;flex:1;min-width:0">
                      <div class="c-el bound" id="el-msb-item-title-1" onclick="selEl(event,'el-msb-item-title-1')" style="cursor:pointer">
                        <div class="c-el-overlay" style="border-radius:4px"></div>
                        <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · title</div></div>
                        <div style="font-size:14px;font-weight:600;color:var(--t1)">Getting Started with AI Tools</div>
                      </div>
                      <div class="c-el bound" id="el-msb-item-author-1" onclick="selEl(event,'el-msb-item-author-1')" style="cursor:pointer">
                        <div class="c-el-overlay" style="border-radius:4px"></div>
                        <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · author</div></div>
                        <div style="font-size:11px;color:var(--t3)">Jane Doe</div>
                      </div>
                    </div>
                  </div>
                  <div class="rep-item" id="rep-msb-item-2" onclick="selEl(event,'rep-msb-item-2')" style="padding:10px;border-radius:8px;border:1px solid var(--b1);cursor:pointer;position:relative;display:flex;gap:12px;align-items:flex-start">
                    <div class="c-el-overlay"></div>
                    <div class="c-el bound" id="el-msb-item-thumb-2" onclick="selEl(event,'el-msb-item-thumb-2')" style="cursor:pointer;flex-shrink:0">
                      <div class="c-el-overlay" style="border-radius:6px"></div>
                      <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag">📚 Articles · thumbnail</div></div>
                      <div style="width:56px;height:56px;border-radius:6px;background:var(--b1);display:flex;align-items:center;justify-content:center;font-size:20px;color:var(--t3)">🖼</div>
                    </div>
                    <div style="display:flex;flex-direction:column;gap:3px;flex:1;min-width:0">
                      <div class="c-el bound" id="el-msb-item-title-2" onclick="selEl(event,'el-msb-item-title-2')" style="cursor:pointer">
                        <div class="c-el-overlay" style="border-radius:4px"></div>
                        <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · title</div></div>
                        <div style="font-size:14px;font-weight:600;color:var(--t1)">Design Systems at Scale</div>
                      </div>
                      <div class="c-el bound" id="el-msb-item-author-2" onclick="selEl(event,'el-msb-item-author-2')" style="cursor:pointer">
                        <div class="c-el-overlay" style="border-radius:4px"></div>
                        <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · author</div></div>
                        <div style="font-size:11px;color:var(--t3)">John Smith</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- REPEATER USECASES PAGE -->
    <div class="items-page" id="repeater-usecases-page">

      <!-- Section 1: Articles List Repeater -->
      <div class="c-section" id="sec-ruc-articles" onclick="selEl(event,'sec-ruc-articles')" style="margin:16px">
        <div class="ctx-pill" id="pill-sec-ruc-articles"></div>
        <div style="padding:24px 24px 8px">
          <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:18px;color:var(--t1);margin-bottom:4px">Latest Articles</div>
          <div style="font-size:12px;color:var(--t3);margin-bottom:12px">Repeater iterates over the articles list</div>
        </div>
        <div class="c-repeater bound" id="repeater-ruc-articles" onclick="selEl(event,'repeater-ruc-articles')" style="margin:0 24px 24px;border-radius:6px">
          <div class="ctx-pill rep-pill" id="pill-repeater-ruc-articles"></div>
          <div class="c-el-overlay"></div>
          <div class="rep-header">
            <span class="rep-icon">↻</span>
            <span class="rep-label">Repeater</span>
            <span class="rep-count" id="rep-count-ruc-articles">3 items</span>
            <div class="rep-bind-btn" onclick="openDd(event,'repeater-ruc-articles','Items')" title="Connect to list">
              <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">
                <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
              </svg>
            </div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px;padding:8px">
            <div class="rep-item" id="rep-ruc-art-1" onclick="selEl(event,'rep-ruc-art-1')" style="padding:12px 16px;border-radius:8px;border:1px solid var(--b1);cursor:pointer;position:relative">
              <div class="c-el-overlay"></div>
              <div class="c-el bound" id="el-ruc-art-title-1" onclick="selEl(event,'el-ruc-art-title-1')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · title</div></div>
                <div style="font-weight:600;font-size:14px;color:var(--t1)">Getting Started with AI Tools</div>
              </div>
              <div class="c-el bound" id="el-ruc-art-author-1" onclick="selEl(event,'el-ruc-art-author-1')" style="cursor:pointer;margin-top:4px">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · author</div></div>
                <div style="font-size:12px;color:var(--t3)">Jane Doe</div>
              </div>
            </div>
            <div class="rep-item" id="rep-ruc-art-2" onclick="selEl(event,'rep-ruc-art-2')" style="padding:12px 16px;border-radius:8px;border:1px solid var(--b1);cursor:pointer;position:relative">
              <div class="c-el-overlay"></div>
              <div class="c-el bound" id="el-ruc-art-title-2" onclick="selEl(event,'el-ruc-art-title-2')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · title</div></div>
                <div style="font-weight:600;font-size:14px;color:var(--t1)">Design Systems at Scale</div>
              </div>
              <div class="c-el bound" id="el-ruc-art-author-2" onclick="selEl(event,'el-ruc-art-author-2')" style="cursor:pointer;margin-top:4px">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · author</div></div>
                <div style="font-size:12px;color:var(--t3)">John Smith</div>
              </div>
            </div>
            <div class="rep-item" id="rep-ruc-art-3" onclick="selEl(event,'rep-ruc-art-3')" style="padding:12px 16px;border-radius:8px;border:1px solid var(--b1);cursor:pointer;position:relative">
              <div class="c-el-overlay"></div>
              <div class="c-el bound" id="el-ruc-art-title-3" onclick="selEl(event,'el-ruc-art-title-3')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · title</div></div>
                <div style="font-weight:600;font-size:14px;color:var(--t1)">UX Trends for 2025</div>
              </div>
              <div class="c-el bound" id="el-ruc-art-author-3" onclick="selEl(event,'el-ruc-art-author-3')" style="cursor:pointer;margin-top:4px">
                <div class="c-el-overlay" style="border-radius:4px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · author</div></div>
                <div style="font-size:12px;color:var(--t3)">Alex Rivera</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Section 2: Tags Repeater (nested array) -->
      <div class="c-section" id="sec-ruc-tags" onclick="selEl(event,'sec-ruc-tags')" style="margin:16px">
        <div class="ctx-pill" id="pill-sec-ruc-tags"></div>
        <div style="padding:24px 24px 8px">
          <div style="font-family:'Syne',sans-serif;font-weight:700;font-size:18px;color:var(--t1);margin-bottom:4px">Article Tags</div>
          <div style="font-size:12px;color:var(--t3);margin-bottom:12px">Repeater iterates over the <b>tags</b> nested array field</div>
        </div>
        <div class="c-repeater bound" id="repeater-ruc-tags" onclick="selEl(event,'repeater-ruc-tags')" style="margin:0 24px 24px;border-radius:6px">
          <div class="ctx-pill rep-pill" id="pill-repeater-ruc-tags"></div>
          <div class="c-el-overlay"></div>
          <div class="rep-header">
            <span class="rep-icon">↻</span>
            <span class="rep-label">Repeater</span>
            <span class="rep-count" id="rep-count-ruc-tags">4 items</span>
            <div class="rep-bind-btn" onclick="openDd(event,'repeater-ruc-tags','Items')" title="Connect to list">
              <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">
                <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
              </svg>
            </div>
          </div>
          <div style="display:flex;flex-wrap:wrap;gap:8px;padding:12px 16px">
            <div class="rep-item" id="rep-ruc-tag-1" onclick="selEl(event,'rep-ruc-tag-1')" style="cursor:pointer;position:relative">
              <div class="c-el-overlay" style="border-radius:20px"></div>
              <div class="c-el bound" id="el-ruc-tag-val-1" onclick="selEl(event,'el-ruc-tag-val-1')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:20px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · tags · tag value</div></div>
                <div style="padding:4px 14px;background:var(--acc-d);color:var(--acc);border-radius:20px;font-size:12px;font-weight:500">Tech</div>
              </div>
            </div>
            <div class="rep-item" id="rep-ruc-tag-2" onclick="selEl(event,'rep-ruc-tag-2')" style="cursor:pointer;position:relative">
              <div class="c-el-overlay" style="border-radius:20px"></div>
              <div class="c-el bound" id="el-ruc-tag-val-2" onclick="selEl(event,'el-ruc-tag-val-2')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:20px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · tags · tag value</div></div>
                <div style="padding:4px 14px;background:var(--acc-d);color:var(--acc);border-radius:20px;font-size:12px;font-weight:500">AI</div>
              </div>
            </div>
            <div class="rep-item" id="rep-ruc-tag-3" onclick="selEl(event,'rep-ruc-tag-3')" style="cursor:pointer;position:relative">
              <div class="c-el-overlay" style="border-radius:20px"></div>
              <div class="c-el bound" id="el-ruc-tag-val-3" onclick="selEl(event,'el-ruc-tag-val-3')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:20px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · tags · tag value</div></div>
                <div style="padding:4px 14px;background:var(--acc-d);color:var(--acc);border-radius:20px;font-size:12px;font-weight:500">Design</div>
              </div>
            </div>
            <div class="rep-item" id="rep-ruc-tag-4" onclick="selEl(event,'rep-ruc-tag-4')" style="cursor:pointer;position:relative">
              <div class="c-el-overlay" style="border-radius:20px"></div>
              <div class="c-el bound" id="el-ruc-tag-val-4" onclick="selEl(event,'el-ruc-tag-val-4')" style="cursor:pointer">
                <div class="c-el-overlay" style="border-radius:20px"></div>
                <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">📚 Articles · tags · tag value</div></div>
                <div style="padding:4px 14px;background:var(--acc-d);color:var(--acc);border-radius:20px;font-size:12px;font-weight:500">UX</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- ITEMS RELATIONSHIP CONCEPT PAGE -->
    <div class="item-detail-page" id="item-relationship-page">
      <div class="item-ctrl">
        <span class="item-ctrl-site">Weather Merch</span>
        <span class="item-ctrl-nav">AB</span>
        <div class="item-ctrl-sep"></div>
        <span class="item-ctrl-drag">⋮⋮</span>
        <div class="item-ctrl-select">
          <span class="item-ctrl-select-name" id="item-rel-ctrl-name">Sunny Day Tee</span>
          <span class="item-ctrl-count">4 items ˅</span>
        </div>
        <span class="item-ctrl-edit">Edit item</span>
        <div class="item-ctrl-arrows">
          <div class="item-ctrl-arrow" onclick="navItem(-1)">‹</div>
          <div class="item-ctrl-arrow" onclick="navItem(1)">›</div>
        </div>
      </div>

      <div class="c-page has-ctx" id="page-rel-detail" onclick="selEl(event,'page-rel-detail')">
        <div class="ctx-pill" id="pill-page-rel-detail"></div>

        <div class="c-section has-ctx" id="sec-rel-product" onclick="selEl(event,'sec-rel-product')">
          <div class="ctx-pill" id="pill-sec-rel-product"></div>

          <div class="item-detail-body">
          <div class="c-el bound" id="el-rel-title" onclick="selEl(event,'el-rel-title')" style="cursor:pointer;display:inline-block">
            <div class="c-el-overlay" style="border-radius:4px"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">🛍 Stores · Current Item · name</div></div>
            <div class="item-detail-title" id="v-el-rel-title">Sunny Day Tee</div>
          </div>
          <div class="c-el bound" id="el-rel-desc" onclick="selEl(event,'el-rel-desc')" style="cursor:pointer">
            <div class="c-el-overlay" style="border-radius:4px"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">🛍 Stores · Current Item · description</div></div>
              <div class="item-detail-desc" id="v-el-rel-desc">Classic cotton tee featuring our iconic sun logo. Perfect for warm weather days.</div>
            </div>
          </div>

        <div class="c-el item-detail-hero bound" id="el-rel-img" onclick="selEl(event,'el-rel-img')">
          <div class="c-el-overlay"></div>
          <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag">🛍 Stores · Current Item · image</div></div>
            <svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect width="120" height="120" fill="#1a1a2e"/>
              <path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#f0f0f0" stroke="#ddd" stroke-width="1"/>
              <circle cx="60" cy="62" r="10" fill="#FFD700" opacity=".8"/>
              <path d="M55 55 Q60 48 65 55" stroke="#87CEEB" stroke-width="1.5" fill="none"/>
            </svg>
          </div>
        </div>

        <div class="c-section has-ctx" id="sec-rel-locations" onclick="selEl(event,'sec-rel-locations')">
          <div class="ctx-pill" id="pill-sec-rel-locations"></div>
          <div class="detail-related-section">
            <div class="c-el" id="el-rel-loc-title" onclick="selEl(event,'el-rel-loc-title')" style="cursor:pointer;display:inline-block">
              <div class="c-el-overlay" style="border-radius:4px"></div>
              <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
              <div class="detail-related-title" id="v-el-rel-loc-title">Available in these stores</div>
            </div>
            <div class="c-repeater bound" id="repeater-rel-locations" onclick="selEl(event,'repeater-rel-locations')" style="border-radius:6px">
              <div class="ctx-pill rep-pill" id="pill-repeater-rel-locations"></div>
              <div class="c-el-overlay"></div>
              <div class="rep-header">
                <span class="rep-icon">↻</span>
                <span class="rep-label">Repeater</span>
                <span class="rep-count" id="rep-count-rel-locations">📍 locations · 3 items</span>
                <div class="rep-bind-btn" onclick="openDd(event,'repeater-rel-locations','Items')" title="Connect to list">
                  <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">
                    <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
                  </svg>
                </div>
              </div>
              <div class="detail-related-grid">
                <div class="detail-related-card rep-item" id="rep-rel-loc-1" onclick="selEl(event,'rep-rel-loc-1')">
                  <div class="c-el-overlay"></div>
                  <div class="detail-related-thumb" style="background:linear-gradient(135deg,#10b981,#059669)">
                    <svg viewBox="0 0 120 120" fill="none"><circle cx="60" cy="45" r="16" stroke="#fff" stroke-width="3" fill="none"/><circle cx="60" cy="45" r="5" fill="#fff"/><path d="M60 61 L60 90" stroke="#fff" stroke-width="3"/><path d="M40 95 L80 95" stroke="#fff" stroke-width="2" opacity=".5"/></svg>
                  </div>
                  <div class="detail-related-info">
                    <div class="detail-related-name">Dizengoff Center</div>
                    <div class="detail-related-price" style="color:var(--t3);font-size:10px">Tel Aviv · In Stock</div>
                  </div>
                </div>
                <div class="detail-related-card rep-item" id="rep-rel-loc-2" onclick="selEl(event,'rep-rel-loc-2')">
                  <div class="c-el-overlay"></div>
                  <div class="detail-related-thumb" style="background:linear-gradient(135deg,#6366f1,#4f46e5)">
                    <svg viewBox="0 0 120 120" fill="none"><circle cx="60" cy="45" r="16" stroke="#fff" stroke-width="3" fill="none"/><circle cx="60" cy="45" r="5" fill="#fff"/><path d="M60 61 L60 90" stroke="#fff" stroke-width="3"/><path d="M40 95 L80 95" stroke="#fff" stroke-width="2" opacity=".5"/></svg>
                  </div>
                  <div class="detail-related-info">
                    <div class="detail-related-name">Azrieli Mall</div>
                    <div class="detail-related-price" style="color:var(--t3);font-size:10px">Tel Aviv · In Stock</div>
                  </div>
                </div>
                <div class="detail-related-card rep-item" id="rep-rel-loc-3" onclick="selEl(event,'rep-rel-loc-3')">
                  <div class="c-el-overlay"></div>
                  <div class="detail-related-thumb" style="background:linear-gradient(135deg,#f59e0b,#d97706)">
                    <svg viewBox="0 0 120 120" fill="none"><circle cx="60" cy="45" r="16" stroke="#fff" stroke-width="3" fill="none"/><circle cx="60" cy="45" r="5" fill="#fff"/><path d="M60 61 L60 90" stroke="#fff" stroke-width="3"/><path d="M40 95 L80 95" stroke="#fff" stroke-width="2" opacity=".5"/></svg>
                  </div>
                  <div class="detail-related-info">
                    <div class="detail-related-name">Grand Canyon Haifa</div>
                    <div class="detail-related-price" style="color:var(--t3);font-size:10px">Haifa · Low Stock</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- DEMO PAGE -->
    <div class="canvas-inner hidden-page" id="demo-page">

      <!-- Section: Team (connected to My Team CMS) -->
      <div class="c-section has-ctx" id="sec-demo-team" onclick="selEl(event,'sec-demo-team')">
        <div class="ctx-pill" id="pill-sec-demo-team"></div>
        <div class="s-body" style="padding:48px 36px 40px;background:#e8e4e0">

          <div style="text-align:center;margin-bottom:32px">
            <div class="c-el" id="el-demo-team-title" onclick="selEl(event,'el-demo-team-title')" style="cursor:pointer;display:inline-block">
              <div class="c-el-overlay" style="border-radius:4px"></div>
              <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
              <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:36px;color:#1a1a2e;text-transform:uppercase;letter-spacing:2px">OUR TEAM</div>
            </div>
            <div class="c-el" id="el-demo-team-subtitle" onclick="selEl(event,'el-demo-team-subtitle')" style="cursor:pointer;margin-top:12px">
              <div class="c-el-overlay" style="border-radius:4px"></div>
              <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
              <div style="font-family:'DM Mono',monospace;font-size:12px;color:#666;line-height:1.8;max-width:440px;margin:0 auto">This is the space to introduce visitors to the business or brand.<br>Briefly explain who's behind it, what it does and what makes it unique.<br>Share its core values and what this site has to offer.</div>
            </div>
          </div>

          <div style="display:flex;gap:20px;justify-content:center">
            <!-- Member 1 -->
            <div style="flex:1;max-width:280px">
              <div class="c-el bound" id="el-demo-member-img-1" onclick="selEl(event,'el-demo-member-img-1')" style="cursor:pointer;position:relative;border-radius:8px;overflow:hidden">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=530&fit=crop&crop=faces" style="width:100%;aspect-ratio:3/4;object-fit:cover;display:block" alt="Team member">
                <div class="c-el bound" id="el-demo-member-tag-1" onclick="selEl(event,'el-demo-member-tag-1')" style="cursor:pointer;position:absolute;bottom:0;left:0;right:0">
                  <div class="c-el-overlay" style="border-radius:0"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · tagline</div></div>
                  <div style="background:#e84820;color:#fff;padding:8px 16px;font-family:'DM Mono',monospace;font-size:11px;text-align:center">Weaving words into wonders</div>
                </div>
              </div>
              <div style="padding:12px 4px 0">
                <div class="c-el bound" id="el-demo-member-name-1" onclick="selEl(event,'el-demo-member-name-1')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · name</div></div>
                  <div style="font-family:'Syne',sans-serif;font-weight:600;font-size:16px;color:#1a1a2e;text-align:center">Riley Carter</div>
                </div>
                <div class="c-el bound" id="el-demo-member-role-1" onclick="selEl(event,'el-demo-member-role-1')" style="cursor:pointer;margin-top:4px">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · role</div></div>
                  <div style="font-family:'DM Mono',monospace;font-size:10px;color:#666;text-transform:uppercase;letter-spacing:1px;text-align:center">CONTENT CRAFTER</div>
                </div>
              </div>
            </div>
            <!-- Member 2 -->
            <div style="flex:1;max-width:280px">
              <div class="c-el bound" id="el-demo-member-img-2" onclick="selEl(event,'el-demo-member-img-2')" style="cursor:pointer;position:relative;border-radius:8px;overflow:hidden">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=530&fit=crop&crop=faces" style="width:100%;aspect-ratio:3/4;object-fit:cover;display:block" alt="Team member">
                <div class="c-el bound" id="el-demo-member-tag-2" onclick="selEl(event,'el-demo-member-tag-2')" style="cursor:pointer;position:absolute;bottom:0;left:0;right:0">
                  <div class="c-el-overlay" style="border-radius:0"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · tagline</div></div>
                  <div style="background:#e84820;color:#fff;padding:8px 16px;font-family:'DM Mono',monospace;font-size:11px;text-align:center">Decoding the data jungle</div>
                </div>
              </div>
              <div style="padding:12px 4px 0">
                <div class="c-el bound" id="el-demo-member-name-2" onclick="selEl(event,'el-demo-member-name-2')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · name</div></div>
                  <div style="font-family:'Syne',sans-serif;font-weight:600;font-size:16px;color:#1a1a2e;text-align:center">Maya Ramirez</div>
                </div>
                <div class="c-el bound" id="el-demo-member-role-2" onclick="selEl(event,'el-demo-member-role-2')" style="cursor:pointer;margin-top:4px">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · role</div></div>
                  <div style="font-family:'DM Mono',monospace;font-size:10px;color:#666;text-transform:uppercase;letter-spacing:1px;text-align:center">ANALYTICS ACE</div>
                </div>
              </div>
            </div>
            <!-- Member 3 -->
            <div style="flex:1;max-width:280px">
              <div class="c-el bound" id="el-demo-member-img-3" onclick="selEl(event,'el-demo-member-img-3')" style="cursor:pointer;position:relative;border-radius:8px;overflow:hidden">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <img src="https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=400&h=530&fit=crop&crop=faces" style="width:100%;aspect-ratio:3/4;object-fit:cover;display:block" alt="Team member">
                <div class="c-el bound" id="el-demo-member-tag-3" onclick="selEl(event,'el-demo-member-tag-3')" style="cursor:pointer;position:absolute;bottom:0;left:0;right:0">
                  <div class="c-el-overlay" style="border-radius:0"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · tagline</div></div>
                  <div style="background:#e84820;color:#fff;padding:8px 16px;font-family:'DM Mono',monospace;font-size:11px;text-align:center">Ruling the social realm</div>
                </div>
              </div>
              <div style="padding:12px 4px 0">
                <div class="c-el bound" id="el-demo-member-name-3" onclick="selEl(event,'el-demo-member-name-3')" style="cursor:pointer">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · name</div></div>
                  <div style="font-family:'Syne',sans-serif;font-weight:600;font-size:16px;color:#1a1a2e;text-align:center">Ali Torel</div>
                </div>
                <div class="c-el bound" id="el-demo-member-role-3" onclick="selEl(event,'el-demo-member-role-3')" style="cursor:pointer;margin-top:4px">
                  <div class="c-el-overlay" style="border-radius:4px"></div>
                  <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">👥 My Team · role</div></div>
                  <div style="font-family:'DM Mono',monospace;font-size:10px;color:#666;text-transform:uppercase;letter-spacing:1px;text-align:center">SOCIAL SUPERSTAR</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Section: Empty (not connected) -->
      <div class="c-section" id="sec-demo-empty" onclick="selEl(event,'sec-demo-empty')">
        <div class="ctx-pill" id="pill-sec-demo-empty"></div>
        <div class="s-body" style="min-height:500px"></div>
      </div>

    </div>

    <!-- DEMO 26.2 PAGE -->
    <div class="canvas-inner" id="demo262-page">

      <!-- Section: Weather (connected to Weather App) -->
      <div class="c-section has-ctx" id="sec-d262-weather" onclick="selEl(event,'sec-d262-weather')">
        <div class="ctx-pill" id="pill-sec-d262-weather"></div>
        <div class="s-body" style="padding-top:20px">
          <div class="c-row" style="align-items:stretch;padding-top:8px;margin-top:-8px">
            <div style="flex:1;overflow:visible">
              <div class="c-el c-el-img" id="el-d262-weather-img" onclick="selEl(event,'el-d262-weather-img')" style="padding:0;height:280px">
                <div class="c-el-overlay"></div>
                <div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag"></div></div>
                <img id="cimg-el-d262-weather-img" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='280' viewBox='0 0 300 280'%3E%3Crect fill='%23f0f0f5' width='300' height='280'/%3E%3C/svg%3E" style="width:100%;height:100%;object-fit:cover;display:block;pointer-events:none" alt="image placeholder">
              </div>
            </div>
          </div>
          <div class="c-el c-el-text bound" id="el-d262-city" onclick="selEl(event,'el-d262-city')">
            <div class="c-el-overlay"></div>
            <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
            <div class="bound-dot"></div>
            <span class="val" id="v-el-d262-city">Tel Aviv</span>
          </div>
          <div class="c-row">
            <div class="c-el c-el-text bound" id="el-d262-temp" onclick="selEl(event,'el-d262-temp')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
              <div class="bound-dot"></div>
              <span class="val" id="v-el-d262-temp">24°C</span>
            </div>
            <div class="c-el c-el-text" id="el-d262-cond" onclick="selEl(event,'el-d262-cond')">
              <div class="c-el-overlay"></div>
              <div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag"></div></div>
              <span class="val" id="v-el-d262-cond">Sunny</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Section: Empty 1 -->
      <div class="c-section" id="sec-d262-empty1" onclick="selEl(event,'sec-d262-empty1')">
        <div class="ctx-pill" id="pill-sec-d262-empty1"></div>
        <div class="s-body" style="min-height:400px"></div>
      </div>

      <!-- Section: Empty 2 -->
      <div class="c-section" id="sec-d262-empty2" onclick="selEl(event,'sec-d262-empty2')">
        <div class="ctx-pill" id="pill-sec-d262-empty2"></div>
        <div class="s-body" style="min-height:400px"></div>
      </div>

    </div>

  </div>

  <!-- SPEC PAGE OVERLAY -->
  <div class="spec-page" id="spec-page">
    <div class="spec-topbar">
      <button class="spec-back-btn" onclick="closeSpecPage()">
        <svg viewBox="0 0 16 16"><polyline points="10 2 4 8 10 14"/></svg>
        Back to Prototype
      </button>
      <div style="width:1px;height:18px;background:var(--b2)"></div>
      <div class="spec-topbar-title">
        <span id="spec-topbar-name">Product Specification</span>
        <span class="spec-topbar-badge">SPEC</span>
      </div>
      <div class="spec-topbar-element" id="spec-topbar-element" style="display:none"></div>
    </div>
    <div class="spec-body" id="spec-body"></div>
  </div>

  <!-- RIGHT PANEL -->
  <div class="rp" id="rp">
    <div id="rp-inner"></div>
  </div>
</div>

<!-- BINDING DROPDOWN -->
<div class="dd" id="dd">
  <div class="dd-head">
    <span class="dd-title" id="dd-title">Connect property</span>
    <span class="dd-x" onclick="closeDd()">✕</span>
  </div>
  <div id="dd-body"></div>
</div>

<div class="modal-overlay" id="modal"  onclick="if(event.target===this)closeModalSafe()">
  <div class="modal-box">
    <div class="modal-head">
      <div class="modal-title">Add Context</div>
      <span class="modal-x" onclick="closeModalSafe()">✕</span>
    </div>
    <div class="modal-list" id="modal-list"></div>
    <div class="modal-foot">
      <button class="modal-btn modal-cancel" onclick="closeModal()">Cancel</button>
      <button class="modal-btn modal-ok ready" id="modal-ok" onclick="confirmCtx()">Done</button>
    </div>
  </div>
</div>

<!-- ADD FIELD MODAL -->
<div class="af-overlay" id="af-modal" onclick="if(event.target===this)closeAddFieldModal()">
  <div class="af-box">
    <div class="af-head">
      <div class="af-title">Add a new field</div>
      <div class="af-head-actions">
        <div class="af-help" title="Help">?</div>
        <div class="af-close" onclick="closeAddFieldModal()">✕</div>
      </div>
    </div>
    <div class="af-subtitle" id="af-subtitle">Add a blank field to the <b id="af-ctx-name">—</b> collection. You can add content later.</div>
    <div class="af-body">
      <div>
        <div class="af-label">Choose field type</div>
        <div class="af-select-wrap">
          <div class="af-select" id="af-type-select" onclick="toggleAfTypeDropdown()">
            <span class="af-select-icon" id="af-type-icon">T</span>
            <span id="af-type-label">Text</span>
            <span class="af-select-chevron">▾</span>
          </div>
          <div class="af-dropdown" id="af-type-dropdown">
            <div class="af-dropdown-item sel" onclick="selectAfType('string','Text','T')"><span class="af-dropdown-icon" style="font-weight:700;font-family:serif">T</span> Text</div>
            <div class="af-dropdown-item" onclick="selectAfType('url','URL','🔗')"><span class="af-dropdown-icon">🔗</span> URL</div>
            <div class="af-dropdown-item" onclick="selectAfType('number','Numbers','#')"><span class="af-dropdown-icon" style="font-weight:700;font-family:'DM Mono',monospace">#</span> Numbers</div>
            <div class="af-dropdown-item" onclick="selectAfType('image','Image','🖼')"><span class="af-dropdown-icon">🖼</span> Image</div>
          </div>
        </div>
      </div>
      <div class="af-input-wrap">
        <div class="af-input-label">Name this field <span class="af-required">*</span></div>
        <input class="af-input" id="af-field-name" placeholder="New text" oninput="onAfNameInput()">
      </div>
      <div>
        <div class="af-label" id="af-checkbox-label">Add a <b>Text</b> element to the list?</div>
        <div class="af-checkbox-row">
          <div class="af-checkbox" id="af-add-el-check" onclick="toggleAfCheckbox()">
            <span class="af-checkbox-check">✓</span>
          </div>
          <div class="af-checkbox-text">Show this field's content by adding an element to the list.</div>
        </div>
        <div class="af-checkbox-row" style="margin-top:6px">
          <div class="af-checkbox" id="af-dummy-check" onclick="toggleAfDummyCheckbox()">
            <span class="af-checkbox-check">✓</span>
          </div>
          <div class="af-checkbox-text">Populate sample data for all items.</div>
        </div>
      </div>
    </div>
    <div class="af-foot">
      <button class="af-btn af-btn-cancel" onclick="closeAddFieldModal()">Cancel</button>
      <button class="af-btn af-btn-add" id="af-btn-add" onclick="confirmAddField()">Add field</button>
    </div>
  </div>
</div>

<!-- TREE PANEL -->
<div class="tree-panel" id="tree-panel">
  <div class="tp-head">Context Hierarchy <span class="tp-x" onclick="document.getElementById('tree-panel').classList.remove('open')">✕</span></div>
  <div class="tp-body" id="tp-body"></div>
</div>

<!-- ACTION BAR -->
<div class="action-bar" id="action-bar"></div>

<!-- LINK PANEL -->
<div class="link-panel" id="link-panel">
  <div class="link-panel-head">
    <div class="link-panel-title">Link to</div>
    <div class="link-panel-head-actions">
      <div class="link-panel-head-btn">?</div>
      <div class="link-panel-head-btn" onclick="closeLinkPanel()">✕</div>
    </div>
  </div>
  <div id="link-panel-content"></div>
  <div class="link-panel-foot">
    <div class="link-panel-remove">Remove Link</div>
    <div class="link-panel-foot-actions">
      <button class="link-panel-btn cancel" onclick="closeLinkPanel()">Cancel</button>
      <button class="link-panel-btn done">Done</button>
    </div>
  </div>
</div>

<!-- EDIT TEXT CONNECT PANEL -->
<div class="et-panel" id="et-panel">
  <div class="et-panel-head">
    <div class="et-panel-title">Edit Text</div>
    <div class="et-panel-close" onclick="closeEtPanel()">✕</div>
  </div>
  <div class="et-panel-body" id="et-panel-body"></div>
</div>

<!-- INSPECTOR TOGGLE -->
<div class="inspector-toggle" id="inspector-toggle" onclick="toggleInspector()"></div>

<div class="toast" id="toast"></div>

<script>
/* ── DATA ── */
const CTX_DEFS = [
  { id:'weather', name:'Weather App', icon:'', type:'object', source:'Weather App', group:'Apps',
    fields:[
      {name:'city',        type:'string',  sample:'"Tel Aviv"'},
      {name:'temperature', type:'number',  sample:'"24°C"'},
      {name:'condition',   type:'enum',    sample:'"Sunny ☀️"'},
      {name:'humidity',    type:'number',  sample:'"68%"'},
      {name:'windSpeed',   type:'number',  sample:'"14 km/h"'},
      {name:'formattedTemperature', type:'string', sample:'"24°C · feels 26°C"'},
      {name:'isCold',              type:'boolean', sample:'false'},
      {name:'weatherImage', type:'image',   sample:'[img url]'},
      {name:'link',        type:'url',     sample:'"https://weather.com/tel-aviv"'},
    ],
    contextActions:[
      {name:'refresh',       label:'Refresh data',     icon:''},
      {name:'switchUnits',   label:'Toggle °C / °F',   icon:''},
    ],
    metadata:[
      {name:'lastUpdated',   label:'Last updated',     type:'dateTime', sample:'"2 min ago"'},
      {name:'isStale',       label:'Is stale',         type:'boolean',  sample:'false'},
      {name:'dataSource',    label:'Data source',       type:'string',   sample:'"OpenWeather API"'},
    ],
    config:[
      {key:'location', label:'Location',  input:'select', options:['📍 Auto detect','✏️ Manual city']},
      {key:'units',    label:'Units',     input:'toggle', options:['°C','°F'], default:'°C'},
      {key:'refresh',  label:'Refresh',   input:'select', options:['On load only','Every 5 min','Every 15 min','Every 30 min']},
    ]},
  { id:'cms-articles', name:'Articles', icon:'', type:'list', source:'CMS', group:'CMS',
    fields:[
      {name:'itemsStatus', type:'enum', sample:'"hasItems"', enumValues:['loading','empty','hasItems']},
      {name:'items',       type:'array',   sample:'[{title, author, …}]', itemFields:[
        {name:'title',       type:'string',  sample:'"Article Title"'},
        {name:'author',      type:'string',  sample:'"Jane Doe"'},
        {name:'publishedAt', type:'dateTime',sample:'"Jan 15, 2025"'},
        {name:'category',    type:'string',  sample:'"Tech"'},
        {name:'thumbnail',   type:'image',   sample:'[img url]'},
        {name:'readTime',    type:'number',  sample:'"5 min"'},
        {name:'tags',        type:'array',   sample:'["Tech","AI","Design"]', itemFields:[
          {name:'tag value',  type:'string',  sample:'"Tech"'},
        ]},
      ]},
      {name:'title',       type:'string',  sample:'"Article Title"'},
      {name:'author',      type:'string',  sample:'"Jane Doe"'},
      {name:'publishedAt', type:'dateTime',sample:'"Jan 15, 2025"'},
      {name:'category',    type:'string',  sample:'"Tech"'},
      {name:'thumbnail',   type:'image',   sample:'[img url]'},
      {name:'readTime',    type:'number',  sample:'"5 min"'},
      {name:'tags',        type:'array',   sample:'["Tech","AI","Design"]', itemFields:[
        {name:'tag value',  type:'string',  sample:'"Tech"'},
      ]},
    ],
    itemActions:[
      {name:'navigateToItem', label:'Navigate to item page', icon:''},
      {name:'openInEditor',   label:'Open in editor',        icon:''},
      {name:'shareItem',      label:'Share item',             icon:''},
    ],
    contextActions:[
      {name:'applyFilters',  label:'Apply filters',   icon:''},
      {name:'resetFilters',  label:'Reset filters',   icon:''},
      {name:'sort',          label:'Sort',             icon:''},
      {name:'loadMore',      label:'Load more',        icon:''},
      {name:'refresh',       label:'Refresh data',     icon:''},
    ],
    metadata:[
      {name:'totalCount',    label:'Total items',        type:'number',  sample:'42'},
      {name:'currentCount',  label:'Items on page',      type:'number',  sample:'12'},
      {name:'currentPage',   label:'Current page',       type:'number',  sample:'1'},
      {name:'hasNextPage',   label:'Has next page',      type:'boolean', sample:'true'},
      {name:'isLoading',     label:'Is loading',         type:'boolean', sample:'false'},
      {name:'activeFilters', label:'Active filter count', type:'number',  sample:'2'},
    ],
    config:[
      {key:'pageSize', label:'Page size', input:'select', options:['10','20','50']},
      {key:'randomSort', label:'Random sort', input:'toggle', options:['Off','On'], default:'Off'},
    ]},
  { id:'cms-my-team', name:'My Team', icon:'', type:'list', source:'CMS', group:'CMS',
    fields:[
      {name:'name',    type:'string', sample:'"Riley Carter"'},
      {name:'role',    type:'string', sample:'"Content Crafter"'},
      {name:'tagline', type:'string', sample:'"Weaving words into wonders"'},
      {name:'image',   type:'image',  sample:'[img url]'},
    ],
    itemActions:[
      {name:'navigateToItem', label:'Navigate to item page', icon:''},
      {name:'openInEditor',   label:'Open in editor',        icon:''},
      {name:'shareItem',      label:'Share item',             icon:''},
    ],
    contextActions:[
      {name:'applyFilters',  label:'Apply filters',   icon:''},
      {name:'resetFilters',  label:'Reset filters',   icon:''},
      {name:'sort',          label:'Sort',             icon:''},
      {name:'loadMore',      label:'Load more',        icon:''},
      {name:'refresh',       label:'Refresh data',     icon:''},
    ],
    metadata:[
      {name:'totalCount',    label:'Total items',        type:'number',  sample:'3'},
      {name:'currentCount',  label:'Items on page',      type:'number',  sample:'3'},
      {name:'currentPage',   label:'Current page',       type:'number',  sample:'1'},
      {name:'hasNextPage',   label:'Has next page',      type:'boolean', sample:'false'},
      {name:'isLoading',     label:'Is loading',         type:'boolean', sample:'false'},
      {name:'activeFilters', label:'Active filter count', type:'number',  sample:'0'},
    ],
    config:[
      {key:'pageSize', label:'Page size', input:'select', options:['5','10','20']},
      {key:'sort', label:'Sort by', input:'select', options:['Name (A-Z)','Name (Z-A)','Newest first','Manual']},
    ]},
  { id:'stores-current-item', name:'Current Item', icon:'', type:'page', source:'Wix Stores', group:'Apps',
    isDynamicPageCtx: true,
    fields:[
      {name:'name',        type:'string',  sample:'"Yoga Mat"'},
      {name:'price',       type:'number',  sample:'"$49.99"'},
      {name:'image',       type:'image',   sample:'[img url]'},
      {name:'inStock',     type:'boolean', sample:'true'},
      {name:'description', type:'string',  sample:'"Premium quality…"'},
    ],
    contextActions:[],
    metadata:[],
    config:[]},
  { id:'stores', name:'Products', icon:'', type:'list', source:'Wix Stores', group:'Apps',
    fields:[
      {name:'products',    type:'array',   sample:'[{name, price, …}]'},
      {name:'name',        type:'string',  sample:'"Yoga Mat"'},
      {name:'price',       type:'number',  sample:'"$49.99"'},
      {name:'image',       type:'image',   sample:'[img url]'},
      {name:'inStock',     type:'boolean', sample:'true'},
      {name:'description', type:'string',  sample:'"Premium quality…"'},
    ],
    itemActions:[
      {name:'navigateToItem', label:'Navigate to item page', icon:''},
      {name:'openInEditor',   label:'Open in editor',        icon:''},
      {name:'shareItem',      label:'Share item',             icon:''},
    ],
    contextActions:[
      {name:'applyFilters',  label:'Apply filters',   icon:''},
      {name:'resetFilters',  label:'Reset filters',   icon:''},
      {name:'sort',          label:'Sort',             icon:''},
      {name:'loadMore',      label:'Load more',        icon:''},
      {name:'refresh',       label:'Refresh data',     icon:''},
    ],
    metadata:[
      {name:'totalCount',    label:'Total items',        type:'number',  sample:'42'},
      {name:'currentCount',  label:'Items on page',      type:'number',  sample:'12'},
      {name:'currentPage',   label:'Current page',       type:'number',  sample:'1'},
      {name:'hasNextPage',   label:'Has next page',      type:'boolean', sample:'true'},
      {name:'isLoading',     label:'Is loading',         type:'boolean', sample:'false'},
      {name:'activeFilters', label:'Active filter count', type:'number',  sample:'2'},
    ],
    config:[
      {key:'pageSize', label:'Page size', input:'select', options:['10','20','50','100']},
      {key:'currency', label:'Currency',  input:'select', options:['USD ($)','EUR (€)','GBP (£)','ILS (₪)']},
    ]},
  { id:'stores-locations', name:'Locations', icon:'', type:'list', source:'Wix Stores', group:'Apps',
    fields:[
      {name:'locations',   type:'array',   sample:'[{storeName, address, …}]'},
      {name:'storeName',   type:'string',  sample:'"Dizengoff Center"'},
      {name:'address',     type:'string',  sample:'"50 Dizengoff St, Tel Aviv"'},
      {name:'city',        type:'string',  sample:'"Tel Aviv"'},
      {name:'phone',       type:'string',  sample:'"+972-3-555-1234"'},
      {name:'openHours',   type:'string',  sample:'"9:00–21:00"'},
      {name:'hasStock',    type:'boolean', sample:'true'},
    ],
    itemActions:[
      {name:'navigateToItem', label:'Navigate to item page', icon:''},
      {name:'openInEditor',   label:'Open in editor',        icon:''},
      {name:'shareItem',      label:'Share item',             icon:''},
    ],
    contextActions:[
      {name:'applyFilters',  label:'Apply filters',   icon:''},
      {name:'resetFilters',  label:'Reset filters',   icon:''},
      {name:'sort',          label:'Sort',             icon:''},
      {name:'loadMore',      label:'Load more',        icon:''},
      {name:'refresh',       label:'Refresh data',     icon:''},
    ],
    metadata:[
      {name:'totalCount',    label:'Total items',        type:'number',  sample:'42'},
      {name:'currentCount',  label:'Items on page',      type:'number',  sample:'12'},
      {name:'currentPage',   label:'Current page',       type:'number',  sample:'1'},
      {name:'hasNextPage',   label:'Has next page',      type:'boolean', sample:'true'},
      {name:'isLoading',     label:'Is loading',         type:'boolean', sample:'false'},
      {name:'activeFilters', label:'Active filter count', type:'number',  sample:'2'},
    ],
    config:[
      {key:'radius',   label:'Search radius', input:'select', options:['5 km','10 km','25 km','50 km']},
      {key:'sortBy',   label:'Sort by',       input:'select', options:['Distance','Name','Availability']},
    ]},
  { id:'cms-categories', name:'Categories', icon:'', type:'list', source:'CMS', group:'CMS',
    fields:[
      {name:'categories', type:'array', sample:'[{name, articles, …}]', itemFields:[
        {name:'name',        type:'string', sample:'"Technology"'},
        {name:'description', type:'string', sample:'"Latest tech news…"'},
        {name:'icon',        type:'string', sample:'"💻"'},
        {name:'articleCount',type:'number', sample:'"12"'},
        {name:'articles',    type:'array',  sample:'[{title, author}]', itemFields:[
          {name:'title',       type:'string',  sample:'"AI in 2026"'},
          {name:'author',      type:'string',  sample:'"Sarah Chen"'},
          {name:'readTime',    type:'number',  sample:'"5 min"'},
          {name:'tags',        type:'array',   sample:'["Tech","AI"]', itemFields:[
            {name:'tag value',  type:'string',  sample:'"Tech"'},
          ]},
        ]},
      ]},
      {name:'name',        type:'string', sample:'"Technology"'},
      {name:'description', type:'string', sample:'"Latest tech news…"'},
      {name:'icon',        type:'string', sample:'"💻"'},
      {name:'articleCount',type:'number', sample:'"12"'},
    ],
    itemActions:[
      {name:'navigateToItem', label:'Navigate to item page', icon:''},
      {name:'openInEditor',   label:'Open in editor',        icon:''},
    ],
    contextActions:[
      {name:'applyFilters',  label:'Apply filters',   icon:''},
      {name:'resetFilters',  label:'Reset filters',   icon:''},
      {name:'sort',          label:'Sort',             icon:''},
      {name:'loadMore',      label:'Load more',        icon:''},
      {name:'refresh',       label:'Refresh data',     icon:''},
    ],
    metadata:[
      {name:'totalCount',    label:'Total items',        type:'number',  sample:'8'},
      {name:'currentCount',  label:'Items on page',      type:'number',  sample:'8'},
      {name:'isLoading',     label:'Is loading',         type:'boolean', sample:'false'},
      {name:'activeFilters', label:'Active filter count', type:'number',  sample:'0'},
    ],
    config:[
      {key:'sortBy', label:'Sort by', input:'select', options:['Name','Article count','Recent activity']},
    ]},
  { id:'system-identity', name:'Identity', icon:'', type:'object', source:'System', group:'System',
    fields:[
      {name:'memberName',  type:'string',  sample:'"John Smith"'},
      {name:'email',       type:'string',  sample:'"john@example.com"'},
      {name:'isLoggedIn',  type:'boolean', sample:'true'},
    ],
    contextActions:[
      {name:'login',     label:'Prompt login',   icon:''},
      {name:'logout',    label:'Log out',         icon:''},
      {name:'signup',    label:'Prompt signup',   icon:''},
    ],
    metadata:[
      {name:'loginStatus',  label:'Login status',    type:'string',  sample:'"authenticated"'},
      {name:'role',          label:'Member role',     type:'string',  sample:'"admin"'},
    ],
    config:[
      {key:'loginRedirect', label:'Login redirect', input:'select', options:['Stay on page','Go to dashboard','Go to home']},
    ]},
  { id:'custom-countdown', name:'UpcomingClassCountdown', icon:'', type:'object', source:'Custom Code', group:'Custom',
    customCode: true,
    fields:[
      {name:'className',     type:'string',  sample:'"Morning Yoga"'},
      {name:'timeLeft',      type:'string',  sample:'"2h 15m"'},
      {name:'startTime',     type:'dateTime',sample:'"10:00 AM"'},
      {name:'isStartingSoon',type:'boolean', sample:'true'},
      {name:'instructor',    type:'string',  sample:'"Dana L."'},
      {name:'spotsLeft',     type:'number',  sample:'"3"'},
    ],
    contextActions:[
      {name:'refresh',   label:'Refresh data',   icon:''},
      {name:'bookClass', label:'Book this class', icon:''},
    ],
    metadata:[
      {name:'lastUpdated',    label:'Last updated',     type:'dateTime', sample:'"Just now"'},
      {name:'isUrgent',       label:'Is urgent',        type:'boolean',  sample:'true'},
      {name:'dataSource',     label:'Data source',      type:'string',   sample:'"Wix Bookings"'},
    ],
    config:[
      {key:'classSource', label:'Class source', input:'select', options:['Wix Bookings','Manual schedule','External API']},
      {key:'urgencyThreshold', label:'Urgency at', input:'select', options:['30 min before','1 hour before','2 hours before']},
    ]},
];

const FN_LIBS = [
  { id:'lib-my-functions', name:'myFunctions', icon:'⚡', description:'Custom formatters & helpers',
    functions:[
      {name:'twoValuesConcat()', type:'string', sample:'"text · text"', template:'{text1} · {text2}', description:'Concatenates two text values with a separator',
        params:[
          {name:'text1', type:'string', description:'First text value', default:'text'},
          {name:'text2', type:'string', description:'Second text value', default:'text'},
        ]},
      {name:'greetUser()', type:'string', sample:'"👋 Hello, Dana!"', template:'👋 Hello, {name}!', description:'Creates a personalized greeting',
        params:[
          {name:'name', type:'string', description:'User display name', default:'text'},
        ]},
    ]},
  { id:'lib-formatting', name:'Formatting', icon:'', description:'Date, number & text formatting',
    functions:[
      {name:'formatDate()',   type:'string',  sample:'"Feb 22, 2026"',  description:'Formats a date value'},
      {name:'formatCurrency()', type:'string', sample:'"$49.99"',       description:'Formats a number as currency'},
      {name:'capitalize()',   type:'string',  sample:'"Hello World"',   description:'Capitalizes text'},
      {name:'truncate()',     type:'string',  sample:'"Lorem ipsum…"',  description:'Truncates text to length'},
    ]},
  { id:'lib-commerce', name:'Commerce', icon:'', description:'Pricing, stock & cart utilities',
    functions:[
      {name:'calcDiscount()', type:'number', sample:'"$39.99"',   description:'Calculates discounted price'},
      {name:'getSavings()',   type:'number', sample:'"$10.00"',   description:'Returns amount saved'},
      {name:'getStockStatus()', type:'string', sample:'"In Stock"', description:'Returns stock label'},
      {name:'isInStock()',    type:'boolean', sample:'true',       description:'Checks stock availability'},
    ]},
  { id:'lib-utils', name:'Utils', icon:'', description:'General purpose helpers',
    functions:[
      {name:'getGreeting()',  type:'string',  sample:'"Good morning!"', description:'Time-based greeting'},
      {name:'getTimeAgo()',   type:'string',  sample:'"2 hours ago"',   description:'Relative time string'},
      {name:'generateId()',   type:'string',  sample:'"abc123"',        description:'Generates unique ID'},
    ]},
  { id:'lib-validation', name:'Validation', icon:'', description:'Input & data validation',
    functions:[
      {name:'isEmail()',      type:'boolean', sample:'true',            description:'Validates email format'},
      {name:'isRequired()',   type:'boolean', sample:'false',           description:'Checks if value exists'},
      {name:'minLength()',    type:'boolean', sample:'true',            description:'Checks minimum length'},
    ]},
];

const FN_DEFS = FN_LIBS.flatMap(lib =>
  lib.functions.map((fn, i) => ({
    id: lib.id + '-' + i,
    name: fn.name,
    icon: '</>',
    type: 'function',
    source: lib.name,
    libId: lib.id,
    params: fn.params || null,
    fields: [{ name: fn.name.replace('()',''), type: fn.type, sample: fn.sample, template: fn.template || null, params: fn.params || null }],
  }))
);

function findSource(id) {
  return CTX_DEFS.find(c => c.id === id) || S.ctxInstanceDefs.find(c => c.id === id) || FN_DEFS.find(f => f.id === id) || findFnLib(id) || null;
}

function getScopedFields(ctxId, elId) {
  const def = EL_DEFS[elId];
  if (!def) return null;

  const scopedRepId = def.scopedTo;
  if (!scopedRepId) return null;

  const repDef = EL_DEFS[scopedRepId];
  if (!repDef || !repDef.isNestedRepeater) return null;

  const binding = S.bindings[scopedRepId + '|Items'];
  if (!binding) return null;

  const ctx = findSource(binding.ctxId);
  if (!ctx) return null;

  const scopePath = binding.scope;
  if (!scopePath) return null;

  const parts = scopePath.split('.');
  let currentFields = ctx.fields;
  for (const part of parts) {
    const arrayField = currentFields.find(f => f.name === part && f.type === 'array');
    if (!arrayField || !arrayField.itemFields) return null;
    currentFields = arrayField.itemFields;
  }

  const boundField = currentFields.find(f => f.name === binding.fieldName && f.type === 'array');
  if (boundField && boundField.itemFields) {
    return { fields: boundField.itemFields, scope: scopePath + '.' + binding.fieldName, ctxId: binding.ctxId };
  }

  return null;
}

function findArrayFieldDeep(fields, fieldName) {
  const direct = fields.find(f => f.name === fieldName && f.type === 'array');
  if (direct) return { field: direct, path: [fieldName] };
  for (const f of fields) {
    if (f.type === 'array' && f.itemFields) {
      const nested = findArrayFieldDeep(f.itemFields, fieldName);
      if (nested) return { field: nested.field, path: [f.name, ...nested.path] };
    }
  }
  return null;
}

function getElementScope(elId) {
  const def = EL_DEFS[elId];
  if (!def) return null;

  if (def.scopedTo) {
    const scoped = getScopedFields(null, elId);
    if (scoped) return scoped;
  }

  const repDef = def.isNestedRepeater ? def : null;
  if (repDef && repDef.parentRepeater) {
    const parentBinding = S.bindings[repDef.parentRepeater + '|Items'];
    if (parentBinding && parentBinding.scope) {
      const ctx = findSource(parentBinding.ctxId);
      if (!ctx) return null;
      const parts = parentBinding.scope.split('.');
      let fields = ctx.fields;
      for (const part of parts) {
        const af = fields.find(f => f.name === part && f.type === 'array');
        if (!af || !af.itemFields) return null;
        fields = af.itemFields;
      }
      return { fields, scope: parentBinding.scope, ctxId: parentBinding.ctxId };
    }
  }

  if (def.repTemplate) {
    const sectionId = def.section;
    const repeaterId = Object.keys(EL_DEFS).find(id => {
      const d = EL_DEFS[id];
      return d.isRepeater && d.section === sectionId;
    });
    if (repeaterId) {
      const binding = S.bindings[repeaterId + '|Items'];
      if (binding) {
        const ctx = findSource(binding.ctxId);
        if (ctx) {
          const result = findArrayFieldDeep(ctx.fields, binding.fieldName);
          if (result && result.field.itemFields) {
            return {
              fields: result.field.itemFields,
              scope: result.path.join(' › '),
              ctxId: binding.ctxId,
              boundFieldName: binding.fieldName,
              ctxName: ctx.name
            };
          }
        }
      }
    }
  }

  return null;
}

function findFnLib(id) {
  const lib = FN_LIBS.find(l => l.id === id);
  if (!lib) return null;
  return {
    id: lib.id,
    name: lib.name,
    icon: lib.icon,
    type: 'library',
    source: 'Functions',
    fields: lib.functions.map(fn => ({
      name: fn.name,
      type: fn.type,
      sample: fn.sample,
      description: fn.description,
      template: fn.template || null,
      params: fn.params || null
    }))
  };
}

const IMG_PLACEHOLDER = "data:image/png;base64,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";
const IMG_SKY = "data:image/jpeg;base64,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";

const EL_DEFS = {
  'el-img':       {name:'Image',         type:'Image',   section:'sec-hero',     props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-btn':       {name:'Button',        type:'Button',  section:'sec-hero',     props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'},{k:'Visible',t:'boolean'}]},
  'el-countdown': {name:'Countdown Text',type:'Text',    section:'sec-hero',     props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-city':      {name:'City Text',     type:'Text',    section:'sec-weather',  props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-temp':      {name:'Temperature',   type:'Text',    section:'sec-weather',  props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-cond':      {name:'Condition',     type:'Text',    section:'sec-weather',  props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-weather-img':{name:'Weather Image',  type:'Image',   section:'sec-weather', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-snowman':   {name:'Snowman Icon',  type:'Icon',    section:'sec-weather', props:[{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  // Repeater (bindable to a list context field)
  'repeater-articles': {name:'Repeater', type:'Repeater', section:'sec-articles', isRepeater:true,
    props:[{k:'Items',t:'list'}]},
  // Repeater items (template — binding applies to all)
  'rep-item-1':    {name:'Item 1',       type:'RepItem', section:'sec-articles', isRepItem:true, props:[]},
  'rep-item-2':    {name:'Item 2',       type:'RepItem', section:'sec-articles', isRepItem:true, props:[]},
  'rep-item-3':    {name:'Item 3',       type:'RepItem', section:'sec-articles', isRepItem:true, props:[]},
  'el-art-title-1':{name:'Title',        type:'Text',    section:'sec-articles', repTemplate:'el-art-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-title-2':{name:'Title',        type:'Text',    section:'sec-articles', repTemplate:'el-art-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-title-3':{name:'Title',        type:'Text',    section:'sec-articles', repTemplate:'el-art-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-author-1':{name:'Author',      type:'Text',    section:'sec-articles', repTemplate:'el-art-author', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-author-2':{name:'Author',      type:'Text',    section:'sec-articles', repTemplate:'el-art-author', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-author-3':{name:'Author',      type:'Text',    section:'sec-articles', repTemplate:'el-art-author', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-art-thumb-1':{name:'Thumbnail',    type:'Image',   section:'sec-articles', repTemplate:'el-art-thumb', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  'el-art-thumb-2':{name:'Thumbnail',    type:'Image',   section:'sec-articles', repTemplate:'el-art-thumb', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  'el-art-thumb-3':{name:'Thumbnail',    type:'Image',   section:'sec-articles', repTemplate:'el-art-thumb', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  'el-art-cat-1':  {name:'Category',     type:'Text',    section:'sec-articles', repTemplate:'el-art-cat', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-art-cat-2':  {name:'Category',     type:'Text',    section:'sec-articles', repTemplate:'el-art-cat', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-art-cat-3':  {name:'Category',     type:'Text',    section:'sec-articles', repTemplate:'el-art-cat', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-art-time-1': {name:'Read Time',    type:'Text',    section:'sec-articles', repTemplate:'el-art-time', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-art-time-2': {name:'Read Time',    type:'Text',    section:'sec-articles', repTemplate:'el-art-time', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-art-time-3': {name:'Read Time',    type:'Text',    section:'sec-articles', repTemplate:'el-art-time', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'sec-hero':     {name:'Section · Hero',     type:'Section',  isContainer:true, props:[]},
  'sec-weather':  {name:'Section · Weather',  type:'Section',  isContainer:true, props:[]},
  'sec-articles': {name:'Section · Articles', type:'Section',  isContainer:true, props:[]},
  'sec-empty':    {name:'Section · Empty',    type:'Section',  isContainer:true, props:[]},
  // Items List page
  'sec-items':    {name:'Section · Items',    type:'Section',  isContainer:true, page:'items-list', props:[]},
  'el-items-title':{name:'Page Title',  type:'Text',    section:'sec-items', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'repeater-items':{name:'Repeater',    type:'Repeater',section:'sec-items', isRepeater:true, props:[{k:'Items',t:'list'}]},
  'rep-item-s1':  {name:'Item 1',       type:'RepItem', section:'sec-items', isRepItem:true, props:[]},
  'rep-item-s2':  {name:'Item 2',       type:'RepItem', section:'sec-items', isRepItem:true, props:[]},
  'rep-item-s3':  {name:'Item 3',       type:'RepItem', section:'sec-items', isRepItem:true, props:[]},
  'rep-item-s4':  {name:'Item 4',       type:'RepItem', section:'sec-items', isRepItem:true, props:[]},
  'el-item-img-1':{name:'Product Image',type:'Image',   section:'sec-items', repTemplate:'el-item-img', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-img-2':{name:'Product Image',type:'Image',   section:'sec-items', repTemplate:'el-item-img', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-img-3':{name:'Product Image',type:'Image',   section:'sec-items', repTemplate:'el-item-img', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-img-4':{name:'Product Image',type:'Image',   section:'sec-items', repTemplate:'el-item-img', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-title-1':{name:'Product Name',type:'Text',   section:'sec-items', repTemplate:'el-item-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-item-title-2':{name:'Product Name',type:'Text',   section:'sec-items', repTemplate:'el-item-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-item-title-3':{name:'Product Name',type:'Text',   section:'sec-items', repTemplate:'el-item-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-item-title-4':{name:'Product Name',type:'Text',   section:'sec-items', repTemplate:'el-item-title', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-item-desc-1':{name:'Description', type:'Text',    section:'sec-items', repTemplate:'el-item-desc', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-desc-2':{name:'Description', type:'Text',    section:'sec-items', repTemplate:'el-item-desc', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-desc-3':{name:'Description', type:'Text',    section:'sec-items', repTemplate:'el-item-desc', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-desc-4':{name:'Description', type:'Text',    section:'sec-items', repTemplate:'el-item-desc', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-item-btn-1':{name:'CTA Button',   type:'Button',  section:'sec-items', repTemplate:'el-item-btn', props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'},{k:'Visible',t:'boolean'}]},
  'el-item-btn-2':{name:'CTA Button',   type:'Button',  section:'sec-items', repTemplate:'el-item-btn', props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'},{k:'Visible',t:'boolean'}]},
  'el-item-btn-3':{name:'CTA Button',   type:'Button',  section:'sec-items', repTemplate:'el-item-btn', props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'},{k:'Visible',t:'boolean'}]},
  'el-item-btn-4':{name:'CTA Button',   type:'Button',  section:'sec-items', repTemplate:'el-item-btn', props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'},{k:'Visible',t:'boolean'}]},
  'page-rel-detail':{name:'Page · Product Item', type:'Page', isPage:true, page:'item-relationship', props:[]},
  'sec-rel-product':{name:'Section · Product Info', type:'Section', isContainer:true, page:'item-relationship', parentPage:'page-rel-detail', props:[]},
  'el-rel-title':   {name:'Item Title',       type:'Text',  section:'sec-rel-product', props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}]},
  'el-rel-desc':    {name:'Item Description', type:'Text',  section:'sec-rel-product', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-rel-img':     {name:'Item Image',       type:'Image', section:'sec-rel-product', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'sec-rel-locations':{name:'Section · Store Locations', type:'Section', isContainer:true, page:'item-relationship', parentPage:'page-rel-detail', props:[]},
  'el-rel-loc-title':{name:'Section Title',   type:'Text',  section:'sec-rel-locations', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'repeater-rel-locations':{name:'Repeater',   type:'Repeater', section:'sec-rel-locations', isRepeater:true, props:[{k:'Items',t:'list'}]},
  'rep-rel-loc-1':  {name:'Location 1',       type:'RepItem', section:'sec-rel-locations', isRepItem:true, props:[]},
  'rep-rel-loc-2':  {name:'Location 2',       type:'RepItem', section:'sec-rel-locations', isRepItem:true, props:[]},
  'rep-rel-loc-3':  {name:'Location 3',       type:'RepItem', section:'sec-rel-locations', isRepItem:true, props:[]},
  // Multi-State Box page
  'sec-msb':           {name:'Section · Articles', type:'Section', isContainer:true, page:'msb-demo', props:[]},
  'msb-articles':      {name:'Multi-State Container', type:'MultiStateBox', section:'sec-msb', isMultiState:true,
    stateBinding: {ctxId:'cms-articles', fieldName:'itemsStatus'},
    views: [
      {id:'loading',  name:'Loading',   enumValues:['loading']},
      {id:'empty',    name:'Empty',     enumValues:['empty']},
      {id:'hasItems', name:'Has Items', enumValues:['hasItems']},
    ],
    activeView:'hasItems',
    props:[{k:'Active State',t:'enum'}]},
  'el-msb-loading-text':  {name:'Loading Text',    type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'loading',  props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-empty-title':   {name:'Empty Title',     type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'empty',    props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-empty-btn':     {name:'Browse Button',   type:'Button', section:'sec-msb', msbParent:'msb-articles', msbView:'empty',    props:[{k:'Label',t:'string'},{k:'Click Action',t:'action'}]},
  'repeater-msb-items':   {name:'Repeater',         type:'Repeater', section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', isRepeater:true, props:[{k:'Items',t:'list'}]},
  'rep-msb-item-1':       {name:'Article 1',        type:'RepItem', section:'sec-msb', isRepItem:true, props:[]},
  'rep-msb-item-2':       {name:'Article 2',        type:'RepItem', section:'sec-msb', isRepItem:true, props:[]},
  'el-msb-item-title-1':  {name:'Article Title',    type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-title', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-item-title-2':  {name:'Article Title',    type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-title', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-item-author-1': {name:'Article Author',   type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-author', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-item-author-2': {name:'Article Author',   type:'Text',   section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-author', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-msb-item-thumb-1':  {name:'Thumbnail',        type:'Image',  section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-thumb', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  'el-msb-item-thumb-2':  {name:'Thumbnail',        type:'Image',  section:'sec-msb', msbParent:'msb-articles', msbView:'hasItems', repTemplate:'el-msb-item-thumb', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  // Repeater Usecases page
  'sec-ruc-articles':    {name:'Section · Articles List', type:'Section', isContainer:true, page:'repeater-usecases', props:[]},
  'repeater-ruc-articles':{name:'Repeater',     type:'Repeater', section:'sec-ruc-articles', isRepeater:true, props:[{k:'Items',t:'list'}]},
  'rep-ruc-art-1':  {name:'Article 1',    type:'RepItem', section:'sec-ruc-articles', isRepItem:true, props:[]},
  'rep-ruc-art-2':  {name:'Article 2',    type:'RepItem', section:'sec-ruc-articles', isRepItem:true, props:[]},
  'rep-ruc-art-3':  {name:'Article 3',    type:'RepItem', section:'sec-ruc-articles', isRepItem:true, props:[]},
  'el-ruc-art-title-1':  {name:'Article Title', type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-title', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-art-title-2':  {name:'Article Title', type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-title', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-art-title-3':  {name:'Article Title', type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-title', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-art-author-1': {name:'Author',        type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-author', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-art-author-2': {name:'Author',        type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-author', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-art-author-3': {name:'Author',        type:'Text', section:'sec-ruc-articles', repTemplate:'el-ruc-art-author', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'sec-ruc-tags':        {name:'Section · Article Tags', type:'Section', isContainer:true, page:'repeater-usecases', props:[]},
  'repeater-ruc-tags':   {name:'Repeater',      type:'Repeater', section:'sec-ruc-tags', isRepeater:true, props:[{k:'Items',t:'list'}]},
  'rep-ruc-tag-1':  {name:'Tag 1',        type:'RepItem', section:'sec-ruc-tags', isRepItem:true, props:[]},
  'rep-ruc-tag-2':  {name:'Tag 2',        type:'RepItem', section:'sec-ruc-tags', isRepItem:true, props:[]},
  'rep-ruc-tag-3':  {name:'Tag 3',        type:'RepItem', section:'sec-ruc-tags', isRepItem:true, props:[]},
  'rep-ruc-tag-4':  {name:'Tag 4',        type:'RepItem', section:'sec-ruc-tags', isRepItem:true, props:[]},
  'el-ruc-tag-val-1':    {name:'Tag Value',     type:'Text', section:'sec-ruc-tags', repTemplate:'el-ruc-tag-val', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-tag-val-2':    {name:'Tag Value',     type:'Text', section:'sec-ruc-tags', repTemplate:'el-ruc-tag-val', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-tag-val-3':    {name:'Tag Value',     type:'Text', section:'sec-ruc-tags', repTemplate:'el-ruc-tag-val', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-ruc-tag-val-4':    {name:'Tag Value',     type:'Text', section:'sec-ruc-tags', repTemplate:'el-ruc-tag-val', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  // Demo page
  'sec-demo-empty':      {name:'Section · Empty',  type:'Section', isContainer:true, page:'demo', props:[]},
  'sec-demo-team':       {name:'Section · Team',   type:'Section', isContainer:true, page:'demo', props:[]},
  'el-demo-team-title':  {name:'Team Title',       type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-team-subtitle':{name:'Team Subtitle',   type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-img-1': {name:'Member Image',    type:'Image',   section:'sec-demo-team', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-img-2': {name:'Member Image',    type:'Image',   section:'sec-demo-team', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-img-3': {name:'Member Image',    type:'Image',   section:'sec-demo-team', props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-name-1':{name:'Member Name',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-name-2':{name:'Member Name',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-name-3':{name:'Member Name',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-role-1':{name:'Member Role',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-role-2':{name:'Member Role',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-role-3':{name:'Member Role',     type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-tag-1': {name:'Member Tagline',  type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-tag-2': {name:'Member Tagline',  type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-demo-member-tag-3': {name:'Member Tagline',  type:'Text',    section:'sec-demo-team', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'sec-d262-weather':    {name:'Section · Weather', type:'Section', isContainer:true, page:'demo262', props:[]},
  'sec-d262-empty1':     {name:'Section · Empty',   type:'Section', isContainer:true, page:'demo262', props:[]},
  'sec-d262-empty2':     {name:'Section · Empty',   type:'Section', isContainer:true, page:'demo262', props:[]},
  'el-d262-weather-img': {name:'Weather Image',     type:'Image',   section:'sec-d262-weather', props:[{k:'Source',t:'image'},{k:'Visible',t:'boolean'}]},
  'el-d262-city':        {name:'City',              type:'Text',    section:'sec-d262-weather', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-d262-temp':        {name:'Temperature',       type:'Text',    section:'sec-d262-weather', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},
  'el-d262-cond':        {name:'Condition',          type:'Text',    section:'sec-d262-weather', props:[{k:'Value',t:'string'},{k:'Visible',t:'boolean'}]},

};

const S = {
  sel: null,
  inspectorOpen: false,
  tab: 'settings',
  openCats: {context:true, properties:true, visibility:true},
  ctxMap: {
    'sec-hero':     ['custom-countdown'],
    'sec-weather':  ['weather'],
    'sec-articles': [],
    'sec-empty':    [],
    'sec-items':       [],
    'page-rel-detail': ['stores-current-item'],
    'sec-rel-product': ['stores-current-item'],
    'sec-rel-locations': ['stores-current-item', 'stores-locations'],
    'sec-msb':          ['cms-articles'],
    'sec-ruc-articles': ['cms-articles'],
    'sec-ruc-tags':     ['cms-articles'],
    'sec-demo-team':    ['cms-my-team'],
    'sec-demo-empty':   [],
    'sec-d262-weather': ['weather'],
    'sec-d262-empty1':  [],
    'sec-d262-empty2':  [],
  },
  primaryCtx: {
    'page-rel-detail': ['stores-current-item'],
    'sec-rel-product': ['stores-current-item'],
    'sec-rel-locations': ['stores-current-item'],
  },
  ctxAliases: {},  // {sectionId: {ctxId: aliasName}}
  removedInherited: {},  // {sectionId: [ctxId, ...]} — tracks inherited contexts removed by user
  ctxRelationships: {
    'stores-locations': {linkedTo: 'stores-current-item', label: 'Filtered by current product', active: true},
  },
  ctxInstanceDefs: [],
  ctxInstanceMeta: {},
  bindings: {
    'el-city|Value':      {ctxId:'weather',          fieldName:'city',        sample:'"Tel Aviv"'},
    'el-city|Link':       {ctxId:'weather',          fieldName:'link',        sample:'"https://weather.com/tel-aviv"'},
    'el-temp|Value':      {ctxId:'weather',          fieldName:'temperature', sample:'"24°C"'},
    'el-countdown|Value': {ctxId:'custom-countdown', fieldName:'timeLeft',    sample:'"20:45:11"'},
    'el-cond|Value': {ctxId:'lib-my-functions', fieldName:'twoValuesConcat', sample:'"text · text"', fnHasParams:true,
      fnTemplate:'{text1} · {text2}',
      fnParams:[{name:'text1',type:'string',description:'First text value'},{name:'text2',type:'string',description:'Second text value'}]},
    'el-cond|Value|param:text1': {ctxId:'weather', fieldName:'city', sample:'"Tel Aviv"'},
    'el-cond|Value|param:text2': {static:true, value:'Sunny'},
    'el-rel-title|Value':    {ctxId:'stores-current-item', fieldName:'name',        sample:'"Sunny Day Tee"'},
    'el-rel-desc|Value':     {ctxId:'stores-current-item', fieldName:'description', sample:'"Classic cotton tee…"'},
    'el-rel-img|Source':     {ctxId:'stores-current-item', fieldName:'image',       sample:'[img url]'},
    'repeater-rel-locations|Items':{ctxId:'stores-locations', fieldName:'locations', sample:'[{storeName, address, …}]'},
    'msb-articles|Active State':    {ctxId:'cms-articles', fieldName:'itemsStatus', sample:'"hasItems"'},
    'repeater-msb-items|Items':    {ctxId:'cms-articles', fieldName:'items', sample:'[{title, author, …}]'},
    'el-msb-item-title-1|Value':   {ctxId:'cms-articles', fieldName:'title',     sample:'"Article Title"'},
    'el-msb-item-title-2|Value':   {ctxId:'cms-articles', fieldName:'title',     sample:'"Article Title"'},
    'el-msb-item-author-1|Value':  {ctxId:'cms-articles', fieldName:'author',    sample:'"Jane Doe"'},
    'el-msb-item-author-2|Value':  {ctxId:'cms-articles', fieldName:'author',    sample:'"Jane Doe"'},
    'el-msb-item-thumb-1|Source':  {ctxId:'cms-articles', fieldName:'thumbnail', sample:'[img url]'},
    'el-msb-item-thumb-2|Source':  {ctxId:'cms-articles', fieldName:'thumbnail', sample:'[img url]'},
    'repeater-ruc-articles|Items': {ctxId:'cms-articles',   fieldName:'items', sample:'[{title, author, …}]'},
    'el-ruc-art-title-1|Value':    {ctxId:'cms-articles',   fieldName:'title',    sample:'"Article Title"'},
    'el-ruc-art-title-2|Value':    {ctxId:'cms-articles',   fieldName:'title',    sample:'"Article Title"'},
    'el-ruc-art-title-3|Value':    {ctxId:'cms-articles',   fieldName:'title',    sample:'"Article Title"'},
    'el-ruc-art-author-1|Value':   {ctxId:'cms-articles',   fieldName:'author',   sample:'"Jane Doe"'},
    'el-ruc-art-author-2|Value':   {ctxId:'cms-articles',   fieldName:'author',   sample:'"Jane Doe"'},
    'el-ruc-art-author-3|Value':   {ctxId:'cms-articles',   fieldName:'author',   sample:'"Jane Doe"'},
    'repeater-ruc-tags|Items':     {ctxId:'cms-articles',   fieldName:'tags',     sample:'["Tech","AI","Design"]'},
    'el-ruc-tag-val-1|Value':      {ctxId:'cms-articles',   fieldName:'tag value', sample:'"Tech"'},
    'el-ruc-tag-val-2|Value':      {ctxId:'cms-articles',   fieldName:'tag value', sample:'"Tech"'},
    'el-ruc-tag-val-3|Value':      {ctxId:'cms-articles',   fieldName:'tag value', sample:'"Tech"'},
    'el-ruc-tag-val-4|Value':      {ctxId:'cms-articles',   fieldName:'tag value', sample:'"Tech"'},
    'el-demo-member-img-1|Source':  {ctxId:'cms-my-team', fieldName:'image',   sample:'[img url]'},
    'el-demo-member-img-2|Source':  {ctxId:'cms-my-team', fieldName:'image',   sample:'[img url]'},
    'el-demo-member-img-3|Source':  {ctxId:'cms-my-team', fieldName:'image',   sample:'[img url]'},
    'el-demo-member-name-1|Value': {ctxId:'cms-my-team', fieldName:'name',    sample:'"Riley Carter"'},
    'el-demo-member-name-2|Value': {ctxId:'cms-my-team', fieldName:'name',    sample:'"Maya Ramirez"'},
    'el-demo-member-name-3|Value': {ctxId:'cms-my-team', fieldName:'name',    sample:'"Ali Torel"'},
    'el-demo-member-role-1|Value': {ctxId:'cms-my-team', fieldName:'role',    sample:'"Content Crafter"'},
    'el-demo-member-role-2|Value': {ctxId:'cms-my-team', fieldName:'role',    sample:'"Analytics Ace"'},
    'el-demo-member-role-3|Value': {ctxId:'cms-my-team', fieldName:'role',    sample:'"Social Superstar"'},
    'el-demo-member-tag-1|Value':  {ctxId:'cms-my-team', fieldName:'tagline', sample:'"Weaving words into wonders"'},
    'el-demo-member-tag-2|Value':  {ctxId:'cms-my-team', fieldName:'tagline', sample:'"Decoding the data jungle"'},
    'el-demo-member-tag-3|Value':  {ctxId:'cms-my-team', fieldName:'tagline', sample:'"Ruling the social realm"'},
    'el-d262-city|Value':          {ctxId:'weather', fieldName:'city',        sample:'"Tel Aviv"'},
    'el-d262-temp|Value':          {ctxId:'weather', fieldName:'temperature', sample:'"24°C"'},
  },
  // static typed values per element+prop
  staticValues: {
    'el-btn|Label':        'Click me',
    'el-cond|Value':       'This is a Title',
    'el-snowman|Alt Text':  'snowman-cold weather',
    'el-art-title|Value':  'Article Title',
    'el-art-author|Value': 'Author name',
  },
  dd: {open:false, elId:null, propKey:null, paramName:null, step:'source', srcId:null, fieldName:null},
  modal: {target:null, selId:null},
  ctxSettingsView: null,
  productMode: false,
  specPageOpen: false,
  specPageId: null,
  preSpecPage: null,
  currentPage: 'Demo 26.2',
  currentItemIdx: 0,
  sortRules: [],
  filterRules: [],
};

/* ── ELEMENT SELECTION ── */
function pillNavDesign(sectionId) {
  S.sel = sectionId;
  S.ctxSettingsView = null;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(sectionId);
  if (n) n.classList.add('sel');
  S.tab = 'design';
  renderRP();
}

function navToSectionCtx(elId, e) {
  if (e) e.stopPropagation();
  const def = EL_DEFS[elId];
  const sectionId = def?.section || def?.parentPage || elId;
  pillNavCtx(sectionId);
}

function pillNavCtx(sectionId) {
  S.sel = sectionId;
  S.ctxSettingsView = null;
  S.inspectorOpen = true;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(sectionId);
  if (n) n.classList.add('sel');
  S.tab = 'settings';
  S.openCats.context = true;
  renderRP();
  renderActionBar();
}

function navToPageCtx(pageId) {
  S.sel = pageId;
  S.ctxSettingsView = null;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(pageId);
  if (n) n.classList.add('sel');
  S.tab = 'settings';
  S.openCats.context = true;
  renderRP();
  toast('Viewing page-level context');
}

function elPillNavDesign(e, elId) {
  e.stopPropagation();
  S.sel = elId;
  S.ctxSettingsView = null;
  S.inspectorOpen = true;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(elId);
  if (n) n.classList.add('sel');
  S.tab = 'design';
  renderRP();
  renderActionBar();
}

function elPillNavCtx(e, elId) {
  e.stopPropagation();
  S.sel = elId;
  S.ctxSettingsView = null;
  S.inspectorOpen = true;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(elId);
  if (n) n.classList.add('sel');
  S.tab = 'settings';
  renderRP();
  renderActionBar();
}

function buildBindTagHTML(elId, ctxLabel) {
  const def = EL_DEFS[elId];
  const typeName = def ? def.type : 'Element';
  const bindIcon = `<svg class="el-bind-icon" width="8" height="8" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 6l-1.2 1.2a2.5 2.5 0 0 1-3.6-3.4L6.4 2.6a2.5 2.5 0 0 1 3.5 0l.1.1"/><path d="M6 10l1.2-1.2a2.5 2.5 0 0 1 3.6 3.4l-1.2 1.2a2.5 2.5 0 0 1-3.5 0l-.1-.1"/></svg>`;
  return `<span class="el-bind-sec" onclick="elPillNavDesign('${elId}')">${typeName}</span><span class="el-bind-sep"></span><span class="el-bind-ctx" onclick="elPillNavCtx('${elId}')">${bindIcon} ${ctxLabel}</span>`;
}

const ACTION_BAR_ICONS = {
  link: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',
  comment: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>',
  help: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>',
  settings: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>',
  more: '<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="5" cy="12" r="2"/><circle cx="12" cy="12" r="2"/><circle cx="19" cy="12" r="2"/></svg>',
  chevronRight: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>',
  chevronLeft: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>'
};

const ACTION_BAR_CONFIG = {
  Text:     [{label:'Edit Text', action:'actionEditText'}, {type:'textDesign'}],
  Button:   [{label:'Edit Button'}, {label:'Design Button', action:'actionDesign'}],
  Image:    [{label:'Change Image', action:'actionChangeImage'}, {label:'Design Image', action:'actionDesign'}],
  Icon:     [{label:'Change Icon'}, {label:'Design Icon', action:'actionDesign'}],
  Section:  [{label:'Design Section', action:'actionDesign'}],
  Repeater: [{label:'Manage Repeater'}, {label:'Design Repeater', action:'actionDesign'}],
  RepItem:  [{label:'Design Item', action:'actionDesign'}],
  Page:     [{label:'Design Page', action:'actionDesign'}],
};

function updateInspectorToggle() {
  const toggle = document.getElementById('inspector-toggle');
  toggle.innerHTML = S.inspectorOpen ? ACTION_BAR_ICONS.chevronRight : ACTION_BAR_ICONS.chevronLeft;
  toggle.style.right = S.inspectorOpen ? 'calc(var(--panel) + 12px)' : '12px';
}

function renderActionBar() {
  const bar = document.getElementById('action-bar');
  if (!S.sel || S.inspectorOpen) { bar.classList.remove('open'); updateInspectorToggle(); return; }
  const def = EL_DEFS[S.sel];
  if (!def) { bar.classList.remove('open'); updateInspectorToggle(); return; }
  const actions = ACTION_BAR_CONFIG[def.type];
  if (!actions) { bar.classList.remove('open'); updateInspectorToggle(); return; }

  const chevronSvg = '<svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 5 5 9 1"/></svg>';
  let html = '';
  actions.forEach((a, i) => {
    if (i > 0) html += '<div class="action-bar-sep"></div>';
    if (a.type === 'textDesign') {
      html += `<div class="ab-dropdown">Instrument Sans ${chevronSvg}</div>`;
      html += `<div class="ab-dropdown">64 ${chevronSvg}</div>`;
      html += `<div class="ab-link" onclick="openLinkPanel()">${ACTION_BAR_ICONS.link} Link</div>`;
      html += '<div class="action-bar-sep"></div>';
      html += '<div style="display:flex;align-items:center;padding:0 8px"><div class="ab-color" style="background:var(--t1)"></div></div>';
    } else {
      const click = a.action ? ` onclick="${a.action}()"` : '';
      html += `<div class="action-bar-text"${click}>${a.label}</div>`;
    }
  });
  html += '<div class="action-bar-sep"></div>';
  html += `<div class="action-bar-icon">${ACTION_BAR_ICONS.comment}</div>`;
  html += `<div class="action-bar-icon">${ACTION_BAR_ICONS.help}</div>`;
  html += `<div class="action-bar-icon" onclick="actionSettings()">${ACTION_BAR_ICONS.settings}</div>`;
  html += `<div class="action-bar-icon">${ACTION_BAR_ICONS.more}</div>`;

  bar.innerHTML = html;
  bar.classList.add('open');
  updateInspectorToggle();
}


function exitTextEditing() {
  const prev = document.querySelector('.val[contenteditable="true"]');
  if (!prev) return;
  const elId = prev.id.replace('v-', '');
  const tpl = EL_DEFS[elId]?.repTemplate || elId;
  const val = prev.textContent.trim();
  S.staticValues[tpl + '|Value'] = val;
  prev.removeEventListener('input', onInlineInput);
  prev.removeEventListener('keydown', onInlineKeydown);
  prev.contentEditable = 'false';
  prev.closest('.c-el-text')?.classList.remove('editing');
  if (!val) {
    prev.textContent = propPlaceholder('Value');
    prev.classList.remove('static');
  } else {
    prev.classList.add('static');
  }
}

function actionEditText() {
  if (!S.sel) return;
  const def = EL_DEFS[S.sel];
  if (!def || def.type !== 'Text') return;
  openEtPanel();
}

function openEtPanel() {
  closeEtPanel();
  renderEtPanel();
  document.getElementById('et-panel').classList.add('open');
}

function closeEtPanel() {
  document.getElementById('et-panel').classList.remove('open');
}

function renderEtPanel() {
  const elId = S.sel;
  if (!elId) return;
  const def = EL_DEFS[elId];
  if (!def) return;

  const bindSvg = '<svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/></svg>';

  const valueBind = S.bindings[elId + '|Value'];
  const valueCtx = valueBind ? findSource(valueBind.ctxId) : null;
  const tpl = def.repTemplate || elId;
  const staticVal = S.staticValues[tpl + '|Value'] || '';

  let html = '';

  html += `<div class="et-panel-row">
    <div class="et-panel-label">Text</div>
    <div class="et-panel-input-wrap ${valueBind ? 'bound' : ''}">
      <input class="et-panel-input" placeholder="This is a title" value="${staticVal}" oninput="onEtPanelInput('${elId}',this.value)">
      <div class="et-panel-bound-tag">
        <span class="et-panel-bound-tag-ctx">${valueCtx ? valueCtx.name : ''}</span>
        <span class="et-panel-bound-tag-field">${valueBind ? valueBind.fieldName : ''}<span class="et-panel-bound-tag-x" onclick="etPanelUnbind('${elId}','Value',event)">✕</span></span>
      </div>
      <div class="et-panel-bind ${valueBind ? 'bound' : ''}" onclick="etPanelConnect('${elId}','Value',event)" title="Connect to data">
        ${bindSvg}
      </div>
    </div>
  </div>`;

  if (valueBind?.fnHasParams && valueBind.fnParams) {
    const paramCount = valueBind.fnParams.length;
    const bkey = elId + '|Value';
    const filledCount = valueBind.fnParams.filter(p => S.bindings[`${bkey}|param:${p.name}`]).length;
    const allFilled = filledCount === paramCount;
    html += `<div class="et-panel-params-link" onclick="actionSettings()" style="${allFilled ? 'color:var(--grn)' : ''}">
      <span>⚡</span>
      <span class="et-params-count">${paramCount} parameter${paramCount > 1 ? 's' : ''}</span>
      <span>·</span>
      <span>Configure →</span>
    </div>`;
  }

  document.getElementById('et-panel-body').innerHTML = html;
}

function onEtPanelInput(elId, val) {
  const tpl = EL_DEFS[elId]?.repTemplate || elId;
  S.staticValues[tpl + '|Value'] = val;
  updateCanvasStatic(elId, 'Value', val);
  const propInput = document.querySelector(`#pr-${elId}-Value .prop-static`);
  if (propInput) propInput.value = val;
}

function etPanelConnect(elId, propKey, e) {
  e.stopPropagation();
  openDd(e, elId, propKey);
}

function etPanelUnbind(elId, propKey, e) {
  e.stopPropagation();
  unbind(elId, propKey, e);
  renderEtPanel();
}

function actionSettings() {
  if (!S.sel) return;
  S.inspectorOpen = true;
  S.tab = 'settings';
  renderRP();
  renderActionBar();
}

function actionDesign() {
  if (!S.sel) return;
  S.inspectorOpen = true;
  S.tab = 'design';
  renderRP();
  renderActionBar();
}

function actionChangeImage() {
  if (!S.sel) return;
  const hasBinding = Object.keys(S.bindings).some(k => k.startsWith(S.sel + '|'));
  if (hasBinding) {
    S.inspectorOpen = true;
    S.tab = 'settings';
    renderRP();
    renderActionBar();
  } else {
    document.getElementById('ci-modal').classList.add('open');
  }
}

function closeChangeImage() {
  document.getElementById('ci-modal').classList.remove('open');
}

function openLinkPanel() {
  closeLinkPanel();
  const contentEl = document.getElementById('link-panel-content');
  const bindKey = S.sel + '|Link';
  const binding = S.bindings[bindKey];

  const tabsHtml = `<div class="link-panel-tabs">
    <div class="link-panel-tab${!binding?' active':''}"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="4" width="16" height="16" rx="2"/><line x1="4" y1="9" x2="20" y2="9"/><line x1="9" y1="4" x2="9" y2="9"/></svg></div>
    <div class="link-panel-tab"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="2" y="7" width="20" height="10" rx="2"/><line x1="6" y1="17" x2="6" y2="21"/><line x1="18" y1="17" x2="18" y2="21"/><line x1="2" y1="12" x2="22" y2="12"/></svg></div>
    <div class="link-panel-tab"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg></div>
    <div class="link-panel-tab"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="5" y="3" width="14" height="18" rx="2"/><line x1="9" y1="7" x2="15" y2="7"/><line x1="9" y1="11" x2="15" y2="11"/><line x1="9" y1="15" x2="12" y2="15"/></svg></div>
    <div class="link-panel-tab${binding?' active':''}"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/></svg></div>
    <div class="link-panel-tab"><svg viewBox="0 0 24 24" fill="currentColor"><circle cx="5" cy="12" r="1.5"/><circle cx="12" cy="12" r="1.5"/><circle cx="19" cy="12" r="1.5"/></svg></div>
  </div>`;

  let bodyHtml;
  if (binding) {
    const ctx = CTX_DEFS.find(c => c.id === binding.ctxId);
    const ctxName = ctx ? ctx.name : binding.ctxId;
    const ctxIcon = ctx ? ctx.icon : '';
    bodyHtml = `<div class="link-panel-body">${tabsHtml}
      <div class="link-panel-label">Link</div>
      <div class="link-panel-bound">
        <div class="link-panel-bound-info">
          <div class="link-panel-bound-source">${ctxIcon} ${ctxName}</div>
          <div class="link-panel-bound-chip">${binding.fieldName} <span class="link-panel-bound-chip-x" onclick="unbindLinkAndRefresh()">✕</span></div>
        </div>
        <div class="link-panel-bound-icon"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/></svg></div>
      </div>
    </div>`;
  } else {
    bodyHtml = `<div class="link-panel-body">${tabsHtml}
      <div><div class="link-panel-label">Page</div>
      <div class="link-panel-select" style="margin-top:8px"><span>Select page</span><svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 5 5 9 1"/></svg></div></div>
      <div><div class="link-panel-label">Choose how it opens</div>
      <div class="link-panel-toggle" style="margin-top:8px"><div class="link-panel-toggle-btn active">Current tab</div><div class="link-panel-toggle-btn">New tab</div></div></div>
      <div class="link-panel-adv">Advanced SEO Settings<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg></div>
    </div>`;
  }

  contentEl.innerHTML = bodyHtml;
  document.getElementById('link-panel').classList.add('open');
}

function unbindLinkAndRefresh() {
  delete S.bindings[S.sel + '|Link'];
  openLinkPanel();
  renderRP();
}

function closeLinkPanel() {
  document.getElementById('link-panel').classList.remove('open');
}

function selEl(e, id) {
  e.stopPropagation();
  if (S.sel === id) {
    const def = EL_DEFS[id];
    if (def && def.type === 'Text' && !S.bindings[id + '|Value']) {
      startInlineEdit(id);
    }
    return;
  }
  exitTextEditing();
  closeLinkPanel();
  closeEtPanel();
  S.sel = id;
  S.ctxSettingsView = null;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  const n = document.getElementById(id);
  if (n) n.classList.add('sel');
  const def = EL_DEFS[id];
  S.tab = 'design';
  renderRP();
  renderActionBar();
}

function startInlineEdit(elId) {
  exitTextEditing();
  const domEl = document.getElementById(elId);
  const valEl = document.getElementById('v-' + elId);
  if (!domEl || !valEl) return;
  const bkey = elId + '|Value';
  const currentVal = S.staticValues[bkey] || '';
  if (!currentVal) valEl.textContent = '';
  domEl.classList.add('editing');
  valEl.contentEditable = 'true';
  valEl.focus();
  if (valEl.textContent) {
    const range = document.createRange();
    range.selectNodeContents(valEl);
    range.collapse(false);
    const sel = window.getSelection();
    sel.removeAllRanges();
    sel.addRange(range);
  }
  valEl.addEventListener('input', onInlineInput);
  valEl.addEventListener('keydown', onInlineKeydown);
}

function onInlineInput(e) {
  const valEl = e.target;
  const elId = valEl.id.replace('v-', '');
  const tpl = EL_DEFS[elId]?.repTemplate || elId;
  const val = valEl.textContent;
  S.staticValues[tpl + '|Value'] = val;
  const propInput = document.querySelector(`#pr-${elId}-Value .prop-static`);
  if (propInput) propInput.value = val;
}

function onInlineKeydown(e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    exitTextEditing();
  }
  if (e.key === 'Escape') {
    exitTextEditing();
  }
}

function canvasClick(e) {
  if (e.target === document.getElementById('canvas') || e.target.classList.contains('canvas-grid') || e.target.classList.contains('canvas-inner')) {
    exitTextEditing();
    closeLinkPanel();
    closeEtPanel();
    S.sel = null;
    document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
    renderRP();
    renderActionBar();
  }
  closeDd();
}

/* ── RIGHT PANEL ── */
function toggleInspector() {
  S.inspectorOpen = !S.inspectorOpen;
  renderRP();
  renderActionBar();
}

function renderRP() {
  const rpEl = document.getElementById('rp');
  const rp = document.getElementById('rp-inner');
  const canvasEl = document.getElementById('canvas');
  if (!S.inspectorOpen) { rpEl.classList.remove('open'); if (window._resetCanvasPan) window._resetCanvasPan(); rp.innerHTML = ''; return; }
  if (!S.sel) {
    rpEl.classList.add('open');
    rp.innerHTML = `<div id="rp-body" style="display:flex;align-items:center;justify-content:center;height:100%;padding:32px">
      <div style="text-align:center;color:var(--t3)">
        <div style="font-size:28px;margin-bottom:12px;opacity:.4">🔍</div>
        <div style="font-size:13px;font-weight:500;color:var(--t2)">No element selected</div>
        <div style="font-size:11px;margin-top:4px;line-height:1.5">Click an element on the canvas<br>to inspect its properties.</div>
      </div>
    </div>`;
    return;
  }
  rpEl.classList.add('open');
  const def = EL_DEFS[S.sel];
  if (!def) return;

  const tabs = def.isRepItem ? ['Settings'] : def.isMultiState ? ['Design','Settings'] : ['Design','Animations','Settings'];
  if (!tabs.map(t=>t.toLowerCase()).includes(S.tab)) S.tab = 'settings';

  rp.innerHTML = `
    <div class="rp-head">
      <div class="rp-el-name">${def.name}</div>
      <div class="rp-el-type">${def.type}${def.repTemplate ? ' <span style="color:var(--acc);font-size:9px;font-family:\'DM Mono\',monospace;margin-left:4px">TEMPLATE</span>' : ''}${def.msbView ? ` <span style="color:var(--acc);font-size:9px;font-family:'DM Mono',monospace;margin-left:4px">VIEW: ${def.msbView.toUpperCase()}</span>` : ''}</div>
    </div>
    <div class="rp-tabs">
      ${tabs.map(t=>`<div class="rp-tab ${S.tab===t.toLowerCase()?'active':''}" onclick="switchTab('${t.toLowerCase()}')">${t}</div>`).join('')}
    </div>
    <div class="rp-body" id="rp-body"></div>
  `;
  renderBody();
}

function switchTab(t) { S.tab = t; S.ctxSettingsView = null; renderRP(); }

function toggleCat(cat) {
  S.openCats[cat] = !S.openCats[cat];
  const el = document.getElementById('rp-cat-' + cat);
  if (el) el.classList.toggle('open', S.openCats[cat]);
}

function renderBody() {
  const body = document.getElementById('rp-body');
  if (!body) return;
  if (S.tab==='design')     { body.innerHTML = renderDesign(); return; }
  if (S.tab==='animations') { body.innerHTML = renderAnims(); return; }
  if (S.tab==='settings')   { body.innerHTML = renderSettings(); return; }
}

/* ── DESIGN TAB ── */
function renderDesign() {
  const def = EL_DEFS[S.sel];
  if (def && def.type === 'Image') return renderDesignImage();
  return renderDesignDefault();
}

function renderDesignDefault() {
  return `
  <div class="ps"><div class="ps-lbl">Typography</div>
    <div class="d-row"><span class="d-lbl">Font</span><select class="d-inp" style="width:120px"><option>Syne</option><option>DM Sans</option><option>Inter</option></select></div>
    <div class="d-row"><span class="d-lbl">Size</span><input class="d-inp" value="24px" style="width:80px"></div>
    <div class="d-row"><span class="d-lbl">Weight</span><div class="seg"><span class="seg-b">L</span><span class="seg-b on">R</span><span class="seg-b">M</span><span class="seg-b">B</span></div></div>
    <div class="d-row"><span class="d-lbl">Color</span><div style="display:flex;gap:5px"><div class="swatch" style="background:#e4e4f0"></div><input class="d-inp" value="#E4E4F0" style="width:80px"></div></div>
  </div>
  <div class="ps"><div class="ps-lbl">Layout</div>
    <div class="d-row"><span class="d-lbl">Padding</span><input class="d-inp" value="16px" style="width:80px"></div>
    <div class="d-row"><span class="d-lbl">Align</span><div class="seg"><span class="seg-b on">⬅</span><span class="seg-b">⬛</span><span class="seg-b">➡</span></div></div>
  </div>`;
}

function renderDesignImage() {
  return `
  <div class="di-align-bar">
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="4" y1="4" x2="4" y2="20"/><rect x="8" y="7" width="8" height="10" rx="1"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="12" y1="4" x2="12" y2="20"/><rect x="5" y="7" width="6" height="10" rx="1"/><rect x="13" y="7" width="6" height="10" rx="1"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="20" y1="4" x2="20" y2="20"/><rect x="8" y="7" width="8" height="10" rx="1"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><path d="M4 6h16M4 10h16M4 14h10"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="4" y1="4" x2="4" y2="20"/><line x1="20" y1="4" x2="20" y2="20"/><rect x="9" y="7" width="6" height="10" rx="1"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="4" y1="20" x2="20" y2="20"/><rect x="8" y="6" width="8" height="10" rx="1"/></svg></div>
    <div class="di-align-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="4" y1="4" x2="4" y2="20"/><line x1="20" y1="4" x2="20" y2="20"/><line x1="4" y1="12" x2="20" y2="12"/><rect x="9" y="9" width="6" height="6" rx="1"/></svg></div>
  </div>

  <div class="di-section">
    <div class="di-toggle-row">
      <span class="di-label">Scale properties</span>
      <div class="tog on" onclick="this.classList.toggle('on')"></div>
    </div>
  </div>

  <div class="di-divider"></div>

  <div class="di-section">
    <div class="di-collapse-row">
      <span class="di-label">Fill color & opacity</span>
      <svg class="di-collapse-arrow" viewBox="0 0 10 6" fill="currentColor"><polygon points="0,0 10,0 5,6"/></svg>
    </div>

    <div class="di-sub-label">Background</div>
    <div class="di-slider-row">
      <div class="swatch" style="background:#000;width:36px;height:36px;border-radius:6px"></div>
      <div class="di-range-wrap">
        <input type="range" class="di-range" min="0" max="100" value="0">
      </div>
      <div class="di-val-box"><input class="di-val-input" value="0"><span class="di-val-unit">%</span></div>
    </div>

    <div class="di-sub-label" style="margin-top:16px">Image opacity</div>
    <div class="di-slider-row">
      <div class="di-range-wrap" style="flex:1">
        <input type="range" class="di-range di-range-blue" min="0" max="100" value="100">
      </div>
      <div class="di-val-box"><input class="di-val-input" value="100"><span class="di-val-unit">%</span></div>
    </div>

    <div class="di-sub-label" style="margin-top:16px">Blend mode</div>
    <div class="di-select">
      <span>Normal</span>
      <svg viewBox="0 0 10 6" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 5 5 9 1"/></svg>
    </div>
  </div>

  <div class="di-divider"></div>

  <div class="di-collapse-row di-nav-row">
    <span class="di-label">Border</span>
    <svg class="di-nav-arrow" viewBox="0 0 8 14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 7 7 1 13"/></svg>
  </div>
  <div class="di-divider"></div>
  <div class="di-collapse-row di-nav-row">
    <span class="di-label">Corners</span>
    <svg class="di-nav-arrow" viewBox="0 0 8 14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 7 7 1 13"/></svg>
  </div>
  <div class="di-divider"></div>
  <div class="di-collapse-row di-nav-row">
    <span class="di-label">Shadow</span>
    <svg class="di-nav-arrow" viewBox="0 0 8 14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 1 7 7 1 13"/></svg>
  </div>`;
}

/* ── ANIMATIONS TAB ── */
function renderAnims() {
  return `<div class="ps"><div class="ps-lbl">Animations</div>
    ${[['▶','Entrance','Fade In'],['⏸','Loop','None'],['◼','Exit','None'],['🖱','Hover','Scale Up']].map(([ic,nm,sub])=>`
    <div class="anim-r">
      <span style="font-size:13px;width:18px;text-align:center">${ic}</span>
      <div><div style="font-size:12px;color:var(--t1)">${nm}</div><div style="font-size:10px;color:var(--t3);font-family:'DM Mono',monospace">${sub}</div></div>
      <span class="anim-add">+ Add</span>
    </div>`).join('')}
  </div>
  <div class="ps"><div class="ps-lbl">Scroll Effects</div>
    <div class="tog-row"><span class="tog-lbl">Parallax</span><div class="tog" onclick="this.classList.toggle('on')"></div></div>
    <div class="tog-row"><span class="tog-lbl">Fade on scroll</span><div class="tog on" onclick="this.classList.toggle('on')"></div></div>
  </div>`;
}

/* ── SETTINGS TAB ── */
function renderSettings() {
  const def = EL_DEFS[S.sel];
  if (def.isRepeater) {
    const bkey = S.sel + '|Items';
    const b = S.bindings[bkey];
    const ctx = b ? findSource(b.ctxId) : null;
    const isActiveDd = S.dd.open && S.dd.elId === S.sel && S.dd.propKey === 'Items';
    return `<div class="ps"><div class="ps-lbl">Data Source</div>
      <div class="prop-wrap">
        <div class="prop-key" style="font-size:11px;color:var(--t2);padding:0 2px">Items</div>
        <div class="prop-row ${b?'bound':''} ${isActiveDd?'active-bind':''}">
          <div class="prop-main">
            <div class="prop-val">
              ${b && ctx
                ? `<div class="prop-bound-chip prop-bound-detail" style="display:flex">
                    <span class="prop-bound-ctx" onclick="navToSectionCtx('${S.sel}',event)">${ctx.icon} ${ctx.name}</span>
                    <span class="prop-bound-field">${b.fieldName}<span class="chip-x" onclick="unbind('${S.sel}','Items',event)">✕</span></span>
                  </div>`
                : `<span style="font-size:11px;color:var(--t3);font-style:italic">Connect to an array field →</span>`}
            </div>
          </div>
          <div class="bind-btn" onclick="openDd(event,'${S.sel}','Items')" title="Connect to array">
            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
              <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
            </svg>
          </div>
        </div>
      </div>
    </div>
    <div class="ps"><div class="ps-lbl">Layout</div>
      <div class="tog-row"><span class="tog-lbl">Show dividers</span><div class="tog" onclick="this.classList.toggle('on')"></div></div>
      <div class="tog-row"><span class="tog-lbl">Alternate rows</span><div class="tog" onclick="this.classList.toggle('on')"></div></div>
    </div>`;
  }
  if (def.isMultiState) {
    const bkey = S.sel + '|Active State';
    const b = S.bindings[bkey];
    const ctx = b ? findSource(b.ctxId) : null;
    const ctxField = ctx ? ctx.fields.find(f => f.name === b.fieldName && f.type === 'enum') : null;
    const enumVals = ctxField?.enumValues || [];
    const views = def.views || [];
    const activeView = def.activeView || views[0]?.id;
    const isActiveDd = S.dd.open && S.dd.elId === S.sel && S.dd.propKey === 'Active State';
    const advancedOn = def._advancedMapping;

    const hasViews = views.length > 0;
    const isBound = !!b;

    const stateCards = views.map((v, idx) => {
      const isActive = v.id === activeView;
      const mappedStates = v.enumValues || [];
      const disabled = isBound && mappedStates.length === 0;
      const sharedCount = mappedStates.length;
      const displayName = isBound && sharedCount > 0 ? mappedStates[0].charAt(0).toUpperCase() + mappedStates[0].slice(1) : v.name;
      const canDelete = disabled || !isBound;
      return `<div style="display:flex;align-items:center;gap:8px;padding:6px 8px;border-radius:6px;cursor:pointer;transition:.12s;${disabled ? 'opacity:.5;border:1px dashed var(--b2);background:none' : isActive ? 'background:var(--acc-d);border:1px solid var(--acc)' : 'background:var(--sur2);border:1px solid var(--b1)'}" onclick="switchMsbView(event,'${v.id}')">
        <span style="font-size:10px;color:${disabled ? 'var(--t3)' : isActive ? 'var(--acc)' : 'var(--t3)'}">◫</span>
        <div style="flex:1;min-width:0">
          <div style="display:flex;align-items:center;gap:6px">
            <span style="font-size:12px;font-weight:${isActive && !disabled ? '600' : '400'};color:${disabled ? 'var(--t3)' : isActive ? 'var(--acc)' : 'var(--t1)'}${disabled ? ';text-decoration:line-through' : ''}">${displayName}</span>
            ${isBound && sharedCount > 1 ? '<span class="type-badge" style="font-size:8px;background:var(--yel);color:#000">joined</span>' : ''}
            ${disabled ? '<span style="font-size:9px;color:var(--t3);font-family:\'DM Mono\',monospace">unmapped</span>' : ''}
          </div>
        </div>
        ${isActive && !disabled ? '<span style="font-size:9px;color:var(--acc);font-family:\'DM Mono\',monospace">editing</span>' : ''}
        ${canDelete && views.length > 1 ? `<span style="font-size:10px;color:var(--t3);cursor:pointer;padding:2px 4px;border-radius:4px;transition:.12s" onmouseover="this.style.color='var(--err,#e84393)';this.style.background='var(--err-d,#fce4ec)'" onmouseout="this.style.color='var(--t3)';this.style.background=''" onclick="deleteMsbView(event,'${v.id}')">✕</span>` : ''}
      </div>`;
    }).join('');

    const joinViewCards = views.map(v => {
      const mapped = v.enumValues || [];
      const disabled = isBound && mapped.length === 0;
      const isActive = v.id === activeView;
      const chips = mapped.map(val =>
        `<span draggable="true" ondragstart="msbDragStart(event,'${val}')" style="display:inline-flex;align-items:center;gap:3px;padding:2px 8px;background:${isActive ? 'var(--acc)' : 'var(--acc-d)'};border:1px solid var(--acc);border-radius:10px;font-size:10px;color:${isActive ? '#fff' : 'var(--acc)'};font-family:'DM Mono',monospace;cursor:grab"><svg width="6" height="10" viewBox="0 0 6 10" style="opacity:.5;flex-shrink:0"><circle cx="1.5" cy="1.5" r="1" fill="currentColor"/><circle cx="4.5" cy="1.5" r="1" fill="currentColor"/><circle cx="1.5" cy="5" r="1" fill="currentColor"/><circle cx="4.5" cy="5" r="1" fill="currentColor"/><circle cx="1.5" cy="8.5" r="1" fill="currentColor"/><circle cx="4.5" cy="8.5" r="1" fill="currentColor"/></svg>${val}${mapped.length > 1 ? `<span style="cursor:pointer;opacity:.6;margin-left:2px" onclick="msbUnassign(event,'${v.id}','${val}')">✕</span>` : ''}</span>`
      ).join('');
      return `<div class="msb-drop-zone" data-view-id="${v.id}" onclick="switchMsbView(event,'${v.id}')" ondragover="msbDragOver(event)" ondragleave="msbDragLeave(event)" ondrop="msbDrop(event,'${v.id}')" style="padding:8px 10px;border:2px ${disabled ? 'dashed color-mix(in srgb, var(--acc) 25%, var(--b2))' : isActive ? 'solid var(--acc)' : 'solid var(--b1)'};border-radius:8px;background:${disabled ? 'color-mix(in srgb, var(--acc) 3%, var(--sur))' : isActive ? 'var(--acc-d)' : 'var(--sur2)'};cursor:pointer;transition:border-color .15s,background .15s,opacity .15s">
        <div style="font-size:11px;font-weight:500;color:${disabled ? 'var(--t3)' : isActive ? 'var(--acc)' : 'var(--t1)'};margin-bottom:${disabled ? '0' : '4'}px;display:flex;align-items:center;gap:6px">◫ ${v.name} ${isActive && !disabled ? '<span style="font-size:9px;font-weight:400;font-family:\'DM Mono\',monospace;color:var(--acc)">editing</span>' : ''}${disabled ? '<span style="font-size:9px;font-weight:400;font-family:\'DM Mono\',monospace;color:color-mix(in srgb, var(--acc) 50%, var(--t3))">drag a state here</span>' : ''}</div>
        ${chips ? `<div style="display:flex;flex-wrap:wrap;gap:4px;align-items:center">${chips}</div>` : ''}
      </div>`;
    }).join('');

    let disconnectedBanner = '';
    if (!isBound && hasViews) {
      disconnectedBanner = `<div style="display:flex;align-items:center;gap:8px;padding:8px 10px;background:color-mix(in srgb, var(--yel) 12%, var(--sur));border:1px solid color-mix(in srgb, var(--yel) 30%, var(--b1));border-radius:8px;margin-bottom:8px">
        <span style="font-size:14px">⚠️</span>
        <div style="flex:1">
          <div style="font-size:11px;font-weight:500;color:var(--t1)">Not connected to data</div>
          <div style="font-size:10px;color:var(--t3);line-height:1.4">Views won't switch automatically. Connect a states field to activate.</div>
        </div>
      </div>`;
    }

    return `<div class="ps"><div class="ps-lbl">Active State</div>
      ${disconnectedBanner}
      <div class="prop-wrap">
        <div class="prop-key" style="font-size:11px;color:var(--t2);padding:0 2px">Active State</div>
        <div class="prop-row ${b?'bound':''} ${isActiveDd?'active-bind':''}">
          <div class="prop-main">
            <div class="prop-val">
              ${b && ctx
                ? `<div class="prop-bound-chip prop-bound-detail" style="display:flex">
                    <span class="prop-bound-ctx" onclick="navToSectionCtx('${S.sel}',event)">${ctx.icon} ${ctx.name}</span>
                    <span class="prop-bound-field">${b.fieldName}<span class="chip-x" onclick="unbind('${S.sel}','Active State',event)">✕</span></span>
                  </div>`
                : `<span style="font-size:11px;color:var(--t3);font-style:italic">Connect to a states field →</span>`}
            </div>
          </div>
          <div class="bind-btn" onclick="openDd(event,'${S.sel}','Active State')" title="Connect to states field">
            <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
              <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
            </svg>
          </div>
        </div>
      </div>
    </div>
    ${hasViews ? `<div class="ps"><div class="ps-lbl">States</div>
      <div style="font-size:10px;color:var(--t3);line-height:1.4;padding:2px 0 6px">${isBound ? 'Click to switch view on canvas. Drag states between views to group them.' : 'Your designs are preserved. Click to preview each view.'}</div>
      <div style="display:flex;flex-direction:column;gap:6px">${joinViewCards}</div>
      ${isBound && views.length < enumVals.length ? `<div style="text-align:center;padding:6px 0 0"><span style="font-size:10px;color:var(--acc);cursor:pointer;text-decoration:underline" onclick="msbResetJoins(event)">Reset — undo all joins</span></div>` : ''}
    </div>` : ''}`;
  }
  if (def.isRepItem) {
    const idx = parseInt(S.sel.split('-').pop());
    return `<div class="ps">
      <div class="ps-lbl">Repeater Item ${idx}</div>
      <div style="font-size:11px;color:var(--t3);line-height:1.8;padding:4px 0">
        Select elements inside to bind them.<br>
        <span style="color:var(--acc)">Bindings apply to all items as a template.</span>
      </div>
    </div>`;
  }
  if (def.isPage) {
    return renderSettingsWithCategories(def, `
      <div style="font-size:11px;color:var(--t3);line-height:1.8;padding:4px 0">
        This is a dynamic item page.<br>
        Context attached at the page level is inherited by all sections within.
      </div>`, '');
  }
  if (def.isContainer) {
    return renderSettingsWithCategories(def, '', '');
  }
  const mainProps = def.props.filter(p => p.k !== 'Visible');
  const visibleProp = def.props.find(p => p.k === 'Visible');
  const templateNote = def.repTemplate ? `<div style="font-size:10px;color:var(--acc);font-family:'DM Mono',monospace;padding:0 0 7px;opacity:.8">↳ Binding applies to all 3 items</div>` : '';
  const propsHtml = `${templateNote}${mainProps.map(p => renderPropRow(S.sel, p)).join('')}`;
  const visHtml = renderVisibleProp(S.sel, visibleProp);
  return renderSettingsWithCategories(def, propsHtml, visHtml);
}

function renderSettingsWithCategories(def, propsHtml, visHtml) {
  const showCtx = def.isContainer || def.isPage;
  let html = '';

  if (showCtx) {
    const ctxTarget = (def.isMultiState) ? def.section : S.sel;
    const ctxCount = (S.ctxMap[ctxTarget] || []).length;
    const ctxContent = S.ctxSettingsView ? renderCtxSettings(S.ctxSettingsView) : renderCtxList();
    html += `<div class="rp-cat ${S.openCats.context ? 'open' : ''}" id="rp-cat-context">
      <div class="rp-cat-head" onclick="toggleCat('context')">
        <span class="rp-cat-chevron">›</span>
        <span class="rp-cat-title">Context${ctxCount ? ' (' + ctxCount + ')' : ''}</span>
      </div>
      <div class="rp-cat-body" style="padding:0">${ctxContent}</div>
    </div>`;
  }

  if (propsHtml) {
    html += `<div class="rp-cat ${S.openCats.properties ? 'open' : ''}" id="rp-cat-properties">
      <div class="rp-cat-head" onclick="toggleCat('properties')">
        <span class="rp-cat-chevron">›</span>
        <span class="rp-cat-title">Properties</span>
      </div>
      <div class="rp-cat-body">${propsHtml}</div>
    </div>`;
  }

  if (visHtml) {
    html += `<div class="rp-cat ${S.openCats.visibility ? 'open' : ''}" id="rp-cat-visibility">
      <div class="rp-cat-head" onclick="toggleCat('visibility')">
        <span class="rp-cat-chevron">›</span>
        <span class="rp-cat-title">Visibility</span>
      </div>
      <div class="rp-cat-body">${visHtml}</div>
    </div>`;
  }

  return html;
}

/* ── PROP ROW (binding controller) ── */
function renderPropRow(elId, prop) {
  const bkey = `${elId}|${prop.k}`;
  const b = S.bindings[bkey];
  const isBound = !!b;
  const ctx = isBound ? findSource(b.ctxId) : null;
  const chipLabel = ctx ? `${ctx.name} · ${b.fieldName}` : '';
  const isActiveDd = S.dd.open && S.dd.elId === elId && S.dd.propKey === prop.k;
  // get current static value to restore into input
  // for Value/Label props, fall back to canvas element's current text
  let staticVal = S.staticValues[bkey] || '';
  if (!staticVal && !isBound && (prop.k === 'Value' || prop.k === 'Label')) {
    const canvasEl = document.getElementById('v-' + elId);
    if (canvasEl) staticVal = canvasEl.textContent.trim();
  }

  // Image prop: render thumbnail controller
  if (prop.t === 'image') {
    return renderImgPropRow(elId, prop.k, isBound, isActiveDd, ctx, b);
  }

  const fnParamsHtml = (isBound && b.fnHasParams && b.fnParams) ? renderFnParams(elId, prop.k, b) : '';

  return `<div class="prop-wrap" id="pr-${elId}-${prop.k.replace(/\s/g,'_')}">
    <div class="prop-key">${prop.k}</div>
    <div class="prop-row-wrap">
      <div class="prop-row ${isBound?'bound':''} ${isActiveDd?'active-bind':''}">
        <div class="prop-main">
          <div class="prop-val">
            <input class="prop-static" placeholder="${propPlaceholder(prop.k)}" value="${staticVal}"
                   oninput="onStaticInput('${elId}','${prop.k}',this.value)">
            ${isBound && ctx ? `<div class="prop-bound-chip prop-bound-detail">
              <span class="prop-bound-ctx" onclick="navToSectionCtx('${elId}',event)">${ctx.icon} ${ctx.name}</span>
              <span class="prop-bound-field">${b.fieldName}<span class="chip-x" onclick="unbind('${elId}','${prop.k}',event)">✕</span></span>
            </div>` : `<span class="prop-bound-chip"><span class="chip-x" onclick="unbind('${elId}','${prop.k}',event)">✕</span></span>`}
          </div>
        </div>
      </div>
      <div class="bind-btn ${isBound?'bound':''}" onclick="openDd(event,'${elId}','${prop.k}')" title="Connect to context">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
          <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
        </svg>
      </div>
    </div>
    ${fnParamsHtml}
  </div>`;
}

function renderFnParams(elId, propKey, binding) {
  const params = binding.fnParams || [];
  if (!params.length) return '';
  const paramRows = params.map(p => {
    const paramBKey = `${elId}|${propKey}|param:${p.name}`;
    const pb = S.bindings[paramBKey];
    const isBoundCtx = pb && !pb.static;
    const isStatic = pb && pb.static;
    const pCtx = isBoundCtx ? findSource(pb.ctxId) : null;
    const isParamActiveDd = S.dd.open && S.dd.elId === elId && S.dd.propKey === propKey && S.dd.paramName === p.name;
    const staticVal = isStatic ? pb.value.replace(/"/g,'&quot;') : '';
    let innerHtml;
    if (isBoundCtx && pCtx) {
      innerHtml = `<div class="prop-bound-chip prop-bound-detail" style="display:flex">
        <span class="prop-bound-ctx" onclick="navToSectionCtx('${elId}',event)">${pCtx.icon} ${pCtx.name}</span>
        <span class="prop-bound-field">${pb.fieldName}<span class="chip-x" onclick="unbindParam('${elId}','${propKey}','${p.name}',event)">✕</span></span>
      </div>`;
    } else {
      innerHtml = `<input class="fn-param-input${isStatic ? ' has-value' : ''}" type="text" value="${staticVal}" placeholder="Type value or connect →" oninput="setParamStatic('${elId}','${propKey}','${p.name}',this.value)" onblur="onParamBlur('${elId}','${propKey}')" onkeydown="if(event.key==='Enter'){this.blur()}" />`;
    }
    return `<div class="fn-param-wrap" id="pr-${elId}-${propKey.replace(/\s/g,'_')}-param-${p.name}">
      <div class="fn-param-key">${p.name}</div>
      <div class="fn-param-row ${isBoundCtx?'bound':''} ${isParamActiveDd?'active-bind':''}">
        <div class="prop-main">
          <div class="prop-val">
            ${innerHtml}
          </div>
        </div>
        <div class="bind-btn" onclick="openParamDd(event,'${elId}','${propKey}','${p.name}')" title="Connect parameter">
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
            <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
          </svg>
        </div>
      </div>
    </div>`;
  }).join('');
  return `<div class="fn-params">
    <div class="fn-params-header">
      <span class="fn-params-label">Parameters</span>
    </div>
    ${paramRows}
  </div>`;
}

/* ── VISIBLE PROP: bind-only (boolean) ── */
function renderVisibleProp(elId, prop) {
  if (!prop) return '';
  const bkey = `${elId}|Visible`;
  const b = S.bindings[bkey];
  const ctx = b ? findSource(b.ctxId) : null;
  const isActiveDd = S.dd.open && S.dd.elId === elId && S.dd.propKey === 'Visible';

  if (b && ctx) {
    return `<div class="prop-wrap">
      <div class="prop-key">Render condition</div>
      <div class="prop-row-wrap">
        <div class="prop-row bound ${isActiveDd?'active-bind':''}" style="background:var(--grn-d)">
          <div class="prop-main">
            <div class="prop-val">
              <div class="prop-bound-chip prop-bound-detail" style="display:flex">
                <span class="prop-bound-ctx" onclick="navToSectionCtx('${elId}',event)">${ctx.icon} ${ctx.name}</span>
                <span class="prop-bound-field">${b.fieldName}<span class="chip-x" onclick="unbind('${elId}','Visible',event)">✕</span></span>
              </div>
            </div>
          </div>
        </div>
        <div class="bind-btn bound" onclick="openDd(event,'${elId}','Visible')" title="Change binding">
          <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
            <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
          </svg>
        </div>
      </div>
    </div>`;
  }
  return `<div class="prop-wrap">
    <div class="prop-key">Render condition</div>
    <div class="prop-row-wrap">
      <div class="prop-row ${isActiveDd?'active-bind':''}">
        <div class="prop-main">
          <div class="prop-val">
            <span style="font-size:11px;color:var(--t3);font-family:'DM Mono',monospace;font-style:italic">
              Connect to a boolean field →
            </span>
          </div>
        </div>
      </div>
      <div class="bind-btn" onclick="openDd(event,'${elId}','Visible')" title="Connect boolean">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">
          <circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>
        </svg>
      </div>
    </div>
  </div>`;
}

function propPlaceholder(key) {
  const map = {
    'Value':'This is a title', 'Source':'Image URL…', 'Label':'Button label…',
    'Alt Text':'Alt text…', 'Link':'https://…', 'Click Action':'Select action…'
  };
  return map[key] || 'Set value…';
}

function onStaticInput(elId, propKey, val) {
  const bkey = `${elId}|${propKey}`;
  S.staticValues[bkey] = val;
  updateCanvasStatic(elId, propKey, val);
}

function updateCanvasStatic(elId, propKey, val) {
  // only update Value/Label props, not Source/Alt etc.
  if (!['Value','Label'].includes(propKey)) return;
  const domEl = document.getElementById(elId);
  if (!domEl) return;
  const valEl = document.getElementById('v-'+elId);
  // text element
  if (valEl && domEl.classList.contains('c-el-text')) {
    valEl.textContent = val || propPlaceholder(propKey);
    valEl.style.color = val ? 'var(--t1)' : '';
    valEl.style.fontFamily = val ? "'Syne', sans-serif" : '';
    valEl.style.fontSize = val ? '15px' : '';
    valEl.classList.toggle('static', !!val);
  }
  // button label
  const btnEl = domEl.querySelector('.c-el-btn');
  if (btnEl && propKey === 'Label') {
    btnEl.textContent = val || 'Click me';
    btnEl.classList.remove('bound');
    btnEl.style.background = val ? 'var(--acc)' : '';
    btnEl.style.color = val ? '#fff' : '';
  }
}

function unbind(elId, propKey, e) {
  e.stopPropagation();
  const bkey = `${elId}|${propKey}`;
  const oldBinding = S.bindings[bkey];
  if (oldBinding?.fnHasParams && oldBinding.fnParams) {
    oldBinding.fnParams.forEach(p => delete S.bindings[`${bkey}|param:${p.name}`]);
  }
  delete S.bindings[bkey];
  applyBindingToCanvas(elId, propKey, null);
  toast('Binding removed');
  updatePropRowDOM(elId, propKey);
  const def = EL_DEFS[elId];
  if (def?.isMultiState) { refreshMsbState(); renderBody(); }
}

function unbindParam(elId, propKey, paramName, e) {
  e.stopPropagation();
  const paramBKey = `${elId}|${propKey}|param:${paramName}`;
  delete S.bindings[paramBKey];
  toast(`Parameter ${paramName} disconnected`);
  updateFnCanvasPreview(elId, propKey);
  updatePropRowDOM(elId, propKey);
}

function setParamStatic(elId, propKey, paramName, value) {
  const paramBKey = `${elId}|${propKey}|param:${paramName}`;
  if (!value) {
    delete S.bindings[paramBKey];
  } else {
    S.bindings[paramBKey] = {static: true, value: value};
  }
  updateFnCanvasPreview(elId, propKey);
}
function onParamBlur(elId, propKey) {
  updateFnCanvasPreview(elId, propKey);
}

function updateFnCanvasPreview(elId, propKey) {
  const bkey = `${elId}|${propKey}`;
  const b = S.bindings[bkey];
  if (!b || !b.fnHasParams || !b.fnParams) return;
  const valEl = document.getElementById('v-' + elId);
  if (!valEl) return;
  const template = b.fnTemplate;
  if (!template) return;
  let text = template;
  let allFilled = true;
  b.fnParams.forEach(p => {
    const pb = S.bindings[`${bkey}|param:${p.name}`];
    if (pb && pb.static) {
      text = text.replace(`{${p.name}}`, pb.value);
    } else if (pb && pb.ctxId) {
      text = text.replace(`{${p.name}}`, (pb.sample || '').replace(/^"|"$/g, ''));
    } else {
      text = text.replace(`{${p.name}}`, '___');
      allFilled = false;
    }
  });
  valEl.textContent = text;
}

/* ── CONTEXT TAB ── */
function renderCtxTab() {
  if (S.ctxSettingsView) return renderCtxSettings(S.ctxSettingsView);
  return renderCtxList();
}

function getCtxBindingCount(ctxId, sectionId) {
  const def = EL_DEFS[sectionId];
  if (def && def.isPage) {
    let count = 0;
    Object.keys(EL_DEFS).forEach(id => {
      const d = EL_DEFS[id];
      if (d.parentPage === sectionId && (S.ctxMap[id] || []).includes(ctxId)) count++;
    });
    return count;
  }
  const seen = {};
  let count = 0;
  Object.keys(S.bindings).forEach(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId) return;
    const [elId] = bkey.split('|');
    const elDef = EL_DEFS[elId];
    if (!elDef || elDef.section !== sectionId) return;
    const key = elDef.repTemplate || elId;
    if (seen[key]) return;
    seen[key] = true;
    count++;
  });
  return count;
}

function getCtxBoundElIds(ctxId, sectionId) {
  const def = EL_DEFS[sectionId];
  if (def && def.isPage) {
    const ids = [];
    Object.keys(EL_DEFS).forEach(id => {
      const d = EL_DEFS[id];
      if (d.parentPage === sectionId && (S.ctxMap[id] || []).includes(ctxId)) ids.push(id);
    });
    return ids;
  }
  const ids = [];
  Object.keys(S.bindings).forEach(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId) return;
    const [elId] = bkey.split('|');
    const elDef = EL_DEFS[elId];
    if (!elDef || elDef.section !== sectionId) return;
    ids.push(elId);
  });
  return ids;
}

function highlightBoundEls(ctxId, sectionId) {
  const elIds = getCtxBoundElIds(ctxId, sectionId);
  elIds.forEach(id => {
    const el = document.getElementById(id);
    if (el) el.classList.add('highlight-bind');
  });
}

function highlightFieldEls(ctxId, fieldName, sectionId) {
  const def = EL_DEFS[sectionId];
  const sections = (def && def.isPage)
    ? Object.keys(EL_DEFS).filter(id => EL_DEFS[id].parentPage === sectionId).concat(sectionId)
    : [sectionId];
  Object.keys(S.bindings).forEach(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId || b.fieldName !== fieldName) return;
    const [elId] = bkey.split('|');
    const elDef = EL_DEFS[elId];
    if (!elDef || !sections.includes(elDef.section || elDef.parentPage)) return;
    const el = document.getElementById(elId);
    if (el) el.classList.add('highlight-bind');
  });
}

function clearHighlightEls() {
  document.querySelectorAll('.highlight-bind').forEach(el => el.classList.remove('highlight-bind'));
}

function isPrimaryCtx(ctxId, sectionId) {
  return (S.primaryCtx[sectionId] || []).includes(ctxId);
}

function getCtxPillText(sectionId) {
  const ids = S.ctxMap[sectionId] || [];
  if (ids.length === 0) return '';
  const def = EL_DEFS[sectionId];
  if (!def) return '';
  const label = def.isPage ? 'Page' : 'Section';
  let displayIds = ids;
  if (!def.isPage && def.parentPage) {
    displayIds = ids.filter(id => !isPrimaryCtx(id, sectionId));
  }
  if (displayIds.length === 0) return '';
  const first = findSource(displayIds[0]);
  if (!first) return '';
  const firstName = getCtxDisplayName(displayIds[0], sectionId);
  const ctxLabel = first.icon + ' ' + firstName + (displayIds.length > 1 ? ' +' + (displayIds.length - 1) : '');
  const tooltip = `${label} · ${ctxLabel.replace(/"/g, '&quot;')}`;
  return `<div class="ctx-bind-icon" onclick="event.stopPropagation();pillNavCtx('${sectionId}')" title="${tooltip}"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/></svg></div>`;
}

const CTX_PILL_EMPTY_ICON = `<div class="ctx-bind-icon" onclick="event.stopPropagation();pillNavCtx(this.closest('.c-section,.c-page').id)" title="Connect data"><svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/></svg></div>`;

function refreshAllPills() {
  Object.keys(S.ctxMap).forEach(secId => {
    const sec = document.getElementById(secId);
    if (!sec) return;
    const pill = document.getElementById('pill-' + secId);
    const pillText = getCtxPillText(secId);
    if (pillText) {
      sec.classList.add('has-ctx');
      if (pill) pill.innerHTML = pillText;
    } else {
      sec.classList.remove('has-ctx');
      if (pill) pill.innerHTML = '';
    }
  });
  // Refresh repeater pills
  Object.keys(EL_DEFS).forEach(id => {
    const def = EL_DEFS[id];
    if (!def.isRepeater) return;
    const pill = document.getElementById('pill-' + id);
    if (!pill) return;
    const binding = S.bindings[id + '|Items'];
    if (binding) {
      const ctx = findSource(binding.ctxId);
      const ctxLabel = ctx ? `Connected · ${binding.fieldName}` : binding.fieldName;
      pill.innerHTML = buildBindTagHTML(id, ctxLabel);
    } else {
      pill.innerHTML = '';
    }
  });
  // Refresh MSB pills
  Object.keys(EL_DEFS).forEach(id => {
    const def = EL_DEFS[id];
    if (!def.isMultiState) return;
    const pill = document.getElementById('pill-' + id);
    if (!pill) return;
    const bkey = id + '|Active State';
    const binding = S.bindings[bkey];
    if (binding) {
      const ctx = findSource(binding.ctxId);
      const ctxLabel = ctx ? `Connected · ${binding.fieldName}` : binding.fieldName;
      const bindIcon = `<svg class="el-bind-icon" width="8" height="8" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 6l-1.2 1.2a2.5 2.5 0 0 1-3.6-3.4L6.4 2.6a2.5 2.5 0 0 1 3.5 0l.1.1"/><path d="M6 10l1.2-1.2a2.5 2.5 0 0 1 3.6 3.4l-1.2 1.2a2.5 2.5 0 0 1-3.5 0l-.1-.1"/></svg>`;
      pill.innerHTML = `<span class="el-bind-sec" onclick="event.stopPropagation();elPillNavDesign(event,'${id}')">Multi-State</span><span class="el-bind-sep"></span><span class="el-bind-ctx" onclick="event.stopPropagation();elPillNavCtx(event,'${id}')">${bindIcon} ${ctxLabel}</span>`;
    } else {
      pill.innerHTML = '';
    }
  });
  refreshElementBindTags();
  refreshRepeaterSkeletons();
}

function refreshElementBindTags() {
  const bindIconSvg = '<svg class="el-bound-indicator" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 6l-1.2 1.2a2.5 2.5 0 0 1-3.6-3.4L6.4 2.6a2.5 2.5 0 0 1 3.5 0l.1.1"/><path d="M6 10l1.2-1.2a2.5 2.5 0 0 1 3.6 3.4l-1.2 1.2a2.5 2.5 0 0 1-3.5 0l-.1-.1"/></svg>';
  document.querySelectorAll('.c-el').forEach(domEl => {
    const typeTag = domEl.querySelector('.el-type-tag');
    if (!typeTag) return;
    const elId = domEl.id;
    const def = EL_DEFS[elId];
    const typeName = def ? def.type : 'Element';
    if (domEl.classList.contains('bound')) {
      typeTag.innerHTML = `<span class="type-tag-label" onclick="elPillNavDesign(event,'${elId}')">${typeName}</span><span class="type-tag-bind-icon" onclick="elPillNavCtx(event,'${elId}')">${bindIconSvg}</span>`;
    } else {
      typeTag.innerHTML = `<span class="type-tag-label" onclick="elPillNavDesign(event,'${elId}')">${typeName}</span>`;
    }
  });
}

function refreshRepeaterSkeletons() {
  Object.keys(EL_DEFS).forEach(id => {
    const def = EL_DEFS[id];
    if (!def.isRepeater) return;
    const sectionId = def.section;
    const hasCtx = (S.ctxMap[sectionId] || []).length > 0;
    const isBound = !!S.bindings[id + '|Items'];
    const repEl = document.getElementById(id);
    if (!repEl) return;

    const existingOverlay = repEl.querySelector('.rep-skeleton-overlay');

    if (isBound) {
      repEl.classList.remove('has-skeleton');
      if (existingOverlay) existingOverlay.remove();
    } else if (hasCtx) {
      // Section has context but repeater not bound — show "connect" CTA
      repEl.classList.add('has-skeleton');
      const ctxIds = S.ctxMap[sectionId] || [];
      const listCtx = ctxIds.map(cid => findSource(cid)).find(c => c && c.type === 'list');
      const ctxLabel = listCtx ? listCtx.icon + ' ' + listCtx.name : 'data source';
      if (existingOverlay) existingOverlay.remove();
      const overlay = document.createElement('div');
      overlay.className = 'rep-skeleton-overlay';
      if (listCtx) {
        const arrayField = listCtx.fields.find(f => f.type === 'array');
        const fieldName = arrayField ? arrayField.name : '';
        overlay.innerHTML = `
          <span class="rep-skel-icon">🔗</span>
          <div class="rep-skel-title">Almost there!</div>
          <div class="rep-skel-desc">Connect this repeater to<br>${ctxLabel}</div>
          <button class="rep-skel-btn" onclick="event.stopPropagation();autoBindRepeater('${id}','${listCtx.id}','${fieldName}')">Connect to ${fieldName || 'data'}</button>`;
      } else {
        overlay.innerHTML = `
          <span class="rep-skel-icon">⚠️</span>
          <div class="rep-skel-title">No list data available</div>
          <div class="rep-skel-desc">The attached context has no list fields.<br>Add a list-type context instead.</div>
          <button class="rep-skel-btn" onclick="event.stopPropagation();openModal('${sectionId}')">Change Context</button>`;
      }
      repEl.appendChild(overlay);
    } else {
      // No context at all
      repEl.classList.add('has-skeleton');
      if (existingOverlay) existingOverlay.remove();
      const overlay = document.createElement('div');
      overlay.className = 'rep-skeleton-overlay';
      overlay.innerHTML = `
        <span class="rep-skel-icon">📎</span>
        <div class="rep-skel-title">No data connected</div>
        <div class="rep-skel-desc">Add a context to this section<br>to populate this repeater</div>
        <button class="rep-skel-btn" onclick="event.stopPropagation();openModal('${sectionId}')">＋ Add Context</button>`;
      repEl.appendChild(overlay);
    }
  });
}

function autoBindRepeater(repeaterId, ctxId, fieldName) {
  const ctx = findSource(ctxId);
  if (!ctx) return;
  const field = ctx.fields.find(f => f.name === fieldName);
  if (!field) return;
  const bkey = repeaterId + '|Items';
  S.bindings[bkey] = { ctxId, fieldName, sample: field.sample };
  const repEl = document.getElementById(repeaterId);
  if (repEl) {
    repEl.classList.add('bound');
    const countEl = document.getElementById('rep-count-' + repeaterId.replace('repeater-', ''));
    if (countEl) countEl.textContent = `Connected · ${fieldName} · 3 items`;
  }
  refreshAllPills();
  if (S.sel) renderRP();
  toast(`✓ Repeater connected to ${ctx.name} · ${fieldName}`, true);
}

function getFieldTypeIcon(type) {
  const map = {
    'string':'Aa','number':'#','boolean':'◆','image':'🖼','dateTime':'📅',
    'enum':'☰','array':'[ ]','object':'{ }','function':'ƒ'
  };
  return map[type] || '·';
}

function isFieldInUse(ctxId, fieldName, sectionId) {
  const def = EL_DEFS[sectionId];
  if (def && def.isPage) {
    const childSections = Object.keys(EL_DEFS).filter(id => EL_DEFS[id].parentPage === sectionId);
    const allSections = [sectionId, ...childSections];
    return Object.keys(S.bindings).some(bkey => {
      const b = S.bindings[bkey];
      if (b.ctxId !== ctxId || b.fieldName !== fieldName) return false;
      const [elId] = bkey.split('|');
      const elDef = EL_DEFS[elId];
      return elDef && allSections.includes(elDef.section || elDef.parentPage);
    });
  }
  return Object.keys(S.bindings).some(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId || b.fieldName !== fieldName) return false;
    const [elId] = bkey.split('|');
    const elDef = EL_DEFS[elId];
    return elDef && elDef.section === sectionId;
  });
}

function getFieldsInUseCount(ctxId, sectionId, fields) {
  return fields.filter(f => isFieldInUse(ctxId, f.name, sectionId)).length;
}

function renderCtxFields(c, sectionId) {
  const systemFields = ['_id','_createdDate','_updatedDate','_owner','_slug'];

  const rows = c.fields.map(f => {
    const used = isFieldInUse(c.id, f.name, sectionId);
    const hoverAttr = used ? `onmouseenter="highlightFieldEls('${c.id}','${f.name}','${sectionId}')" onmouseleave="clearHighlightEls()"` : '';
    return `<div class="ctx-field-row" ${hoverAttr}>
      <div class="ctx-field-icon">${getFieldTypeIcon(f.type)}</div>
      <div class="ctx-field-name" ${used ? '' : `style="cursor:pointer" onclick="event.stopPropagation();addFieldElement('${c.id}','${f.name}')" title="Click to add ${f.name} element"`}>${f.name}</div>
      ${used
        ? `<span class="ctx-field-badge in-use">In use</span><span class="ctx-field-remove" onclick="event.stopPropagation();removeFieldElement('${c.id}','${f.name}','${sectionId}')" title="Remove element">×</span>`
        : `<span class="ctx-field-add" onclick="event.stopPropagation();addFieldElement('${c.id}','${f.name}')">+ Add</span>`}
    </div>`;
  }).join('');

  const isList = c.type === 'list';

  const renderBindableRow = (name, icon, label, type, scope, ctxId, sectionId) => {
    const used = isFieldInUse(ctxId, name, sectionId);
    const hoverAttr = used ? `onmouseenter="highlightFieldEls('${ctxId}','${name}','${sectionId}')" onmouseleave="clearHighlightEls()"` : '';
    return `<div class="ctx-field-row" ${hoverAttr}>
      <div class="ctx-field-icon" ${type === 'action' ? 'style="background:var(--acc-d);color:var(--acc);font-size:12px"' : ''}>${icon}</div>
      <div class="ctx-field-name" ${used ? '' : `style="cursor:pointer" onclick="event.stopPropagation();addFieldElement('${ctxId}','${name}')" title="Click to add element"`}>${label}</div>
      ${scope ? `<span class="ctx-action-scope">${scope}</span>` : ''}
      ${used
        ? `<span class="ctx-field-badge in-use">In use</span><span class="ctx-field-remove" onclick="event.stopPropagation();removeFieldElement('${ctxId}','${name}','${sectionId}')" title="Remove element">×</span>`
        : `<span class="ctx-field-add" onclick="event.stopPropagation();addFieldElement('${ctxId}','${name}')">+ Add</span>`}
    </div>`;
  };

  const itemActionsHtml = (isList && c.itemActions) ? `<div class="ctx-fields-section">
    <div class="ctx-fields-section-head" onclick="this.nextElementSibling.classList.toggle('open');this.querySelector('.ctx-expand-chevron').classList.toggle('open')">
      <span>Item actions</span><span class="ctx-expand-chevron">›</span>
    </div>
    <div class="ctx-fields-section-body">
      ${c.itemActions.map(a => renderBindableRow(a.name, a.icon, a.label, 'action', 'per item', c.id, sectionId)).join('')}
    </div>
  </div>` : '';

  const ctxActionsHtml = (c.contextActions && c.contextActions.length) ? `<div class="ctx-fields-section">
    <div class="ctx-fields-section-head" onclick="this.nextElementSibling.classList.toggle('open');this.querySelector('.ctx-expand-chevron').classList.toggle('open')">
      <span>${isList ? 'Context actions' : 'Actions'}</span><span class="ctx-expand-chevron">›</span>
    </div>
    <div class="ctx-fields-section-body">
      ${c.contextActions.map(a => renderBindableRow(a.name, a.icon, a.label, 'action', isList ? 'collection' : '', c.id, sectionId)).join('')}
    </div>
  </div>` : '';

  const metadataHtml = (c.metadata && c.metadata.length) ? `<div class="ctx-fields-section">
    <div class="ctx-fields-section-head" onclick="this.nextElementSibling.classList.toggle('open');this.querySelector('.ctx-expand-chevron').classList.toggle('open')">
      <span>Metadata</span><span class="ctx-expand-chevron">›</span>
    </div>
    <div class="ctx-fields-section-body">
      ${c.metadata.map(m => renderBindableRow(m.name, getFieldTypeIcon(m.type), m.label, m.type, '', c.id, sectionId)).join('')}
    </div>
  </div>` : '';

  const canAddFields = c.source === 'CMS' || c.source === 'Custom Code';
  const addFieldBtn = canAddFields
    ? `<div class="ctx-add-field-btn" onclick="event.stopPropagation();openAddFieldModal('${c.id}')"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg> Add field</div>`
    : '';

  return `${rows}
    ${addFieldBtn}
    ${itemActionsHtml}
    ${ctxActionsHtml}
    ${metadataHtml}
    <div class="ctx-fields-section">
      <div class="ctx-fields-section-head" onclick="this.nextElementSibling.classList.toggle('open');this.querySelector('.ctx-expand-chevron').classList.toggle('open')">
        <span>System fields</span><span class="ctx-expand-chevron">›</span>
      </div>
      <div class="ctx-fields-section-body">
        ${systemFields.map(f => `<div class="ctx-field-row"><div class="ctx-field-icon" style="font-size:9px">sys</div><div class="ctx-field-name" style="color:var(--t3)">${f}</div></div>`).join('')}
      </div>
      <div class="ctx-fields-open" onclick="event.stopPropagation()">📂 Open source</div>
    </div>`;
}

function toggleCtxFields(e, ctxId) {
  e.stopPropagation();
  const toggle = e.currentTarget;
  toggle.classList.toggle('open');
  const list = document.getElementById('ctx-fields-' + ctxId);
  if (list) list.classList.toggle('open');
}

let _addElCounter = 0;
function addFieldElement(ctxId, fieldName) {
  const sectionId = S.sel;
  if (!sectionId) return;
  const def = EL_DEFS[sectionId];
  if (!def) return;

  const ctx = findSource(ctxId);
  if (!ctx) return;
  let field = ctx.fields.find(f => f.name === fieldName);
  if (!field && ctx.metadata) field = ctx.metadata.find(f => f.name === fieldName);
  if (!field && ctx.itemActions) {
    const a = ctx.itemActions.find(a => a.name === fieldName);
    if (a) field = {name: a.name, type: 'action', sample: a.label};
  }
  if (!field && ctx.contextActions) {
    const a = ctx.contextActions.find(a => a.name === fieldName);
    if (a) field = {name: a.name, type: 'action', sample: a.label};
  }
  if (!field) return;

  if (isFieldInUse(ctxId, fieldName, sectionId)) {
    toast('This field is already in use');
    return;
  }

  _addElCounter++;
  const elId = `el-auto-${ctxId}-${fieldName}-${_addElCounter}`;
  const capitalName = fieldName.charAt(0).toUpperCase() + fieldName.slice(1);

  const componentMap = {
    image:    { elType:'Image',   cssClass:'c-el c-el-img',  propKey:'Source',  props:[{k:'Source',t:'image'},{k:'Alt Text',t:'string'},{k:'Visible',t:'boolean'}] },
    boolean:  { elType:'Toggle',  cssClass:'c-el c-el-toggle', propKey:'Checked', props:[{k:'Checked',t:'boolean'},{k:'Label',t:'string'},{k:'Visible',t:'boolean'}] },
    number:   { elType:'Text',    cssClass:'c-el c-el-text', propKey:'Value',  props:[{k:'Value',t:'string'},{k:'Format',t:'enum'},{k:'Visible',t:'boolean'}] },
    dateTime: { elType:'Text',    cssClass:'c-el c-el-text', propKey:'Value',  props:[{k:'Value',t:'string'},{k:'Format',t:'enum'},{k:'Visible',t:'boolean'}] },
    enum:     { elType:'Dropdown',cssClass:'c-el c-el-dropdown', propKey:'Value', props:[{k:'Value',t:'string'},{k:'Options',t:'array'},{k:'Visible',t:'boolean'}] },
    url:      { elType:'Button',  cssClass:'c-el c-el-btn',  propKey:'Link',   props:[{k:'Link',t:'url'},{k:'Label',t:'string'},{k:'Visible',t:'boolean'}] },
    action:   { elType:'Button',  cssClass:'c-el c-el-btn',  propKey:'Action', props:[{k:'Action',t:'action'},{k:'Label',t:'string'},{k:'Visible',t:'boolean'}] },
    array:    { elType:'Repeater',cssClass:'c-el c-el-text', propKey:'Items',  props:[{k:'Items',t:'array'},{k:'Visible',t:'boolean'}] },
    string:   { elType:'Text',    cssClass:'c-el c-el-text', propKey:'Value',  props:[{k:'Value',t:'string'},{k:'Link',t:'url'},{k:'Visible',t:'boolean'}] }
  };
  const comp = componentMap[field.type] || componentMap.string;

  EL_DEFS[elId] = {
    name: capitalName,
    type: comp.elType,
    section: sectionId,
    props: comp.props
  };

  S.bindings[`${elId}|${comp.propKey}`] = {
    ctxId: ctxId,
    fieldName: fieldName,
    sample: field.sample
  };

  let targetBody;
  const pageEl = def.isPage;
  if (pageEl) {
    const childSections = Object.keys(EL_DEFS).filter(id => EL_DEFS[id].parentPage === sectionId);
    if (childSections.length > 0) {
      const firstSec = document.getElementById(childSections[0]);
      targetBody = firstSec ? firstSec.querySelector('.s-body') : null;
      EL_DEFS[elId].section = childSections[0];
    }
  } else {
    const secEl = document.getElementById(sectionId);
    targetBody = secEl ? secEl.querySelector('.s-body') : null;
  }

  if (targetBody) {
    const newEl = document.createElement('div');
    newEl.className = comp.cssClass + ' bound';
    newEl.id = elId;
    newEl.setAttribute('onclick', `selEl(event,'${elId}')`);

    const sample = field.sample.replace(/^"|"$/g, '');
    const baseTags = `<div class="c-el-overlay"></div>
        <div class="el-tags"><div class="el-type-tag">${comp.elType}</div><div class="el-bind-tag"></div></div>
        <div class="bound-dot"></div>
        <span class="src-tag" id="src-${elId}"></span>`;

    if (field.type === 'image') {
      newEl.style.cssText = 'padding:0;height:80px';
      newEl.innerHTML = `${baseTags}
        <div style="width:100%;height:100%;background:linear-gradient(135deg,var(--b1),var(--b2));display:flex;align-items:center;justify-content:center;color:var(--t3);font-size:11px;font-family:'DM Mono',monospace">${fieldName}</div>`;
    } else if (field.type === 'boolean') {
      newEl.style.cssText = 'display:flex;align-items:center;gap:8px;padding:6px 10px';
      const checked = sample === 'true';
      newEl.innerHTML = `${baseTags}
        <div class="toggle-track ${checked ? 'on' : ''}" style="width:34px;height:18px;border-radius:9px;background:${checked ? 'var(--acc)' : 'var(--b2)'};position:relative;flex-shrink:0;transition:.2s">
          <div style="width:14px;height:14px;border-radius:50%;background:#fff;position:absolute;top:2px;${checked ? 'left:18px' : 'left:2px'};transition:.2s;box-shadow:0 1px 3px rgba(0,0,0,.2)"></div>
        </div>
        <span class="val" id="v-${elId}" style="font-size:12px">${capitalName}</span>`;
    } else if (field.type === 'enum') {
      newEl.style.cssText = 'display:flex;align-items:center;gap:6px;padding:6px 10px;border:1px solid var(--b2);border-radius:6px';
      newEl.innerHTML = `${baseTags}
        <span class="val" id="v-${elId}" style="flex:1;font-size:12px">${sample}</span>
        <span style="font-size:10px;color:var(--t3)">▾</span>`;
    } else if (field.type === 'url') {
      newEl.style.cssText = 'display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:var(--acc);color:#fff;border-radius:6px;font-size:12px;font-weight:600;cursor:pointer';
      newEl.innerHTML = `${baseTags}
        <span class="val" id="v-${elId}">${capitalName}</span>
        <span style="font-size:10px">↗</span>`;
    } else {
      newEl.innerHTML = `${baseTags}
        <span class="val" id="v-${elId}">${sample}</span>`;
    }

    targetBody.appendChild(newEl);

    newEl.style.animation = 'fadeIn .3s ease';
    setTimeout(() => newEl.style.animation = '', 350);
  }

  refreshAllPills();
  renderRP();
  toast(`✓ Added "${capitalName}" → ${ctx.name} · ${fieldName}`, true);
}

function removeFieldElement(ctxId, fieldName, sectionId) {
  const boundKeys = Object.keys(S.bindings).filter(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId || b.fieldName !== fieldName) return false;
    const [elId] = bkey.split('|');
    const elDef = EL_DEFS[elId];
    return elDef && elDef.section === sectionId;
  });
  if (boundKeys.length === 0) { toast('No bound element found'); return; }

  const elIds = [...new Set(boundKeys.map(k => k.split('|')[0]))];
  const names = elIds.map(id => EL_DEFS[id]?.name || id).join(', ');

  showConfirm('Remove element', `Remove "${names}" from the canvas?\nThe binding to ${fieldName} will be cleared.`, 'Remove', function() {
    elIds.forEach(elId => {
      Object.keys(S.bindings).forEach(bkey => {
        if (bkey.startsWith(elId + '|')) delete S.bindings[bkey];
      });
      const domEl = document.getElementById(elId);
      if (domEl) {
        domEl.style.animation = 'fadeIn .2s ease reverse';
        setTimeout(() => domEl.remove(), 200);
      }
      delete EL_DEFS[elId];
    });
    setTimeout(() => { refreshAllPills(); renderRP(); }, 220);
    toast(`✓ Removed ${names}`, true);
  }, true);
}

function getCtxDisplayName(ctxId, sectionId) {
  const alias = (S.ctxAliases[sectionId] || {})[ctxId];
  if (alias) return alias;
  const ctx = findSource(ctxId);
  if (!ctx) return ctxId;
  const pageSections = getPageSectionsForSection(sectionId);
  let instanceIndex = 0;
  let totalOnPage = 0;
  for (const secId of pageSections) {
    const ids = S.ctxMap[secId] || [];
    if (ids.includes(ctxId)) {
      totalOnPage++;
      if (secId === sectionId) instanceIndex = totalOnPage;
    }
  }
  if (totalOnPage > 1 && instanceIndex > 1) return ctx.name + ' ' + instanceIndex;
  return ctx.name;
}

function getPageSectionsForSection(sectionId) {
  const def = EL_DEFS[sectionId];
  if (!def) return [sectionId];
  const page = def.page;
  if (!page) return Object.keys(EL_DEFS).filter(id => {
    const d = EL_DEFS[id];
    return d.isContainer && !d.page;
  });
  return Object.keys(EL_DEFS).filter(id => {
    const d = EL_DEFS[id];
    return (d.isContainer || d.isPage) && d.page === page;
  });
}

function renderCtxList() {
  const selDef = EL_DEFS[S.sel];
  const ctxTarget = (selDef && selDef.isMultiState) ? selDef.section : S.sel;
  const ctxIds = S.ctxMap[ctxTarget] || [];
  const attached = ctxIds.map(id => findSource(id)).filter(Boolean);
  const isPage = selDef && selDef.isPage;
  const parentPageId = selDef?.parentPage;

  const inheritedCtxs = [];
  const ownCtxs = [];
  attached.forEach(c => {
    const primary = isPrimaryCtx(c.id, S.sel);
    if (primary && !isPage && parentPageId) {
      inheritedCtxs.push(c);
    } else {
      ownCtxs.push(c);
    }
  });

  const ctxGroupOrder = ['CMS', 'Custom', 'Apps', 'System'];
  ownCtxs.sort((a, b) => {
    const ai = ctxGroupOrder.indexOf(a.group || 'Other');
    const bi = ctxGroupOrder.indexOf(b.group || 'Other');
    return (ai === -1 ? 999 : ai) - (bi === -1 ? 999 : bi);
  });

  const showSplit = inheritedCtxs.length > 0;

  const renderCtxCard = (c) => {
      const hasConfig = c.config && c.config.length > 0;
      const configCount = hasConfig ? c.config.length : 0;
      const primary = isPrimaryCtx(c.id, S.sel);
      const isUnconfigured = isUnmodifiedInstance(c.id);
      const totalFields = c.fields.length;
      const usedFields = getFieldsInUseCount(c.id, S.sel, c.fields);
      const hasUsed = usedFields > 0;
      const fieldsHtml = renderCtxFields(c, S.sel);
      const rel = S.ctxRelationships[c.id];
      const hasRel = rel && ctxIds.includes(rel.linkedTo);
      const filterToggleHtml = hasRel ? `<div class="ctx-filter-row${rel.active ? '' : ' off'}" id="ctx-filter-${c.id}"><div class="ctx-filter-label"><svg viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg> ${rel.label}</div><label class="ctx-filter-toggle" onclick="event.stopPropagation()"><input type="checkbox" ${rel.active ? 'checked' : ''} onchange="onFilterToggle(event,'${c.id}')"><span class="ctx-filter-slider"></span></label><div class="ctx-filter-confirm" id="filter-confirm-${c.id}"><div class="ctx-filter-confirm-msg">${findSource(c.id)?.name||c.id} will no longer be filtered by the current product. All locations will be shown instead.</div><div class="ctx-filter-confirm-actions"><button class="btn-keep" onclick="cancelFilterToggle(event,'${c.id}')">Keep filter</button><button class="btn-off" onclick="confirmFilterOff(event,'${c.id}')">Turn off</button></div></div></div>` : '';
      return `
      <div class="ctx-group">
        <div class="ctx-card${primary ? ' primary' : ''}${isUnconfigured ? ' unconfigured' : ''}">
          <div class="ctx-card-name">${c.customCode ? '<span style="font-family:\'DM Mono\',monospace;font-size:11px;font-weight:700;color:var(--yel)">&lt;/&gt;</span> ' : c.icon ? c.icon + ' ' : ''}${getCtxDisplayName(c.id, S.sel)} <span class="type-badge ${c.type==='list'?'tb-list':'tb-obj'}">${c.type}</span>${primary && isPage ? '<span class="type-badge" style="background:var(--b2);color:var(--t2)">Page</span>' : ''}${isUnconfigured ? '<span class="type-badge" style="background:var(--yel);color:#000;font-weight:600">New</span>' : ''}</div>
          <div class="ctx-card-src">from ${c.source}</div>
          ${primary && isPage ? '<div class="ctx-card-lock"><svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg> Comes with this page</div>' : ''}
          ${isUnconfigured ? '<div class="ctx-card-lock" style="color:var(--yel);font-style:normal"><svg viewBox="0 0 24 24" style="stroke:var(--yel)"><path d="M12 9v4"/><circle cx="12" cy="16" r="0.5"/><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/></svg> Configure settings to use as binding source</div>' : ''}
          ${filterToggleHtml}
          <div class="ctx-fields-toggle" onclick="toggleCtxFields(event,'${c.id}')" ${hasUsed ? `onmouseenter="highlightBoundEls('${c.id}','${S.sel}')" onmouseleave="clearHighlightEls()"` : ''}>
            <span class="ctx-expand-chevron">›</span>
            <span class="ctx-fields-count ${hasUsed ? 'active' : 'idle'}"><span class="count-num">${usedFields}/${totalFields}</span> fields connected</span>
          </div>
          <div class="ctx-fields-list" id="ctx-fields-${c.id}">
            ${fieldsHtml}
          </div>
          <div class="ctx-card-menu" id="cmenu-${c.id}" style="display:flex;align-items:center;gap:4px">
            ${hasConfig ? `<span class="ctx-gear" onclick="openCtxSettings(event,'${c.id}')" title="${configCount} settings">⚙</span>` : ''}
            <span class="ctx-card-dots" onclick="toggleCtxMenu(event,'${c.id}','${S.sel}')">⋯</span>
            <div class="ctx-card-dropdown" id="cdrop-${c.id}">
              ${hasConfig ? `<div class="ctx-dd-item" onclick="openCtxSettings(event,'${c.id}')">⚙️ Settings</div>` : ''}
              ${c.customCode ? `<div class="ctx-dd-item" onclick="openCodeEditor(event,'${c.id}')">🖥 Edit context code</div>` : ''}
              ${(hasConfig || c.customCode) ? `<div class="ctx-dd-sep"></div>` : ''}
              <div class="ctx-dd-item" onclick="startRenameCtx(event,'${c.id}','${S.sel}')">✏️ Rename</div>
              <div class="ctx-dd-sep"></div>
              ${(primary && isPage)
                ? `<div class="ctx-dd-item danger disabled" style="cursor:not-allowed;pointer-events:auto" onclick="event.stopPropagation()"><span style="opacity:.35">🗑 Remove context</span><div class="ctx-dd-tooltip">This context is part of the dynamic page content and cannot be removed.</div></div>`
                : `<div class="ctx-dd-item danger" onclick="confirmRemoveCtx(event,'${c.id}','${S.sel}')">🗑 Remove context</div>`}
            </div>
          </div>
        </div>
      </div>`;
  };

  let parentNote = '';
  if (parentPageId && !isPage && inheritedCtxs.length > 0) {
    parentNote = `<div class="ctx-parent-note-wrap">
      <div class="ctx-parent-note-label">Also available from parent containers</div>
      ${inheritedCtxs.map(c =>
        `<div class="ctx-parent-note-item" onclick="navToPageCtx('${parentPageId}')">
          <span>${c.icon} ${c.name}</span><span class="ctx-parent-note-arrow">→</span>
        </div>`
      ).join('')}
    </div>`;
  }

  return `<div class="ps" style="padding:0">
    <div class="ps-lbl" style="padding:11px 14px 0">Attached Contexts</div>
    ${ownCtxs.map(renderCtxCard).join('')}
    <div class="add-ctx-btn" onclick="openModal('${S.sel}')" style="margin:10px 14px 12px"><span style="font-size:15px">＋</span> Add Context</div>
    ${parentNote}
    <div class="ctx-tree-cta" onclick="toggleTree()"><svg viewBox="0 0 24 24" width="12" height="12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3v6"/><path d="M6 9v6"/><path d="M18 9v6"/><circle cx="12" cy="3" r="1.5"/><circle cx="6" cy="9" r="1.5"/><circle cx="18" cy="9" r="1.5"/><circle cx="6" cy="18" r="1.5"/><circle cx="18" cy="18" r="1.5"/><circle cx="12" cy="12" r="1.5"/><path d="M6 9L12 3L18 9"/></svg> Show context tree</div>
  </div>`;
}

function openCtxSettings(e, ctxId) {
  if (e) e.stopPropagation();
  document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => d.classList.remove('open'));
  S.ctxSettingsView = ctxId;
  renderBody();
}

function openCodeEditor(e, ctxId) {
  if (e) e.stopPropagation();
  document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => d.classList.remove('open'));
  const ctx = findSource(ctxId);
  if (!ctx) return;

  const tabs = document.querySelectorAll('.tb-tabs .tb-tab');
  tabs.forEach(t => t.classList.remove('active'));
  if (tabs[1]) tabs[1].classList.add('active');

  const code = [
    {text: `<span class="hl-cm">// ${ctx.name} — Custom Context Definition</span>`},
    {text: `<span class="hl-cm">// Source: ${ctx.source}</span>`},
    {text: ''},
    {text: `<span class="hl-kw">import</span> { <span class="hl-fn">createContext</span> } <span class="hl-kw">from</span> <span class="hl-str">'@wix/context-api'</span>;`},
    {text: ''},
    {text: `<span class="hl-cm">// Field type definitions</span>`},
    {text: `<span class="hl-kw">interface</span> <span class="hl-ty">${ctx.name.replace(/[^a-zA-Z0-9]/g,'')}Fields</span> {`},
    ...ctx.fields.map(f => {
      const typeMap = {string:'string', number:'number', boolean:'boolean', image:'string', dateTime:'string', enum:'string', url:'string', array:'Array&lt;any&gt;', object:'Record&lt;string, any&gt;'};
      const tsType = typeMap[f.type] || 'any';
      return {text: `  ${f.name}<span class="hl-op">:</span> <span class="hl-ty">${tsType}</span>;`, highlight: f.empty};
    }),
    {text: '}'},
    {text: ''},
    {text: `<span class="hl-cm">// Create and export the context</span>`},
    {text: `<span class="hl-kw">export const</span> <span class="hl-fn">${ctx.id.replace(/-/g,'_')}</span> = <span class="hl-fn">createContext</span>&lt;<span class="hl-ty">${ctx.name.replace(/[^a-zA-Z0-9]/g,'')}Fields</span>&gt;({`},
    {text: `  <span class="hl-prop">name</span><span class="hl-op">:</span> <span class="hl-str">'${ctx.name}'</span>,`},
    {text: `  <span class="hl-prop">type</span><span class="hl-op">:</span> <span class="hl-str">'${ctx.type}'</span>,`},
    {text: '});'},
    {text: ''},
    {text: `<span class="hl-cm">// Provide data to the context</span>`},
    {text: `${ctx.id.replace(/-/g,'_')}.<span class="hl-fn">setData</span>({`},
    ...ctx.fields.map((f, i) => {
      const comma = i < ctx.fields.length - 1 ? ',' : '';
      return {text: `  <span class="hl-prop">${f.name}</span><span class="hl-op">:</span> <span class="hl-str">${f.sample.replace(/</g,'&lt;').replace(/>/g,'&gt;')}</span>${comma}`, highlight: f.empty};
    }),
    {text: '});'},
  ];

  const lineNums = code.map((_, i) => `<div>${i + 1}</div>`).join('');
  const codeHtml = code.map(line =>
    line.highlight
      ? `<span class="code-highlight-line">${line.text}  <span class="hl-cm">← new field</span></span>`
      : line.text
  ).join('\n');

  document.getElementById('code-line-nums').innerHTML = lineNums;
  document.getElementById('code-lines').innerHTML = codeHtml;
  document.getElementById('code-panel-overlay').classList.add('open');
}

function closeCodePanel() {
  document.getElementById('code-panel-overlay').classList.remove('open');
  const tabs = document.querySelectorAll('.tb-tabs .tb-tab');
  tabs.forEach(t => t.classList.remove('active'));
  if (tabs[0]) tabs[0].classList.add('active');
}

function openCodeTab() {
  const customCtx = CTX_DEFS.find(c => c.customCode);
  if (customCtx) {
    openCodeEditor(null, customCtx.id);
  } else {
    const tabs = document.querySelectorAll('.tb-tabs .tb-tab');
    tabs.forEach(t => t.classList.remove('active'));
    if (tabs[1]) tabs[1].classList.add('active');
    document.getElementById('code-panel-overlay').classList.add('open');
    document.getElementById('code-line-nums').innerHTML = '<div>1</div><div>2</div><div>3</div>';
    document.getElementById('code-lines').innerHTML = '<span class="hl-cm">// No custom code contexts defined</span>\n<span class="hl-cm">// Add a Custom Code context to see code here</span>\n';
  }
}

function closeCtxSettings() {
  S.ctxSettingsView = null;
  renderBody();
}

function renderCtxSettings(ctxId) {
  const ctx = findSource(ctxId);
  if (!ctx) { S.ctxSettingsView = null; return renderCtxList(); }
  const displayName = (S.ctxAliases[S.sel]||{})[ctxId] || ctx.name;
  const configs = ctx.config || [];
  const badgeClass = ctx.type === 'list' ? 'tb-list' : 'tb-obj';

  return `
    <div class="ctx-settings-panel">
      <div class="ctx-back" onclick="closeCtxSettings()">
        <span class="ctx-back-arrow">←</span>
        <span>Back to contexts</span>
      </div>
      <div class="ctx-settings-head">
        <span class="ctx-settings-icon">${ctx.icon}</span>
        <div style="flex:1;min-width:0">
          <div class="ctx-settings-title">${displayName}</div>
          <div style="font-size:10px;color:var(--t3);font-family:'DM Mono',monospace;margin-top:2px">${ctx.fields.length} fields</div>
        </div>
        <span class="ctx-settings-badge ${badgeClass}">${ctx.type}</span>
      </div>
      ${ctx.type === 'list' ? `<div class="ctx-settings-section">
        <div class="ctx-settings-section-lbl">Filter & Sort</div>
        <div class="sf-entry" onclick="openSfDialog('filter')">
          <div class="sf-entry-icon">🔍</div>
          <div class="sf-entry-info">
            <div class="sf-entry-label">Filter</div>
            <div class="sf-entry-desc">${S.filterRules.length > 0 ? S.filterRules.length + ' filter' + (S.filterRules.length > 1 ? 's' : '') + ' applied' : 'No filters applied'}</div>
          </div>
          <span class="sf-entry-arrow">›</span>
        </div>
        <div class="sf-entry" onclick="openSfDialog('sort')">
          <div class="sf-entry-icon">↕</div>
          <div class="sf-entry-info">
            <div class="sf-entry-label">Sort</div>
            <div class="sf-entry-desc">${S.sortRules.length > 0 ? S.sortRules.length + ' sort' + (S.sortRules.length > 1 ? 's' : '') + ' applied' : 'No sorting applied'}</div>
          </div>
          <span class="sf-entry-arrow">›</span>
        </div>
      </div>` : ''}
      <div class="ctx-settings-section">
        <div class="ctx-settings-section-lbl">General Settings</div>
        ${configs.map(cfg => renderCfgRow(cfg, ctxId)).join('')}
      </div>
    </div>`;
}

function renderCfgRow(cfg, ctxId) {
  if (cfg.input === 'toggle') {
    return `<div class="ctx-cfg-row">
      <span class="ctx-cfg-lbl">${cfg.label}</span>
      <div class="ctx-cfg-toggle">
        ${cfg.options.map(o => `<div class="seg-b ${o===cfg.default?'on':''}" onclick="toggleCfgOption(this);markInstanceModified('${ctxId}')">${o}</div>`).join('')}
      </div>
    </div>`;
  }
  return `<div class="ctx-cfg-row">
    <span class="ctx-cfg-lbl">${cfg.label}</span>
    <select class="ctx-cfg-select" onchange="markInstanceModified('${ctxId}')">
      ${cfg.options.map(o => `<option>${o}</option>`).join('')}
    </select>
  </div>`;
}

function toggleCfgOption(el) {
  const siblings = el.parentElement.querySelectorAll('.seg-b');
  siblings.forEach(s => s.classList.remove('on'));
  el.classList.add('on');
}

function togglePagesPanel(e) {
  e.stopPropagation();
  document.getElementById('pages-panel').classList.toggle('open');
}

const ITEM_DATA = [
  { name:'Sunny Day Tee',      desc:'Classic cotton tee featuring our iconic sun logo. Perfect for warm weather days. This is a paragraph. It is connected to a CMS collection through a dataset. Click "Edit Text" to update content from the connected collection.', bg:'#1a1a2e', svg:'<path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#f0f0f0" stroke="#ddd" stroke-width="1"/><circle cx="60" cy="62" r="10" fill="#FFD700" opacity=".8"/><path d="M55 55 Q60 48 65 55" stroke="#87CEEB" stroke-width="1.5" fill="none"/>' },
  { name:'Cloud Nine Hoodie',  desc:'Cozy pullover hoodie with cloud pattern. Stay warm when the forecast turns cold. This is a paragraph. It is connected to a CMS collection through a dataset. Click "Edit Text" to update content from the connected collection.', bg:'#d4c4a8', svg:'<path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#fff" stroke="#eee" stroke-width="1"/><ellipse cx="60" cy="60" rx="12" ry="6" fill="#ccc" opacity=".6"/><ellipse cx="55" cy="58" rx="8" ry="5" fill="#ddd" opacity=".7"/>' },
  { name:'Storm Chaser Vest',  desc:'Lightweight weatherproof vest with lightning bolt emblem. Built for adventure. This is a paragraph. It is connected to a CMS collection through a dataset. Click "Edit Text" to update content from the connected collection.', bg:'#333', svg:'<path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#444" stroke="#555" stroke-width="1"/><path d="M58 55 L55 65 L62 62 L59 72" stroke="#FFD700" stroke-width="2" stroke-linecap="round"/><ellipse cx="60" cy="52" rx="10" ry="4" fill="#666" opacity=".5"/>' },
  { name:'Rainy Day Polo',     desc:'Water-resistant polo with rain droplet print. Stylish in any weather condition. This is a paragraph. It is connected to a CMS collection through a dataset. Click "Edit Text" to update content from the connected collection.', bg:'#888', svg:'<path d="M35 45 L45 30 L60 38 L75 30 L85 45 L75 50 L75 90 L45 90 L45 50 Z" fill="#999" stroke="#aaa" stroke-width="1"/><circle cx="55" cy="60" r="4" fill="#87CEEB" opacity=".6"/><circle cx="65" cy="58" r="3" fill="#87CEEB" opacity=".5"/><circle cx="60" cy="65" r="3.5" fill="#87CEEB" opacity=".55"/>' },
];

function selectPage(el, name) {
  document.querySelectorAll('.pp-item, .pp-sub').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
  const pageIcon = name === 'Product Item' ? '🛒' : name === 'Repeater Usecases' ? '↻' : name === 'Multi-State Box' ? '◫' : '📄';
  document.querySelector('.page-sel').innerHTML = `<span class="page-sel-name">${pageIcon} ${name}</span> <span class="page-sel-chevron">▾</span>`;
  document.getElementById('pages-panel').classList.remove('open');

  const homePage = document.querySelector('.canvas-inner:not(#demo-page):not(#demo262-page)');
  const itemsPage = document.getElementById('items-page');
  const itemRelPage = document.getElementById('item-relationship-page');
  const rucPage = document.getElementById('repeater-usecases-page');
  const msbPage = document.getElementById('msb-page');
  const demoPage = document.getElementById('demo-page');
  const demo262Page = document.getElementById('demo262-page');
  S.currentPage = name;

  homePage.classList.add('hidden-page');
  demoPage.classList.add('hidden-page');
  demo262Page.classList.add('hidden-page');
  itemsPage.classList.remove('active-page');
  itemRelPage.classList.remove('active-page');
  rucPage.classList.remove('active-page');
  msbPage.classList.remove('active-page');

  if (name === 'Items (List)') {
    itemsPage.classList.add('active-page');
  } else if (name === 'Product Item') {
    itemRelPage.classList.add('active-page');
    S.currentItemIdx = S.currentItemIdx || 0;
    renderItemDetail();
  } else if (name === 'Repeater Usecases') {
    rucPage.classList.add('active-page');
  } else if (name === 'Multi-State Box') {
    msbPage.classList.add('active-page');
  } else if (name === 'Demo') {
    demoPage.classList.remove('hidden-page');
  } else if (name === 'Demo 26.2') {
    demo262Page.classList.remove('hidden-page');
  } else {
    homePage.classList.remove('hidden-page');
  }

  S.sel = null;
  document.querySelectorAll('.sel').forEach(n => n.classList.remove('sel'));
  renderRP();
  setTimeout(refreshRepeaterSkeletons, 50);
}

function navItem(dir) {
  S.currentItemIdx = ((S.currentItemIdx || 0) + dir + ITEM_DATA.length) % ITEM_DATA.length;
  renderItemDetail();
}

function renderItemDetail() {
  const idx = S.currentItemIdx || 0;
  const item = ITEM_DATA[idx];
  const relTitle = document.getElementById('v-el-rel-title');
  if (relTitle) relTitle.textContent = item.name;
  const relDesc = document.getElementById('v-el-rel-desc');
  if (relDesc) relDesc.textContent = item.desc;
  const relCtrl = document.getElementById('item-rel-ctrl-name');
  if (relCtrl) relCtrl.textContent = item.name;
}

function toggleTheme() {
  const html = document.documentElement;
  const isDark = html.classList.toggle('dark');
  const btn = document.getElementById('theme-toggle');
  btn.textContent = isDark ? '☀️' : '🌙';
  btn.title = isDark ? 'Switch to light mode' : 'Switch to dark mode';
}

function toggleAiPanel() {
  const lp = document.querySelector('.lp');
  const btn = document.getElementById('ai-toggle');
  lp.classList.toggle('collapsed');
  btn.classList.toggle('active');
}

/* ── ADD ELEMENTS PANEL ── */
function toggleAddElementsPanel() {
  const panel = document.getElementById('add-el-panel');
  const btn = document.getElementById('add-el-toggle');
  panel.classList.toggle('open');
  btn.classList.toggle('active');
}

function filterAddElements(query) {
  const q = query.toLowerCase();
  document.querySelectorAll('.add-el-item').forEach(item => {
    const name = item.querySelector('.add-el-item-name').textContent.toLowerCase();
    const desc = item.querySelector('.add-el-item-desc').textContent.toLowerCase();
    item.style.display = (name.includes(q) || desc.includes(q)) ? '' : 'none';
  });
}

let _dragGhost = null;
let _dragType = null;

function startDragComponent(e, type) {
  _dragType = type;
}

function onDragStartComponent(e, type) {
  _dragType = type;
  const label = type === 'repeater' ? '↻ Repeater' : '◫ Multi-State Box';
  e.dataTransfer.setData('text/plain', type);
  e.dataTransfer.effectAllowed = 'copy';

  _dragGhost = document.createElement('div');
  _dragGhost.className = 'add-el-drag-ghost';
  _dragGhost.textContent = label;
  document.body.appendChild(_dragGhost);
  e.dataTransfer.setDragImage(_dragGhost, 0, 0);

  const canvas = document.getElementById('canvas');
  canvas.addEventListener('dragover', onCanvasDragOver);
  canvas.addEventListener('drop', onCanvasDrop);
  canvas.addEventListener('dragleave', onCanvasDragLeave);
}

function onCanvasDragOver(e) {
  e.preventDefault();
  e.dataTransfer.dropEffect = 'copy';
  const canvasInner = getActiveCanvasInner();
  if (!canvasInner) return;
  const sections = [...canvasInner.querySelectorAll('.c-section')];
  let closest = null, closestDist = Infinity;
  const y = e.clientY;
  sections.forEach(sec => {
    const r = sec.getBoundingClientRect();
    const mid = r.top + r.height / 2;
    const dist = Math.abs(y - (r.bottom + 7));
    if (dist < closestDist) { closestDist = dist; closest = sec; }
  });
  document.querySelectorAll('.canvas-drop-indicator').forEach(el => el.remove());
  if (closest) {
    const ind = document.createElement('div');
    ind.className = 'canvas-drop-indicator';
    ind.style.display = 'block';
    closest.parentNode.insertBefore(ind, closest.nextSibling);
  }
}

function onCanvasDragLeave(e) {
  document.querySelectorAll('.canvas-drop-indicator').forEach(el => el.remove());
}

function onCanvasDrop(e) {
  e.preventDefault();
  const type = e.dataTransfer.getData('text/plain');
  document.querySelectorAll('.canvas-drop-indicator').forEach(el => el.remove());
  cleanUpDrag();

  const canvasInner = getActiveCanvasInner();
  if (!canvasInner) return;

  const sections = [...canvasInner.querySelectorAll('.c-section')];
  let insertAfter = sections[sections.length - 1];
  const y = e.clientY;
  for (const sec of sections) {
    const r = sec.getBoundingClientRect();
    if (y < r.bottom + 7) { insertAfter = sec; break; }
  }

  const newSection = createDroppedComponent(type);
  if (newSection && insertAfter) {
    insertAfter.insertAdjacentElement('afterend', newSection);
    toast(`Added ${type === 'repeater' ? 'Repeater' : 'Multi-State Box'} to canvas`);
  }
}

function cleanUpDrag() {
  if (_dragGhost) { _dragGhost.remove(); _dragGhost = null; }
  _dragType = null;
  const canvas = document.getElementById('canvas');
  canvas.removeEventListener('dragover', onCanvasDragOver);
  canvas.removeEventListener('drop', onCanvasDrop);
  canvas.removeEventListener('dragleave', onCanvasDragLeave);
}

document.addEventListener('dragend', cleanUpDrag);

/* ── ELEMENT DRAG BETWEEN SECTIONS (context promotion) ── */
let _elDragId = null;
let _elDragGhost = null;
let _elDragSrcSection = null;

function initElementDrag() {
  document.querySelectorAll('.c-el.bound').forEach(el => {
    if (el.closest('.c-repeater')) return;
    el.setAttribute('draggable', 'true');
    el.addEventListener('dragstart', onElDragStart);
  });
  document.querySelectorAll('.c-section.has-ctx').forEach(sec => {
    sec.querySelectorAll('.c-el:not(.bound)').forEach(el => {
      if (el.closest('.c-repeater')) return;
      el.setAttribute('draggable', 'true');
      el.addEventListener('dragstart', onElDragStart);
    });
  });
  document.querySelectorAll('.c-section').forEach(sec => {
    sec.addEventListener('dragover', onSectionDragOver);
    sec.addEventListener('dragleave', onSectionDragLeave);
    sec.addEventListener('drop', onSectionDrop);
  });
}

function onElDragStart(e) {
  const el = e.target.closest('.c-el');
  if (!el) return;
  const parentSection = el.closest('.c-section');
  if (!parentSection) return;
  _elDragId = el.id;
  _elDragSrcSection = parentSection.id;
  e.dataTransfer.setData('application/element-id', el.id);
  e.dataTransfer.effectAllowed = 'move';
  e.stopPropagation();

  const def = EL_DEFS[el.id];
  const label = def ? def.name : el.id;
  _elDragGhost = document.createElement('div');
  _elDragGhost.className = 'el-drag-ghost';
  _elDragGhost.textContent = label;
  document.body.appendChild(_elDragGhost);
  e.dataTransfer.setDragImage(_elDragGhost, 0, 0);

  setTimeout(() => { el.style.opacity = '.3'; }, 0);
}

function onSectionDragOver(e) {
  if (!_elDragId) return;
  e.preventDefault();
  e.dataTransfer.dropEffect = 'move';
  const sec = e.currentTarget;
  const srcSection = _elDragSrcSection || (EL_DEFS[_elDragId] && EL_DEFS[_elDragId].section);
  if (sec.id === srcSection) return;
  const targetHasCtx = (S.ctxMap[sec.id] || []).length > 0;
  if (!targetHasCtx) {
    sec.classList.add('el-drop-target-empty');
  }
  sec.classList.add('el-drop-target');
}

function onSectionDragLeave(e) {
  e.currentTarget.classList.remove('el-drop-target');
  e.currentTarget.classList.remove('el-drop-target-empty');
}

function onSectionDrop(e) {
  if (!_elDragId) return;
  e.preventDefault();
  e.stopPropagation();
  const targetSec = e.currentTarget;
  targetSec.classList.remove('el-drop-target');
  targetSec.classList.remove('el-drop-target-empty');

  const elId = _elDragId;
  const el = document.getElementById(elId);
  const def = EL_DEFS[elId];
  if (!el || !def) return;

  const srcSectionId = _elDragSrcSection || def.section;
  const targetSectionId = targetSec.id;
  if (srcSectionId === targetSectionId) return;

  const bindings = Object.keys(S.bindings).filter(k => k.startsWith(elId + '|'));
  const boundCtxIds = [...new Set(bindings.map(k => S.bindings[k].ctxId).filter(Boolean))];

  const targetCtxIds = S.ctxMap[targetSectionId] || [];

  let ctxIdsToPromote = boundCtxIds.filter(id => !targetCtxIds.includes(id));

  const targetIsEmpty = targetCtxIds.length === 0;
  if (targetIsEmpty) {
    const srcCtxIds = S.ctxMap[srcSectionId] || [];
    srcCtxIds.forEach(id => {
      if (!ctxIdsToPromote.includes(id)) {
        ctxIdsToPromote.push(id);
      }
    });
  }

  const promoted = [];
  if (ctxIdsToPromote.length > 0) {
    const canvasInner = targetSec.closest('.canvas-inner') || targetSec.closest('.items-page') || targetSec.closest('.item-detail-page');
    const pageSections = canvasInner ? [...canvasInner.querySelectorAll('.c-section')].map(s => s.id) : [srcSectionId, targetSectionId];

    ctxIdsToPromote.forEach(ctxId => {
      const ctx = findSource(ctxId);
      if (!ctx) return;
      pageSections.forEach(secId => {
        if (!S.ctxMap[secId]) S.ctxMap[secId] = [];
        if (!S.ctxMap[secId].includes(ctxId)) {
          S.ctxMap[secId].push(ctxId);
        }
      });
      promoted.push(ctx.name);
    });
  }

  const prevSection = def.section;
  def.section = targetSectionId;

  const targetBody = targetSec.querySelector('.s-body');
  if (targetBody) {
    targetBody.appendChild(el);
  }

  el.style.opacity = '';
  cleanUpElDrag();
  refreshAllPills();
  reinitElementDrag();
  renderTree();
  if (S.sel === elId) renderRP();

  if (promoted.length > 0) {
    const ctxNames = promoted.join(', ');
    const t = document.getElementById('toast');
    t.innerHTML = `Moved to ${EL_DEFS[targetSectionId]?.name || targetSectionId}. "${ctxNames}" promoted to page level. <span class="toast-undo" onclick="undoElMove('${elId}','${prevSection}','${targetSectionId}',${JSON.stringify(ctxIdsToPromote).replace(/"/g,'&quot;')})">Undo</span>`;
    t.className = 'toast show ok';
    clearTimeout(t._t);
    t._t = setTimeout(() => t.classList.remove('show'), 5000);
  } else {
    toast(`Moved to ${EL_DEFS[targetSectionId]?.name || targetSectionId}`, true);
  }
}

function undoElMove(elId, prevSection, curSection, promotedCtxIds) {
  const el = document.getElementById(elId);
  const def = EL_DEFS[elId];
  if (!el || !def) return;

  def.section = prevSection;
  const prevBody = document.getElementById(prevSection)?.querySelector('.s-body');
  if (prevBody) prevBody.appendChild(el);

  const canvasInner = el.closest('.canvas-inner') || el.closest('.items-page');
  const pageSections = canvasInner ? [...canvasInner.querySelectorAll('.c-section')].map(s => s.id) : [];

  promotedCtxIds.forEach(ctxId => {
    pageSections.forEach(secId => {
      if (secId === prevSection) return;
      const arr = S.ctxMap[secId];
      if (arr) {
        const idx = arr.indexOf(ctxId);
        if (idx >= 0) arr.splice(idx, 1);
      }
    });
  });

  refreshAllPills();
  reinitElementDrag();
  renderTree();
  if (S.sel === elId) renderRP();
  toast('Move undone', true);
}

function cleanUpElDrag() {
  if (_elDragGhost) { _elDragGhost.remove(); _elDragGhost = null; }
  if (_elDragId) {
    const el = document.getElementById(_elDragId);
    if (el) el.style.opacity = '';
  }
  _elDragId = null;
  _elDragSrcSection = null;
  document.querySelectorAll('.el-drop-target').forEach(s => s.classList.remove('el-drop-target'));
  document.querySelectorAll('.el-drop-target-empty').forEach(s => s.classList.remove('el-drop-target-empty'));
}

function reinitElementDrag() {
  document.querySelectorAll('.c-el[draggable="true"]').forEach(el => {
    el.removeAttribute('draggable');
    el.removeEventListener('dragstart', onElDragStart);
  });
  document.querySelectorAll('.c-el.bound').forEach(el => {
    if (el.closest('.c-repeater')) return;
    el.setAttribute('draggable', 'true');
    el.addEventListener('dragstart', onElDragStart);
  });
  document.querySelectorAll('.c-section.has-ctx').forEach(sec => {
    sec.querySelectorAll('.c-el:not(.bound)').forEach(el => {
      if (el.closest('.c-repeater')) return;
      el.setAttribute('draggable', 'true');
      el.addEventListener('dragstart', onElDragStart);
    });
  });
}

document.addEventListener('dragend', () => { cleanUpElDrag(); });

function addComponentToCanvas(type) {
  const canvasInner = getActiveCanvasInner();
  if (!canvasInner) return;
  const newSection = createDroppedComponent(type);
  if (newSection) {
    canvasInner.appendChild(newSection);
    newSection.scrollIntoView({behavior:'smooth', block:'center'});
    toast(`Added ${type === 'repeater' ? 'Repeater' : 'Multi-State Box'} to canvas`);
  }
}

function getActiveCanvasInner() {
  const active = document.querySelector('.canvas-inner.active-page') || document.querySelector('.canvas-inner:not(.hidden-page)');
  return active;
}

function createDroppedComponent(type) {
  const ts = Date.now();
  const secId = 'sec-new-' + ts;
  const compId = type + '-' + ts;
  const sec = document.createElement('div');
  sec.className = 'c-section';
  sec.id = secId;
  sec.setAttribute('onclick', `selEl(event,'${secId}')`);

  if (type === 'repeater') {
    sec.innerHTML = `
      <div class="s-body" style="gap:8px;padding:20px">
        <div class="c-repeater has-skeleton" id="${compId}" onclick="selEl(event,'${compId}')">
          <div class="c-el-overlay"></div>
          <div class="rep-grid">
            <div class="rep-item" style="padding:16px">
              <div style="display:flex;gap:12px;align-items:center">
                <div style="width:48px;height:48px;border-radius:8px;background:var(--sur2);border:1px solid var(--b1)"></div>
                <div style="flex:1">
                  <div style="height:10px;width:60%;background:var(--b1);border-radius:4px;margin-bottom:6px"></div>
                  <div style="height:8px;width:40%;background:var(--b1);border-radius:4px"></div>
                </div>
              </div>
            </div>
            <div class="rep-item" style="padding:16px">
              <div style="display:flex;gap:12px;align-items:center">
                <div style="width:48px;height:48px;border-radius:8px;background:var(--sur2);border:1px solid var(--b1)"></div>
                <div style="flex:1">
                  <div style="height:10px;width:55%;background:var(--b1);border-radius:4px;margin-bottom:6px"></div>
                  <div style="height:8px;width:35%;background:var(--b1);border-radius:4px"></div>
                </div>
              </div>
            </div>
            <div class="rep-item" style="padding:16px">
              <div style="display:flex;gap:12px;align-items:center">
                <div style="width:48px;height:48px;border-radius:8px;background:var(--sur2);border:1px solid var(--b1)"></div>
                <div style="flex:1">
                  <div style="height:10px;width:50%;background:var(--b1);border-radius:4px;margin-bottom:6px"></div>
                  <div style="height:8px;width:30%;background:var(--b1);border-radius:4px"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="rep-skeleton-overlay">
            <span class="rep-skel-icon">📎</span>
            <div class="rep-skel-title">No data connected</div>
            <div class="rep-skel-desc">Add a context to this section<br>to populate this repeater</div>
            <button class="rep-skel-btn" onclick="event.stopPropagation();openModal('${secId}')">＋ Add Context</button>
          </div>
        </div>
      </div>`;
  } else {
    sec.innerHTML = `
      <div class="s-body" style="gap:8px;padding:20px">
        <div class="msb" id="${compId}" onclick="selEl(event,'${compId}')" style="position:relative">
          <div class="c-el-overlay" style="border-radius:12px"></div>
          <div class="msb-header">
            <span class="msb-icon">◫</span>
            <span class="msb-label" style="color:var(--t3)">Multi-State</span>
          </div>
          <div class="msb-body" style="min-height:160px;position:relative">
            <div style="display:flex;flex-direction:column;gap:10px;filter:blur(2px) grayscale(.8);opacity:.2;pointer-events:none">
              <div style="height:10px;width:60%;background:var(--b1);border-radius:4px"></div>
              <div style="height:10px;width:45%;background:var(--b1);border-radius:4px"></div>
              <div style="height:10px;width:55%;background:var(--b1);border-radius:4px"></div>
            </div>
            <div class="rep-skeleton-overlay">
              <span class="rep-skel-icon">◫</span>
              <div class="rep-skel-title">No data connected</div>
              <div class="rep-skel-desc">Add a context with an enum field<br>to control which view is shown</div>
              <button class="rep-skel-btn" onclick="event.stopPropagation();openModal('${secId}')">＋ Add Context</button>
            </div>
          </div>
        </div>
      </div>`;
  }

  S.ctxMap[secId] = S.ctxMap[secId] || [];

  return sec;
}

/* ── RIGHT-CLICK CONTEXT MENU ── */
let _ctxMenuTarget = null;
let _ctxMenuSpecId = null;

document.addEventListener('contextmenu', function(e) {
  const menu = document.getElementById('canvas-ctx-menu');
  const specItem = document.getElementById('ctx-menu-spec');
  const specSep = document.getElementById('ctx-menu-spec-sep');
  const dropped = e.target.closest('[id^="sec-new-"]');
  const canvasEl = e.target.closest('.c-el, .c-section');

  _ctxMenuSpecId = null;
  specItem.style.display = 'none';
  specSep.style.display = 'none';

  const ddPanel = e.target.closest('#dd, .dd');

  if (S.productMode && (canvasEl || ddPanel)) {
    e.preventDefault();
    _ctxMenuTarget = null;
    const targetId = ddPanel ? 'dd' : (canvasEl ? canvasEl.id : null);
    const specId = targetId ? getSpecIdForElement(targetId) : null;
    if (specId) {
      _ctxMenuSpecId = specId;
      specItem.style.display = '';
      specSep.style.display = dropped ? '' : 'none';
    }
    if (!specId && !dropped) return;
    menu.style.left = e.clientX + 'px';
    menu.style.top = e.clientY + 'px';
    menu.classList.add('open');
  } else if (dropped) {
    e.preventDefault();
    _ctxMenuTarget = dropped;
    menu.style.left = e.clientX + 'px';
    menu.style.top = e.clientY + 'px';
    menu.classList.add('open');
  } else {
    menu.classList.remove('open');
  }
});

document.addEventListener('click', function() {
  document.getElementById('canvas-ctx-menu').classList.remove('open');
});

function removeContextMenuTarget() {
  if (_ctxMenuTarget) {
    const hasRepeater = _ctxMenuTarget.querySelector('[id^="repeater-"]');
    const name = hasRepeater ? 'Repeater' : 'Multi-State Box';
    delete S.ctxMap[_ctxMenuTarget.id];
    _ctxMenuTarget.remove();
    _ctxMenuTarget = null;
    toast(name + ' removed');
  }
  document.getElementById('canvas-ctx-menu').classList.remove('open');
}

/* ── DROPDOWN ── */
function openDd(e, elId, propKey) {
  e.stopPropagation();
  const existingBinding = S.bindings[elId + '|' + propKey];
  const preSrc = existingBinding ? existingBinding.ctxId : null;
  const preField = existingBinding ? existingBinding.fieldName : null;
  S.dd = {open:true, elId, propKey, paramName:null, step:'source', srcId:preSrc, fieldName:preField, openPanel: preSrc && preField ? null : (preSrc ? 'field' : null)};
  const rect = e.currentTarget.getBoundingClientRect();
  const dd = document.getElementById('dd');
  const panelLeft = window.innerWidth - parseInt(getComputedStyle(document.documentElement).getPropertyValue('--panel'));
  dd.style.left = Math.max(8, panelLeft - 260) + 'px';
  dd.style.top = '0px';
  dd.style.visibility = 'hidden';
  dd.classList.add('open');
  requestAnimationFrame(() => {
    const ddH = dd.offsetHeight;
    const vpH = window.innerHeight;
    let top = rect.bottom + 5;
    if (top + ddH > vpH - 8) top = Math.max(8, rect.top - ddH - 5);
    if (top + ddH > vpH - 8) top = Math.max(8, vpH - ddH - 8);
    dd.style.top = top + 'px';
    dd.style.visibility = '';
  });
  document.getElementById('dd-title').textContent = `Connect · ${propKey}`;
  renderDd();
  document.querySelectorAll('.prop-row,.fn-param-row').forEach(r => r.classList.remove('active-bind'));
  const rowId = `pr-${elId}-${propKey.replace(/\s/g,'_')}`;
  document.getElementById(rowId)?.classList.add('active-bind');
}

function openParamDd(e, elId, propKey, paramName) {
  e.stopPropagation();
  const paramBKey = `${elId}|${propKey}|param:${paramName}`;
  const existingBinding = S.bindings[paramBKey];
  const preSrc = existingBinding ? existingBinding.ctxId : null;
  const preField = existingBinding ? existingBinding.fieldName : null;
  S.dd = {open:true, elId, propKey, paramName, step:'source', srcId:preSrc, fieldName:preField, openPanel: preSrc && preField ? null : (preSrc ? 'field' : null)};
  const rect = e.currentTarget.getBoundingClientRect();
  const dd = document.getElementById('dd');
  const panelLeft = window.innerWidth - parseInt(getComputedStyle(document.documentElement).getPropertyValue('--panel'));
  dd.style.left = Math.max(8, panelLeft - 260) + 'px';
  dd.style.top = (rect.bottom + 5) + 'px';
  dd.classList.add('open');
  document.getElementById('dd-title').textContent = `Connect · ${paramName}`;
  renderDd();
  document.querySelectorAll('.prop-row,.fn-param-row').forEach(r => r.classList.remove('active-bind'));
  const rowId = `pr-${elId}-${propKey.replace(/\s/g,'_')}-param-${paramName}`;
  document.getElementById(rowId)?.querySelector('.fn-param-row')?.classList.add('active-bind');
}

function closeDd() {
  S.dd.open = false;
  S.dd.openPanel = null;
  S.dd.paramName = null;
  document.getElementById('dd').classList.remove('open');
  document.querySelectorAll('.prop-row,.fn-param-row').forEach(r => r.classList.remove('active-bind'));
}

function renderDd() {
  const body = document.getElementById('dd-body');
  const elId = S.dd.elId, propKey = S.dd.propKey;

  if (S.dd.paramName) {
    renderDdParam(body, elId, propKey, S.dd.paramName);
    return;
  }

  // Special case: Repeater "Items" binding — select the context itself (no field step)
  if (propKey === 'Items') {
    renderDdRepeaterItems(body, elId, S.dd.srcId);
    return;
  }

  const available = getAvailableCtx(elId);
  const def = EL_DEFS[elId];
  const prop = def?.props.find(p => p.k === propKey);

  // auto-select source if only one available
  if (!S.dd.srcId && available.length === 1) {
    S.dd.srcId = available[0].id;
  }
  const srcId = S.dd.srcId;
  const fieldName = S.dd.fieldName;
  const srcOpen = S.dd.openPanel === 'src';
  const fieldOpen = S.dd.openPanel === 'field';

  const hasOutOfScope = available.length > 0 && available[0]._outOfScope;
  const selectedCtx = srcId ? findSource(srcId) : null;
  const isSelectedFn = selectedCtx && FN_LIBS.some(l => l.id === srcId);

  // Context source items
  const ctxItems = available.length === 0
    ? `<div class="dd-notice" style="padding:8px 12px;line-height:1.6">⚠ No context on parent section.<br>Select the section → Settings → Context → Add Context.</div>`
    : available.map(ctx => `
        <div class="dd-sel-item ${srcId===ctx.id?'sel':''}" onclick="ddSelSource(event,'${ctx.id}')">
          <div style="flex:1;min-width:0">
            <div class="dd-sel-item-name">${ctx.name}</div>
            <div class="dd-sel-item-sub">${ctx.source} · ${ctx.type}</div>
          </div>
        </div>`).join('');

  // Function library items
  const fnLibItems = FN_LIBS.map(lib => `
        <div class="dd-sel-item ${srcId===lib.id?'sel':''}" onclick="ddSelSource(event,'${lib.id}')">
          <div style="flex:1;min-width:0">
            <div class="dd-sel-item-name">${lib.name}</div>
            <div class="dd-sel-item-sub">${lib.functions.length} functions · ${lib.description}</div>
          </div>
        </div>`).join('');

  const srcItems = `<div class="dd-src-section">
      <div class="dd-src-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"/><path d="M4 12h16"/><path d="M4 17h10"/></svg> Data Sources <span class="dd-src-count">${available.length}</span></div>
      ${ctxItems}
    </div>
    <div class="dd-src-divider"></div>
    <div class="dd-src-section">
      <div class="dd-src-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 18l6-6-6-6"/><path d="M8 6l-6 6 6 6"/></svg> Functions <span class="dd-src-count">${FN_LIBS.length}</span></div>
      ${fnLibItems}
    </div>`;

  // Field items — check for scoped context (nested repeater)
  const isVisibleProp = propKey === 'Visible';
  const elScope = getElementScope(elId);
  const scopedCtx = elScope && selectedCtx && selectedCtx.id === elScope.ctxId ? elScope : null;

  let fieldsToShow = !selectedCtx ? [] : selectedCtx.fields;
  let scopeBreadcrumb = '';
  if (scopedCtx) {
    fieldsToShow = scopedCtx.fields;
    scopeBreadcrumb = scopedCtx.scope.split('.').join(' › ');
  }
  const filteredFields = fieldsToShow.filter(f => {
    if (isVisibleProp) return f.type === 'boolean';
    if (prop?.t) return isCompat(f.type, prop.t);
    return true;
  });

  let scopeHeader = '';
  if (scopedCtx) {
    const listName = scopedCtx.boundFieldName || scopeBreadcrumb;
    const ctxDisplayName = scopedCtx.ctxName || selectedCtx.name;
    scopeHeader = `<div style="padding:6px 10px;font-size:9px;color:var(--acc);font-family:'DM Mono',monospace;background:var(--acc-d);border-bottom:1px solid color-mix(in srgb, var(--acc) 20%, transparent)">
      <div style="text-transform:uppercase;letter-spacing:.5px;display:flex;align-items:center;gap:4px"><span style="font-size:11px">↻</span> SCOPE: ${scopeBreadcrumb}</div>
      <div style="font-family:'DM Sans',sans-serif;font-size:10px;color:var(--t3);margin-top:3px;text-transform:none;letter-spacing:0;line-height:1.5">The repeater is connected to <b style="color:var(--t1)">${ctxDisplayName} › ${listName}</b>. Only fields from each <b style="color:var(--t1)">${listName}</b> item are available here.</div>
    </div>`;
  }

  const fieldItems = !selectedCtx
    ? `<div class="dd-sel-item" style="opacity:.4;pointer-events:none;padding:8px 10px;font-size:11px;color:var(--t3)">Select a source first</div>`
    : filteredFields.length === 0
    ? `<div style="padding:12px 14px;text-align:center">
        <div style="font-size:22px;margin-bottom:6px">🔍</div>
        <div style="font-size:11px;font-weight:600;color:var(--t2);margin-bottom:4px">No compatible fields</div>
        <div style="font-size:10px;color:var(--t3);line-height:1.5">No fields match the expected type in this scope.</div>
      </div>`
    : scopeHeader + filteredFields.map(f => `<div class="dd-sel-item ${fieldName===f.name?'sel':''}" onclick="ddSelField(event,'${f.name}')">
          <div style="flex:1;min-width:0">
            <div ${isSelectedFn ? 'style="font-family:\'DM Mono\',monospace;font-size:11px"' : ''}>${f.name}</div>
            <div class="dd-sel-item-sub">${f.description || f.sample}</div>
          </div>
          <span class="dd-sel-tag">${f.type}</span>
        </div>`).join('');

  const ddCanAddField = selectedCtx && (selectedCtx.source === 'CMS' || selectedCtx.source === 'Custom Code') && !isSelectedFn;
  const ddAddFieldBtn = ddCanAddField
    ? `<div class="dd-add-field-btn" onclick="event.stopPropagation();openAddFieldModal('${srcId}')"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg> Add field</div>`
    : '';

  body.innerHTML = `
    ${hasOutOfScope ? `<div class="dd-notice">⚠ No context on parent — showing page contexts</div>` : ''}
    <div class="dd-selectors">
      <div class="dd-sel-group">
        <div class="dd-sel-label">Select Source</div>
        <div class="dd-sel-box ${srcId?'filled':''} ${srcOpen?'open':''}" id="dd-src-box">
          <div class="dd-sel-trigger ${srcId?'has-val':''}" onclick="toggleSrcBox(event)">
            ${srcId && selectedCtx
              ? (isSelectedFn
                ? `<span style="font-size:13px">${selectedCtx.icon}</span><span>${selectedCtx.name}</span>`
                : `<span>${selectedCtx.icon}</span><span>${selectedCtx.name}</span>`)
              : `<span style="color:var(--t3)">Select…</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${srcItems}</div>
        </div>
      </div>
      <div class="dd-sel-group">
        <div class="dd-sel-label">${isSelectedFn ? 'Select Function' : scopedCtx ? 'Select Field <span style="font-size:9px;color:var(--acc);font-family:\'DM Mono\',monospace;font-weight:400">(scoped)</span>' : 'Select Field'}</div>
        <div class="dd-sel-box ${fieldName?'filled':''} ${fieldOpen?'open':''} ${!srcId?'style="opacity:.5;pointer-events:none"':''}" id="dd-field-box">
          <div class="dd-sel-trigger ${fieldName?'has-val green':''}" onclick="toggleFieldBox(event)">
            ${fieldName ? `<span>${isSelectedFn ? '<span style="font-family:\'DM Mono\',monospace;font-size:11px">' + fieldName + '</span>' : fieldName}</span>` : `<span style="color:var(--t3)">${srcId ? (isSelectedFn ? 'Select function…' : 'Select…') :'Pick source first'}</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${fieldItems}${ddAddFieldBtn}</div>
        </div>
      </div>
    </div>
    <button class="dd-confirm ${(srcId && fieldName)?'show':''}" onclick="confirmBind(event)">
      ✓ Bind${fieldName ? ` · ${fieldName}` : ''}
    </button>
  `;
}

function toggleSrcBox(e) {
  if (e) e.stopPropagation();
  S.dd.openPanel = S.dd.openPanel === 'src' ? null : 'src';
  renderDd();
}

function toggleFieldBox(e) {
  if (e) e.stopPropagation();
  if (!S.dd.srcId) return;
  S.dd.openPanel = S.dd.openPanel === 'field' ? null : 'field';
  renderDd();
}

function ddSelSource(e, id) {
  if (e) e.stopPropagation();
  S.dd.srcId = id;
  S.dd.fieldName = null;
  S.dd.openPanel = 'field'; // auto-open field panel
  renderDd();
}

function ddSelField(e, name) {
  if (e) e.stopPropagation();
  S.dd.fieldName = name;
  S.dd.openPanel = null;
  renderDd();
}

function confirmBind(e) {
  if (e) e.stopPropagation();
  const {elId, propKey, srcId, fieldName} = S.dd;
  if (!srcId || !fieldName) return;
  const ctx = findSource(srcId);
  const field = ctx.fields.find(f=>f.name===fieldName);
  const bkey = `${elId}|${propKey}`;
  const bindingData = {ctxId:srcId, fieldName, sample:field.sample};
  if (field.params) {
    bindingData.fnHasParams = true;
    bindingData.fnParams = field.params;
    if (field.template) bindingData.fnTemplate = field.template;
  }
  S.bindings[bkey] = bindingData;
  if (field.params) {
    field.params.forEach(p => {
      if (p.default) {
        S.bindings[`${bkey}|param:${p.name}`] = {static: true, value: p.default};
      }
    });
  }
  applyBindingToCanvas(elId, propKey, field, srcId);
  if (field.params && field.template) {
    updateFnCanvasPreview(elId, propKey);
  }
  const def = EL_DEFS[elId];
  if (def?.repTemplate) {
    applyRepBindingToAll(def.repTemplate, propKey, field, srcId);
  }
  closeDd();
  toast(`✓ ${propKey} → ${ctx.name} · ${fieldName}`, true);
  if (field.params) {
    closeEtPanel();
    S.inspectorOpen = true;
    S.tab = 'settings';
    S.openCats.properties = true;
    renderRP();
    renderActionBar();
  } else {
    updatePropRowDOM(elId, propKey);
  }
  renderEtPanel();
  if (def?.isMultiState) { refreshMsbState(); renderBody(); }
}

function applyBindingToCanvas(elId, propKey, field, ctxId) {
  const domEl = document.getElementById(elId);
  if (!domEl) return;
  const valEl = document.getElementById('v-'+elId);
  const ctx = ctxId ? findSource(ctxId) : null;

  if (field) {
    // ── BINDING APPLIED ──
    domEl.classList.add('bound');

    // Repeater items binding — update the count pill and header
    if (propKey === 'Items') {
      const countEl = document.getElementById('rep-count-' + elId.replace('repeater-',''));
      if (countEl) countEl.textContent = `Connected · ${field.name} · 3 items`;
      return;
    }

    if (propKey === 'Visible') {
      domEl.style.outline = '2px dashed var(--grn)';
      // for icon elements, show semi-transparent to indicate conditional render
      const svgEl = domEl.querySelector('svg');
      if (svgEl) svgEl.style.opacity = '0.35';
      // show a condition label
      const bindTag = domEl.querySelector('.el-bind-tag');
      const ctxLabel = (ctx ? 'Connected' : '') + ' · ' + field.name;
      if (bindTag) bindTag.innerHTML = buildBindTagHTML(elId, ctxLabel);
      return;
    }

    if (valEl && domEl.classList.contains('c-el-text')) {
      const bindTag = domEl.querySelector('.el-bind-tag');
      const ctxLabel = `${ctx ? 'Connected' : '?'} · ${field.name}`;
      if (bindTag) bindTag.innerHTML = buildBindTagHTML(elId, ctxLabel);
      valEl.textContent = field.sample.replace(/^"|"$/g, '');
      valEl.style.color = '';
      valEl.style.fontFamily = '';
      valEl.style.fontSize = '';
      valEl.classList.remove('static');
    }

    if (domEl.classList.contains('c-el-img')) {
      const cimgEl = document.getElementById('cimg-' + elId);
      if (cimgEl) cimgEl.src = IMG_SKY;
      const imgBindTag = domEl.querySelector('.el-bind-tag');
      const ctxLabel = (ctx ? 'Connected' : '') + ' · ' + field.name;
      if (imgBindTag) imgBindTag.innerHTML = buildBindTagHTML(elId, ctxLabel);
    }

    const btnEl = domEl.querySelector('.c-el-btn');
    if (btnEl) {
      btnEl.classList.add('bound');
      btnEl.textContent = `${field.name} → ${field.sample}`;
    }

  } else {
    // ── BINDING REMOVED ──
    // check if any bindings still exist for this element
    const anyBound = Object.keys(S.bindings).some(k => k.startsWith(elId + '|'));
    if (!anyBound) domEl.classList.remove('bound');

    if (propKey === 'Visible') {
      domEl.style.outline = '';
      const svgElU = domEl.querySelector('svg');
      if (svgElU) svgElU.style.opacity = '1';
      const bindTagU = domEl.querySelector('.el-bind-tag');
      if (bindTagU) bindTagU.textContent = '';
      return;
    }

    if (valEl && domEl.classList.contains('c-el-text')) {
      const bindTag = domEl.querySelector('.el-bind-tag');
      if (bindTag) bindTag.textContent = '';
      const staticVal = S.staticValues[`${elId}|${propKey}`] || '';
      valEl.textContent = staticVal || propPlaceholder(propKey);
      valEl.style.color = '';
      valEl.style.fontFamily = '';
      valEl.style.fontSize = '';
    }

    if (domEl.classList.contains('c-el-img')) {
      const cimgU = document.getElementById('cimg-' + elId);
      if (cimgU) cimgU.src = IMG_PLACEHOLDER;
      const imgBindTagU = domEl.querySelector('.el-bind-tag');
      if (imgBindTagU) imgBindTagU.textContent = '';
    }

    const btnEl = domEl.querySelector('.c-el-btn');
    if (btnEl) {
      btnEl.classList.remove('bound');
      btnEl.textContent = S.staticValues[`${elId}|Label`] || 'Click me';
      btnEl.style.background = 'var(--acc)';
      btnEl.style.color = '#fff';
    }
  }
}

/* ── CONTEXT helpers ── */
const CTX_GROUP_ORDER = {CMS:0, Custom:1, Apps:2, System:3};

function getAvailableCtx(elId, includeUnmodified) {
  const def = EL_DEFS[elId];
  if (!def || !def.section) return [];
  const parentId = def.section;
  const ids = [...(S.ctxMap[parentId] || [])];
  const parentDef = EL_DEFS[parentId];
  if (parentDef?.parentPage) {
    (S.ctxMap[parentDef.parentPage] || []).forEach(id => {
      if (!ids.includes(id)) ids.push(id);
    });
  }
  return ids
    .map(id => findSource(id))
    .filter(Boolean)
    .filter(c => includeUnmodified || !isUnmodifiedInstance(c.id))
    .map(c => ({ ...c, _scope: EL_DEFS[parentId]?.name || parentId }))
    .sort((a, b) => (CTX_GROUP_ORDER[a.group] ?? 99) - (CTX_GROUP_ORDER[b.group] ?? 99));
}

function isCompat(fieldType, propType) {
  if (!propType || propType==='string') return ['string','number','enum','dateTime','boolean'].includes(fieldType);
  if (propType==='image')   return fieldType==='image';
  if (propType==='boolean') return fieldType==='boolean';
  if (propType==='url')     return fieldType==='url';
  if (propType==='action')  return fieldType==='action';
  if (propType==='enum')    return fieldType==='enum';
  return true;
}

/* ── MODAL (add/remove context — multi-select) ── */
function openModal(sectionId) {
  const current = S.ctxMap[sectionId] || [];
  S.modal = {target:sectionId, pending: [...current], initial: [...current]};
  renderModalList();
  checkModalReady();
  document.getElementById('modal').classList.add('open');
}

function checkModalReady() {
  const {pending, initial} = S.modal;
  const changed = pending.length !== initial.length || pending.some(id => !initial.includes(id));
  const btn = document.getElementById('modal-ok');
  btn.classList.toggle('ready', changed);
  // update button label
  const added = pending.filter(id => !initial.includes(id)).length;
  const removed = initial.filter(id => !pending.includes(id)).length;
  if (added || removed) {
    const parts = [];
    if (added) parts.push('+' + added);
    if (removed) parts.push('-' + removed);
    btn.textContent = 'Apply changes (' + parts.join(' ') + ')';
  } else {
    btn.textContent = 'Apply changes';
  }
}

function closeModalSafe() {
  const {pending, initial} = S.modal;
  const changed = pending.some(id => !initial.includes(id)) || initial.some(id => !pending.includes(id));
  if (changed) {
    showConfirm('Discard changes?', 'Changes to this context will not be saved.', 'Discard', closeModal);
  } else {
    closeModal();
  }
}

function renderModalList() {
  const {target, pending} = S.modal;
  const current = S.ctxMap[target] || [];
  const primaries = S.primaryCtx[target] || [];
  const removedInherited = S.removedInherited[target] || [];
  const selDef = EL_DEFS[target];
  const isPage = selDef && selDef.isPage;
  const parentPageId = selDef?.parentPage;
  const pageCtxIds = parentPageId ? (S.ctxMap[parentPageId] || []) : [];

  let restoreHtml = '';
  if (!isPage && removedInherited.length > 0) {
    restoreHtml = removedInherited.map(ctxId => {
      const ctx = findSource(ctxId);
      if (!ctx) return '';
      const alreadyPending = pending.includes(ctxId);
      return `<div class="modal-item${alreadyPending ? ' attached' : ''}" style="border:1px dashed var(--acc);margin-bottom:4px;background:var(--acc-d)" onclick="restoreInheritedCtx('${ctxId}')">
        <div style="flex:1;min-width:0">
          <div class="modal-item-name">${ctx.name}<span style="font-size:10px;color:var(--acc);margin-left:6px;font-weight:400">Restore page context</span></div>
          <div class="modal-item-sub">${ctx.type}</div>
        </div>
        <div class="modal-check">${alreadyPending ? '✓' : ''}</div>
      </div>`;
    }).join('');
  }

  const groupOrder = ['CMS', 'Custom', 'Apps', 'System'];
  const grouped = {};
  CTX_DEFS.forEach(ctx => {
    if (removedInherited.includes(ctx.id)) return;
    if (ctx.isDynamicPageCtx && !primaries.includes(ctx.id)) return;
    const g = ctx.group || 'Other';
    if (!grouped[g]) grouped[g] = [];
    grouped[g].push(ctx);
  });

  const renderItem = ctx => {
    const isAttached = current.includes(ctx.id);
    const isPending  = pending.includes(ctx.id);
    const isPrimary  = primaries.includes(ctx.id);
    const willAdd    = !isAttached && isPending;
    const willRemove = isAttached && !isPending;
    const keeping    = isAttached && isPending;
    const cls        = (keeping || willAdd) ? 'attached' : '';
    const checkIcon  = (keeping || willAdd) ? '✓' : '';
    const badge      = isPrimary  ? `<span style="font-size:10px;color:var(--t3);margin-left:6px;font-weight:400">Page context</span>`
                     : willRemove ? `<span style="font-size:10px;color:var(--red);margin-left:6px;font-weight:400">Remove</span>`
                     : '';
    return `<div class="modal-item ${cls}${isPrimary ? ' locked' : ''}" id="mi-${ctx.id}" onclick="${isPrimary ? '' : `toggleModalCtx('${ctx.id}')`}" style="${isPrimary ? 'opacity:.6;cursor:default' : ''}">
      <div style="flex:1;min-width:0">
        <div class="modal-item-name">${ctx.name}${badge}</div>
        <div class="modal-item-sub">${ctx.type}</div>
      </div>
      <div class="modal-check">${isPrimary ? '🔒' : checkIcon}</div>
    </div>`;
  };

  let groupedHtml = '';
  const renderedGroups = groupOrder.filter(g => grouped[g] && grouped[g].length > 0);
  renderedGroups.forEach((g, gi) => {
    if (g !== 'Apps') groupedHtml += `<div class="modal-group-label">${g}</div>`;
    if (g === 'Apps') {
      const appsBySource = {};
      grouped[g].forEach(ctx => {
        const appName = ctx.source || 'Other';
        if (!appsBySource[appName]) appsBySource[appName] = [];
        appsBySource[appName].push(ctx);
      });
      Object.keys(appsBySource).forEach(appName => {
        groupedHtml += `<div class="modal-app-label">${appName}</div>`;
        groupedHtml += appsBySource[appName].map(renderItem).join('');
      });
    } else {
      groupedHtml += grouped[g].map(renderItem).join('');
    }
    if (g === 'CMS') {
      groupedHtml += `<div class="modal-create-btn" onclick="toast('Create new CMS collection…')">+ New collection</div>`;
    }
    if (g === 'Custom') {
      groupedHtml += `<div class="modal-create-btn" onclick="toast('Create new custom context…')">+ New custom context</div>`;
    }
    if (gi < renderedGroups.length - 1) {
      groupedHtml += `<div class="modal-divider"></div>`;
    }
  });

  document.getElementById('modal-list').innerHTML = restoreHtml + groupedHtml;
}

function toggleModalCtx(id) {
  const primaries = S.primaryCtx[S.modal.target] || [];
  if (primaries.includes(id)) return;
  const idx = S.modal.pending.indexOf(id);
  if (idx >= 0) S.modal.pending.splice(idx, 1);
  else S.modal.pending.push(id);
  renderModalList();
  checkModalReady();
}

function restoreInheritedCtx(ctxId) {
  const target = S.modal.target;
  if (!S.modal.pending.includes(ctxId)) {
    S.modal.pending.push(ctxId);
  }
  const ri = S.removedInherited[target] || [];
  S.removedInherited[target] = ri.filter(id => id !== ctxId);
  if (!S.primaryCtx[target]) S.primaryCtx[target] = [];
  if (!S.primaryCtx[target].includes(ctxId)) S.primaryCtx[target].push(ctxId);
  renderModalList();
  checkModalReady();
}

function closeModal() { document.getElementById('modal').classList.remove('open'); }

/* ── ADD FIELD MODAL ── */
const AF_TYPES = [
  {type:'string',  label:'Text',    icon:'T',  iconStyle:'font-weight:700;font-family:serif'},
  {type:'url',     label:'URL',     icon:'🔗', iconStyle:''},
  {type:'number',  label:'Numbers', icon:'#',  iconStyle:'font-weight:700;font-family:\'DM Mono\',monospace'},
  {type:'image',   label:'Image',   icon:'🖼', iconStyle:''},
];
S.addField = {ctxId:null, fieldType:'string', fieldLabel:'Text', fieldIcon:'T', fieldName:'', addElement:true, addDummyData:true, dropdownOpen:false};

function openAddFieldModal(ctxId) {
  const ctx = findSource(ctxId);
  if (!ctx) return;
  if (ctx.customCode) {
    openCodeEditor(null, ctxId);
    return;
  }
  S.addField = {ctxId, fieldType:'string', fieldLabel:'Text', fieldIcon:'T', fieldName:'', addElement:true, addDummyData:true, dropdownOpen:false};
  document.getElementById('af-ctx-name').textContent = ctx.name;
  document.getElementById('af-type-icon').textContent = 'T';
  document.getElementById('af-type-icon').style = 'font-weight:700;font-family:serif';
  document.getElementById('af-type-label').textContent = 'Text';
  document.getElementById('af-field-name').value = '';
  document.getElementById('af-field-name').placeholder = 'New text';
  document.getElementById('af-checkbox-label').innerHTML = 'Add a <b>Text</b> element to the list?';
  const check = document.getElementById('af-add-el-check');
  check.classList.remove('off');
  check.querySelector('.af-checkbox-check').style.display = '';
  const dummyCheck = document.getElementById('af-dummy-check');
  dummyCheck.classList.remove('off');
  document.getElementById('af-btn-add').disabled = false;
  document.getElementById('af-type-select').classList.remove('open');
  document.getElementById('af-modal').classList.add('open');
}

function closeAddFieldModal() {
  document.getElementById('af-modal').classList.remove('open');
  S.addField.dropdownOpen = false;
}

function toggleAfTypeDropdown() {
  S.addField.dropdownOpen = !S.addField.dropdownOpen;
  const sel = document.getElementById('af-type-select');
  sel.classList.toggle('open', S.addField.dropdownOpen);
}

function selectAfType(type, label, icon) {
  const t = AF_TYPES.find(t => t.type === type);
  S.addField.fieldType = type;
  S.addField.fieldLabel = label;
  S.addField.fieldIcon = icon;
  S.addField.dropdownOpen = false;
  document.getElementById('af-type-select').classList.remove('open');
  document.getElementById('af-type-icon').textContent = icon;
  document.getElementById('af-type-icon').style = t ? t.iconStyle : '';
  document.getElementById('af-type-label').textContent = label;
  document.getElementById('af-field-name').placeholder = 'New ' + label.toLowerCase();
  document.getElementById('af-checkbox-label').innerHTML = `Add a <b>${label}</b> element to the list?`;
  const items = document.querySelectorAll('#af-type-dropdown .af-dropdown-item');
  items.forEach(item => item.classList.remove('sel'));
  const idx = AF_TYPES.findIndex(t => t.type === type);
  if (items[idx]) items[idx].classList.add('sel');
}

function toggleAfCheckbox() {
  S.addField.addElement = !S.addField.addElement;
  const check = document.getElementById('af-add-el-check');
  check.classList.toggle('off', !S.addField.addElement);
}

function toggleAfDummyCheckbox() {
  S.addField.addDummyData = !S.addField.addDummyData;
  const check = document.getElementById('af-dummy-check');
  check.classList.toggle('off', !S.addField.addDummyData);
}

function onAfNameInput() {
  const val = document.getElementById('af-field-name').value.trim();
  S.addField.fieldName = val;
}

function generateDummySamples(fieldType, fieldName) {
  const n = fieldName.toLowerCase();
  if (fieldType === 'string') {
    if (n.includes('title') || n.includes('heading') || n.includes('name') && !n.includes('user') && !n.includes('author'))
      return ['"Getting Started Guide"', '"Advanced Techniques"', '"Best Practices"'];
    if (n.includes('author') || n.includes('user') || n.includes('creator') || n.includes('writer'))
      return ['"Sarah Chen"', '"Mark Rivera"', '"Jane Doe"'];
    if (n.includes('desc') || n.includes('summary') || n.includes('excerpt') || n.includes('body') || n.includes('bio'))
      return ['"A quick overview of the topic"', '"Deep dive into the details"', '"Practical tips and tricks"'];
    if (n.includes('cat') || n.includes('tag') || n.includes('label') || n.includes('genre'))
      return ['"Tech"', '"Design"', '"Product"'];
    if (n.includes('status')) return ['"Active"', '"Pending"', '"Completed"'];
    if (n.includes('email')) return ['"sarah@example.com"', '"mark@example.com"', '"jane@example.com"'];
    if (n.includes('date') || n.includes('time') || n.includes('published'))
      return ['"Jan 15, 2025"', '"Feb 22, 2025"', '"Mar 10, 2025"'];
    return ['"Sample ' + fieldName + ' A"', '"Sample ' + fieldName + ' B"', '"Sample ' + fieldName + ' C"'];
  }
  if (fieldType === 'number') {
    if (n.includes('price') || n.includes('cost') || n.includes('amount')) return ['"$29.99"', '"$49.99"', '"$19.99"'];
    if (n.includes('time') || n.includes('min') || n.includes('duration')) return ['"5 min"', '"8 min"', '"3 min"'];
    if (n.includes('count') || n.includes('qty') || n.includes('quantity')) return ['"12"', '"8"', '"24"'];
    if (n.includes('rating') || n.includes('score')) return ['"4.5"', '"3.8"', '"4.9"'];
    return ['"42"', '"128"', '"7"'];
  }
  if (fieldType === 'url') return ['"https://example.com/page-1"', '"https://example.com/page-2"', '"https://example.com/page-3"'];
  if (fieldType === 'image') return ['[img url]', '[img url]', '[img url]'];
  return ['"Value 1"', '"Value 2"', '"Value 3"'];
}

function confirmAddField() {
  const {ctxId, fieldType, fieldLabel, fieldName, addElement, addDummyData} = S.addField;
  const ctx = findSource(ctxId);
  if (!ctx) return;

  const name = fieldName || ('New ' + fieldLabel.toLowerCase());
  const emptyMap = {string:'"…"', url:'"https://…"', number:'"0"', image:'[img url]'};
  const dummySamples = addDummyData ? generateDummySamples(fieldType, name) : null;
  const sample = dummySamples ? dummySamples[0] : (emptyMap[fieldType] || '"…"');

  if (ctx.fields.find(f => f.name === name)) {
    toast('A field with this name already exists');
    return;
  }

  ctx.fields.push({name, type: fieldType, sample, empty: !addDummyData, dummySamples: dummySamples || null});
  closeAddFieldModal();
  toast(`✓ Added "${name}" field to ${ctx.name}`, true);

  if (addElement && S.sel) {
    addFieldElement(ctxId, name);
  }

  if (addDummyData) {
    populateDummyDataInRepeaters(ctxId, name, fieldType, dummySamples);
  }

  renderRP();
  if (S.dd && S.dd.srcId === ctxId) renderDd();
}

function populateDummyDataInRepeaters(ctxId, fieldName, fieldType, samples) {
  if (!samples) return;
  Object.keys(EL_DEFS).forEach(elId => {
    const def = EL_DEFS[elId];
    if (!def || !def.isRepeater) return;
    const bkey = elId + '|Items';
    const binding = S.bindings[bkey];
    if (!binding || binding.ctxId !== ctxId) return;

    const repEl = document.getElementById(elId);
    if (!repEl) return;
    const items = repEl.querySelectorAll('.rep-item');

    items.forEach((item, idx) => {
      const sampleVal = samples[idx % samples.length];
      const valText = sampleVal.replace(/^"|"$/g, '');
      const elSuffix = Date.now() + '-' + idx;
      const newElId = 'el-dyn-' + fieldName.replace(/\s+/g, '-') + '-' + elSuffix;
      const ctx = findSource(ctxId);
      const ctxIcon = ctx ? ctx.icon : '📄';
      const ctxName = ctx ? ctx.name : ctxId;

      const newEl = document.createElement('div');
      newEl.className = 'c-el bound';
      newEl.id = newElId;
      newEl.setAttribute('onclick', `selEl(event,'${newElId}')`);
      newEl.style.cursor = 'pointer';
      newEl.style.marginTop = '4px';

      if (fieldType === 'image') {
        newEl.className = 'c-el c-el-img bound';
        newEl.style.cssText = 'padding:0;height:60px;margin-top:4px;cursor:pointer';
        newEl.innerHTML = '<div class="c-el-overlay" style="border-radius:4px"></div>'
          + '<div class="el-tags"><div class="el-type-tag">Image</div><div class="el-bind-tag">' + ctxIcon + ' ' + ctxName + ' · ' + fieldName + '</div></div>'
          + '<div style="width:100%;height:100%;background:linear-gradient(135deg,var(--b1),var(--b2));display:flex;align-items:center;justify-content:center;color:var(--t3);font-size:11px;font-family:\'DM Mono\',monospace;border-radius:4px">' + fieldName + '</div>';
      } else {
        newEl.innerHTML = '<div class="c-el-overlay" style="border-radius:4px"></div>'
          + '<div class="el-tags"><div class="el-type-tag">Text</div><div class="el-bind-tag">' + ctxIcon + ' ' + ctxName + ' · ' + fieldName + '</div></div>'
          + '<div style="font-size:12px;color:var(--t3)">' + valText + '</div>';
      }

      item.appendChild(newEl);

      EL_DEFS[newElId] = {
        name: fieldName, type: fieldType === 'image' ? 'Image' : 'Text',
        section: def.section, props: [{k:'Value',t:fieldType === 'image' ? 'image' : 'string'},{k:'Visible',t:'boolean'}]
      };
      S.bindings[newElId + '|Value'] = {ctxId, fieldName, sample: sampleVal};
    });
  });
}

function confirmCtx() {
  const {target, pending} = S.modal;
  if (!target) return;
  const prev = S.ctxMap[target] || [];
  // Check if removing any contexts that have active bindings
  const removedCtxs = prev.filter(id => !pending.includes(id));
  if (removedCtxs.length > 0) {
    const boundEls = [];
    Object.keys(S.bindings).forEach(bkey => {
      const b = S.bindings[bkey];
      if (removedCtxs.includes(b.ctxId)) {
        const [elId] = bkey.split('|');
        const def = EL_DEFS[elId];
        if (def && def.section === target && !boundEls.find(e => e.id === elId)) {
          boundEls.push({id: elId, name: def.name});
        }
      }
    });
    if (boundEls.length > 0) {
      const ctxNames = removedCtxs.map(id => findSource(id)?.name||id).join(', ');
      const elNames = boundEls.map(e => e.name).join(', ');
      const ok = window.confirm(
        'Disconnect "' + ctxNames + '"?\n\n' +
        boundEls.length + ' binding' + (boundEls.length>1?'s':'') + ' will be removed:\n' +
        elNames + '\n\nThis cannot be undone.'
      );
      if (!ok) return;
      // Remove all bindings from disconnected contexts
      removedCtxs.forEach(ctxId => {
        Object.keys(S.bindings).forEach(bkey => {
          if (S.bindings[bkey].ctxId === ctxId) {
            const [elId, propKey] = bkey.split('|');
            delete S.bindings[bkey];
            // restore canvas to static
            applyBindingToCanvas(elId, propKey, null, null);
          }
        });
      });
    }
  }
  S.ctxMap[target] = [...pending];

  const added   = pending.filter(id => !prev.includes(id));
  const removed = prev.filter(id => !pending.includes(id));

  // Auto-bind repeaters when a list context is added to a section with a repeater
  if (added.length > 0) {
    const repeaterInSection = Object.keys(EL_DEFS).find(elId => {
      const d = EL_DEFS[elId];
      return d.isRepeater && d.section === target && !S.bindings[elId + '|Items'];
    });
    if (repeaterInSection) {
      for (const ctxId of added) {
        const ctx = findSource(ctxId);
        if (ctx && ctx.type === 'list') {
          const arrayField = ctx.fields.find(f => f.type === 'array');
          if (arrayField) {
            S.bindings[repeaterInSection + '|Items'] = { ctxId, fieldName: arrayField.name, sample: arrayField.sample };
            const repEl = document.getElementById(repeaterInSection);
            if (repEl) {
              repEl.classList.add('bound');
              const countEl = document.getElementById('rep-count-' + repeaterInSection.replace('repeater-', ''));
              if (countEl) countEl.textContent = `Connected · ${arrayField.name} · 3 items`;
            }
            break;
          }
        }
      }
    }
  }

  // update canvas pill
  refreshAllPills();

  const msg = [
    added.length   ? `✓ Added: ${added.map(id=>findSource(id)?.name||id).join(', ')}` : '',
    removed.length ? `Removed: ${removed.map(id=>findSource(id)?.name||id).join(', ')}` : '',
  ].filter(Boolean).join(' · ');

  closeModal();
  if (msg) toast(msg, added.length > 0);
  if (S.sel) renderBody();
}

function toggleCtxMenu(e, ctxId, sectionId) {
  e.stopPropagation();
  // close all other dropdowns first
  document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => {
    if (d.id !== 'cdrop-' + ctxId) d.classList.remove('open');
  });
  document.getElementById('cdrop-' + ctxId)?.classList.toggle('open');
}

function startRenameCtx(e, ctxId, sectionId) {
  e.stopPropagation();
  document.getElementById('cdrop-' + ctxId)?.classList.remove('open');
  // find the name element and replace with input
  const card = document.getElementById('cmenu-' + ctxId)?.closest('.ctx-card');
  if (!card) return;
  const nameEl = card.querySelector('.ctx-card-name');
  const ctx = findSource(ctxId);
  if (!nameEl || !ctx) return;
  const sectionAliases = S.ctxAliases[sectionId] || {};
  const currentName = sectionAliases[ctxId] || ctx.name;
  nameEl.innerHTML = ctx.icon + ' <input class="ctx-rename-input" id="rinp-' + ctxId + '" value="' + currentName + '">';
  const inp = document.getElementById('rinp-' + ctxId);
  inp.focus();
  inp.select();
  inp.onblur = () => finishRename(ctxId, sectionId, inp.value);
  inp.onkeydown = (ev) => { if (ev.key==='Enter') inp.blur(); if (ev.key==='Escape') { inp.value=currentName; inp.blur(); } };
}

function finishRename(ctxId, sectionId, newName) {
  const ctx = findSource(ctxId);
  if (!ctx) { renderBody(); return; }
  const trimmed = newName.trim();
  if (!trimmed || trimmed === ctx.name) { renderBody(); return; }
  if (!S.ctxAliases[sectionId]) S.ctxAliases[sectionId] = {};
  S.ctxAliases[sectionId][ctxId] = trimmed;
  renderBody();
  toast('✓ Renamed to "' + trimmed + '" (local)', true);
}

function countBoundElsForCtx(ctxId, sectionId) {
  const seen = {};
  const boundEls = [];
  Object.keys(S.bindings).forEach(bkey => {
    const b = S.bindings[bkey];
    if (b.ctxId !== ctxId) return;
    const [elId] = bkey.split('|');
    const def = EL_DEFS[elId];
    if (!def) return;
    if (sectionId && def.section !== sectionId && def.parentPage !== sectionId) return;
    const key = def.repTemplate || elId;
    if (seen[key]) return;
    seen[key] = true;
    const label = def.repTemplate
      ? (EL_DEFS[def.repTemplate + '-1'] || def).name
      : def.name;
    boundEls.push(label);
  });
  return boundEls;
}

function onFilterToggle(e, ctxId) {
  e.stopPropagation();
  const checkbox = e.target;
  const rel = S.ctxRelationships[ctxId];
  if (!rel) return;
  if (!checkbox.checked) {
    checkbox.checked = true;
    const confirm = document.getElementById('filter-confirm-' + ctxId);
    if (confirm) confirm.classList.add('open');
  } else {
    rel.active = true;
    renderBody();
    updateRepeaterForFilter(ctxId, true);
    showLinkToast('Filter restored — showing filtered locations');
  }
}
function cancelFilterToggle(e, ctxId) {
  e.stopPropagation();
  const confirm = document.getElementById('filter-confirm-' + ctxId);
  if (confirm) confirm.classList.remove('open');
}
function confirmFilterOff(e, ctxId) {
  e.stopPropagation();
  const rel = S.ctxRelationships[ctxId];
  if (rel) rel.active = false;
  renderBody();
  updateRepeaterForFilter(ctxId, false);
  showLinkToast('Filter removed — showing all locations');
}
function updateRepeaterForFilter(ctxId, isFiltered) {
  const repCountEl = document.getElementById('rep-count-rel-locations');
  if (!repCountEl) return;
  if (isFiltered) {
    repCountEl.textContent = '📍 locations · 3 items';
  } else {
    repCountEl.textContent = '📍 locations · 12 items (all)';
  }
}
function showLinkToast(msg) {
  let toast = document.getElementById('link-toast');
  if (!toast) {
    toast = document.createElement('div');
    toast.id = 'link-toast';
    toast.className = 'ctx-link-toast';
    document.body.appendChild(toast);
  }
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2500);
}

function confirmRemoveCtx(e, ctxId, sectionId) {
  e.stopPropagation();
  document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => d.classList.remove('open'));
  const selDef = EL_DEFS[sectionId];
  const isPage = selDef && selDef.isPage;
  if (isPrimaryCtx(ctxId, sectionId) && isPage) { toast('This context comes with the page and cannot be removed'); return; }
  const ctx = findSource(ctxId);
  const ctxName = ctx ? ctx.name : ctxId;
  const isInherited = isPrimaryCtx(ctxId, sectionId) && !isPage;
  const boundEls = countBoundElsForCtx(ctxId, sectionId);

  let lines;
  if (isInherited) {
    lines = ['This context is inherited from the page.'];
    if (boundEls.length > 0) {
      lines.push('Removing it will disconnect ' + boundEls.length + ' element' + (boundEls.length > 1 ? 's' : '') + ' that use its fields:');
      boundEls.forEach(name => lines.push('  · ' + name));
    }
    lines.push('\nContinue?');
  } else {
    lines = ['Remove "' + ctxName + '" from this section?'];
    if (boundEls.length > 0) {
      lines.push(boundEls.length + ' binding' + (boundEls.length > 1 ? 's' : '') + ' will be removed:');
      boundEls.forEach(name => lines.push('  · ' + name));
    }
  }
  const msg = lines.join('\n');
  showConfirm(isInherited ? 'Remove inherited context' : 'Remove context', msg, 'Remove', function() {
    if (isInherited) {
      if (!S.removedInherited[sectionId]) S.removedInherited[sectionId] = [];
      S.removedInherited[sectionId].push(ctxId);
    }
    doRemoveCtx(ctxId, sectionId);
  }, boundEls.length > 0);
}

function doRemoveCtx(ctxId, sectionId) {
  const ctx = findSource(ctxId);
  // collect keys first, then delete (avoid mutating while iterating)
  const keysToRemove = Object.keys(S.bindings).filter(bkey => S.bindings[bkey].ctxId === ctxId);
  keysToRemove.forEach(bkey => {
    const [elId, propKey] = bkey.split('|');
    delete S.bindings[bkey];
    applyBindingToCanvas(elId, propKey, null, null);
  });
  // remove context from section
  const currentCtxs = S.ctxMap[sectionId] || [];
  S.ctxMap[sectionId] = currentCtxs.filter(id => id !== ctxId);
  // clean up instance data if this was a duplicated instance
  if (S.ctxInstanceMeta[ctxId]) {
    delete S.ctxInstanceMeta[ctxId];
    S.ctxInstanceDefs = S.ctxInstanceDefs.filter(c => c.id !== ctxId);
  }
  // update canvas section
  refreshAllPills();
  toast('"' + (ctx ? ctx.name : ctxId) + '" removed');
  renderBody();
}

let _instanceCounter = 0;
function duplicateCtx(e, ctxId, sectionId) {
  e.stopPropagation();
  document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => d.classList.remove('open'));

  const original = findSource(ctxId);
  if (!original) return;

  // Count existing instances of this context type to generate suffix
  const originId = S.ctxInstanceMeta[ctxId] ? S.ctxInstanceMeta[ctxId].originId : ctxId;
  let count = 1;
  S.ctxInstanceDefs.forEach(inst => {
    if ((S.ctxInstanceMeta[inst.id] || {}).originId === originId) count++;
  });
  _instanceCounter++;
  const instanceId = `${originId}-inst-${_instanceCounter}`;
  const instanceName = `${original.name} (${count + 1})`;

  // Deep-clone the original definition
  const clone = JSON.parse(JSON.stringify(original));
  clone.id = instanceId;
  clone.name = instanceName;
  // Deep-clone config so each instance has independent settings
  if (clone.config) {
    clone.config = clone.config.map(c => ({...c}));
  }

  S.ctxInstanceDefs.push(clone);
  S.ctxInstanceMeta[instanceId] = { originId, settingsModified: false };

  // Attach to the section
  if (!S.ctxMap[sectionId]) S.ctxMap[sectionId] = [];
  S.ctxMap[sectionId].push(instanceId);

  refreshAllPills();
  toast(`Duplicated "${original.name}" → "${instanceName}"`, true);

  // Open settings for the new instance immediately
  S.ctxSettingsView = instanceId;
  renderBody();
}

function markInstanceModified(ctxId) {
  if (S.ctxInstanceMeta[ctxId]) {
    S.ctxInstanceMeta[ctxId].settingsModified = true;
  }
}

function isUnmodifiedInstance(ctxId) {
  const meta = S.ctxInstanceMeta[ctxId];
  return meta && !meta.settingsModified;
}

let _confirmCallback = null;
function showConfirm(title, msg, okLabel, onOk, showWarning) {
  _confirmCallback = onOk;
  document.getElementById('confirm-title').textContent = title;
  document.getElementById('confirm-msg').textContent = msg;
  document.getElementById('confirm-warning').style.display = showWarning ? 'block' : 'none';
  document.getElementById('confirm-ok-btn').textContent = okLabel;
  document.getElementById('confirm-modal').classList.add('open');
}
function doConfirmOk() {
  var cb = _confirmCallback;
  _confirmCallback = null;
  cancelConfirm();
  if (cb) cb();
}
function cancelConfirm() {
  document.getElementById('confirm-modal').classList.remove('open');
  _confirmCallback = null;
}

/* ── TREE ── */
function toggleTree() {
  const tp = document.getElementById('tree-panel');
  tp.classList.toggle('open');
  if (tp.classList.contains('open')) renderTree();
}

function renderTree() {
  const isItemsList = S.currentPage === 'Items (List)';
  const isConcept = S.currentPage === 'Product Item';
  const isRuc = S.currentPage === 'Repeater Usecases';
  const isMsb = S.currentPage === 'Multi-State Box';
  const isDemo = S.currentPage === 'Demo';
  const isDemo262 = S.currentPage === 'Demo 26.2';
  const sections = isItemsList ? ['sec-items'] : isConcept ? ['sec-rel-product','sec-rel-locations'] : isRuc ? ['sec-ruc-articles','sec-ruc-tags'] : isMsb ? ['sec-msb'] : isDemo ? ['sec-demo-team','sec-demo-empty'] : isDemo262 ? ['sec-d262-weather','sec-d262-empty1','sec-d262-empty2'] : ['sec-hero','sec-weather','sec-articles'];
  const pageLabel = isItemsList ? 'Items (List)' : isConcept ? 'Product Item' : isRuc ? 'Repeater Usecases' : isMsb ? 'Multi-State Box' : isDemo ? 'Demo' : isDemo262 ? 'Demo 26.2' : 'Home Page';
  const pageIcon = isConcept ? '🛒' : '📄';

  const hasDynamicPage = isConcept;
  const pageId = isConcept ? 'page-rel-detail' : null;
  const pageCtxIds = pageId ? (S.ctxMap[pageId]||[]) : [];

  let h = `<div class="tp-row"><div class="tp-item" style="color:var(--t3)"><span>${pageIcon}</span> ${pageLabel}</div></div>`;

  if (hasDynamicPage) {
    h += `<div class="tp-row"><div class="tp-indent"></div>
      <div class="tp-item ${pageCtxIds.length?'ctx':''}" onclick="selEl({stopPropagation:()=>{}},'${pageId}');document.getElementById('tree-panel').classList.remove('open')">
        <span>📑</span> ${EL_DEFS[pageId].name} ${pageCtxIds.length?'<span class="tp-dot"></span>':''}
      </div></div>`;
    pageCtxIds.forEach(id => {
      const c = findSource(id);
      if (!c) return;
      h += `<div class="tp-row" style="margin-left:14px"><div class="tp-indent"></div>
        <div class="tp-item ctx" style="font-family:'DM Mono',monospace;font-size:10px">${c.icon} ${c.name} <span style="font-size:8px;opacity:.5;margin-left:auto">all sections</span></div></div>`;
    });
  }

  sections.forEach(sid => {
    const def = EL_DEFS[sid];
    const allIds = S.ctxMap[sid]||[];
    const ownIds = allIds.filter(id => !isPrimaryCtx(id, sid) || !hasDynamicPage);
    const hasOwn = ownIds.length > 0;
    h += `<div class="tp-row"><div class="tp-indent"></div>
      <div class="tp-item ${hasOwn?'ctx':''}" onclick="selEl({stopPropagation:()=>{}},
      '${sid}');document.getElementById('tree-panel').classList.remove('open')">
        <span>▭</span> ${def.name} ${hasOwn?'<span class="tp-dot"></span>':''}
      </div></div>`;
    ownIds.forEach(id => {
      const c = findSource(id);
      if (!c) return;
      const displayName = getCtxDisplayName(id, sid);
      h += `<div class="tp-row" style="margin-left:14px"><div class="tp-indent"></div>
        <div class="tp-item ctx" style="font-family:'DM Mono',monospace;font-size:10px">${c.icon} ${displayName}</div></div>`;
    });
    const msbChildren = Object.entries(EL_DEFS).filter(([,d]) => d.section === sid && d.isMultiState);
    msbChildren.forEach(([msbId, msbDef]) => {
      const activeView = msbDef.activeView;
      h += `<div class="tp-row" style="margin-left:14px"><div class="tp-indent"></div>
        <div class="tp-item" onclick="selEl({stopPropagation:()=>{}},'${msbId}');document.getElementById('tree-panel').classList.remove('open')" style="cursor:pointer">
          <span>◫</span> ${msbDef.name}
        </div></div>`;
      (msbDef.views||[]).forEach(v => {
        const isActive = v.id === activeView;
        const disabled = v.enumValues.length === 0;
        h += `<div class="tp-row" style="margin-left:28px"><div class="tp-indent"></div>
          <div class="tp-item" style="font-size:10px;color:${disabled ? 'var(--t3)' : isActive ? 'var(--acc)' : 'var(--t3)'};cursor:pointer;${disabled ? 'opacity:.4;text-decoration:line-through' : ''}" onclick="switchMsbView(event,'${v.id}')">
            ${disabled ? '○' : isActive ? '◉' : '○'} ${v.name}
          </div></div>`;
      });
    });
  });
  document.getElementById('tp-body').innerHTML = h;
}

/* ── MULTI-STATE BOX ── */
function switchMsbView(e, viewId) {
  e.stopPropagation();
  const msbId = 'msb-articles';
  const def = EL_DEFS[msbId];
  if (!def) return;
  def.activeView = viewId;
  document.querySelectorAll('#' + msbId + ' .msb-view').forEach(v => v.classList.remove('active'));
  const viewEl = document.getElementById('msb-view-' + viewId);
  if (viewEl) viewEl.classList.add('active');
  document.querySelectorAll('#msb-view-sel .msb-view-btn').forEach(b => {
    const btnVal = b.getAttribute('data-view') || b.textContent.trim().toLowerCase().replace(/\s+/g,'');
    b.classList.toggle('active', btnVal === viewId);
  });
  if (S.sel === msbId) renderBody();
  renderTree();
}

function msbUnassign(e, viewId, val) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  const view = def.views.find(v => v.id === viewId);
  if (!view || view.enumValues.length <= 1) return;
  view.enumValues = view.enumValues.filter(v => v !== val);
  const originalView = def.views.find(v => v.id === val && v.enumValues.length === 0);
  if (originalView) {
    originalView.enumValues.push(val);
  } else {
    const emptyView = def.views.find(v => v.enumValues.length === 0);
    if (emptyView) { emptyView.enumValues.push(val); }
    else { def.views.push({id: val, name: val === 'hasItems' ? 'Has Items' : val.charAt(0).toUpperCase() + val.slice(1), enumValues: [val]}); }
  }
  refreshMsbCanvasButtons();
  renderBody();
  renderTree();
}

function msbShowAssign(e, viewId) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  const bkey = 'msb-articles|Active State';
  const b = S.bindings[bkey];
  const ctx = b ? findSource(b.ctxId) : null;
  const ctxField = ctx ? ctx.fields.find(f => f.name === b.fieldName && f.type === 'enum') : null;
  const enumVals = ctxField?.enumValues || [];
  const view = def.views.find(v => v.id === viewId);
  if (!view) return;
  const available = enumVals.filter(val => !view.enumValues.includes(val));
  if (available.length === 0) { toast('All states are already assigned'); return; }

  const rect = e.target.getBoundingClientRect();
  let existing = document.getElementById('msb-assign-popup');
  if (existing) existing.remove();
  const popup = document.createElement('div');
  popup.id = 'msb-assign-popup';
  popup.style.cssText = `position:fixed;z-index:1200;left:${rect.left}px;top:${rect.bottom+4}px;background:var(--sur2);border:1px solid var(--b2);border-radius:8px;box-shadow:0 8px 24px #00000040;padding:4px;min-width:120px`;
  popup.innerHTML = available.map(val => {
    const currentOwner = def.views.find(v => v.enumValues.includes(val));
    return `<div style="padding:5px 10px;font-size:11px;cursor:pointer;border-radius:4px;display:flex;align-items:center;gap:6px;color:var(--t1)" onmouseover="this.style.background='var(--sur)'" onmouseout="this.style.background=''" onclick="msbAssign(event,'${viewId}','${val}')">
      <span style="font-family:'DM Mono',monospace">${val}</span>
      ${currentOwner ? `<span style="font-size:9px;color:var(--t3)">from ${currentOwner.name}</span>` : ''}
    </div>`;
  }).join('');
  document.body.appendChild(popup);
  setTimeout(() => {
    const close = (ev) => { if (!popup.contains(ev.target)) { popup.remove(); document.removeEventListener('click', close); } };
    document.addEventListener('click', close);
  }, 10);
}

function msbAssign(e, viewId, val) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  def.views.forEach(v => { v.enumValues = v.enumValues.filter(ev => ev !== val); });
  const view = def.views.find(v => v.id === viewId);
  if (view) view.enumValues.push(val);
  const popup = document.getElementById('msb-assign-popup');
  if (popup) popup.remove();
  refreshMsbCanvasButtons();
  renderBody();
  renderTree();
  toast(`✓ "${val}" → ${view.name}`, true);
}

function msbDragStart(e, val) {
  e.dataTransfer.setData('text/plain', val);
  e.dataTransfer.effectAllowed = 'move';
  e.target.style.opacity = '.4';
  setTimeout(() => {
    document.querySelectorAll('.msb-drop-zone').forEach(z => {
      z.style.borderColor = 'color-mix(in srgb, var(--acc) 40%, var(--b1))';
    });
  }, 0);
}

function msbDragOver(e) {
  e.preventDefault();
  e.dataTransfer.dropEffect = 'move';
  e.currentTarget.style.borderColor = 'var(--acc)';
  e.currentTarget.style.borderStyle = 'solid';
  e.currentTarget.style.background = 'color-mix(in srgb, var(--acc) 10%, var(--sur))';
  e.currentTarget.style.opacity = '1';
}

function msbDragLeave(e) {
  e.currentTarget.style.borderColor = '';
  e.currentTarget.style.borderStyle = '';
  e.currentTarget.style.background = '';
  e.currentTarget.style.opacity = '';
}

function msbDrop(e, targetViewId) {
  e.preventDefault();
  const val = e.dataTransfer.getData('text/plain');
  if (!val) return;
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  def.views.forEach(v => { v.enumValues = (v.enumValues || []).filter(ev => ev !== val); });
  const target = def.views.find(v => v.id === targetViewId);
  if (target) target.enumValues.push(val);
  document.querySelectorAll('.msb-drop-zone').forEach(z => { z.style.borderColor = ''; z.style.background = ''; z.style.opacity = ''; });
  def.activeView = targetViewId;
  document.querySelectorAll('#msb-articles .msb-view').forEach(v => v.classList.remove('active'));
  const viewEl = document.getElementById('msb-view-' + targetViewId);
  if (viewEl) { viewEl.style.display = ''; viewEl.classList.add('active'); }
  refreshMsbCanvasButtons();
  renderBody();
  renderTree();
  const label = val.charAt(0).toUpperCase() + val.slice(1);
  toast(`✓ "${label}" → ${target.name}`, true);
}

function deleteMsbView(e, viewId) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def || !def.views || def.views.length <= 1) return;
  const view = def.views.find(v => v.id === viewId);
  if (!view) return;
  const viewName = view.name;
  def.views = def.views.filter(v => v.id !== viewId);
  const domView = document.getElementById('msb-view-' + viewId);
  if (domView) domView.style.display = 'none';
  if (def.activeView === viewId) {
    const firstActive = def.views.find(v => (v.enumValues || []).length > 0) || def.views[0];
    def.activeView = firstActive.id;
    document.querySelectorAll('#msb-articles .msb-view').forEach(v => v.classList.remove('active'));
    const newActiveEl = document.getElementById('msb-view-' + firstActive.id);
    if (newActiveEl) { newActiveEl.style.display = ''; newActiveEl.classList.add('active'); }
  }
  def.views.forEach((v, i) => { v.name = 'State ' + (i + 1); });
  refreshMsbCanvasButtons();
  renderBody();
  renderTree();
  toast(`Removed view "${viewName}"`);
}

function msbResetJoins(e) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  const bkey = 'msb-articles|Active State';
  const b = S.bindings[bkey];
  const ctx = b ? findSource(b.ctxId) : null;
  const ctxField = ctx ? ctx.fields.find(f => f.name === b.fieldName && f.type === 'enum') : null;
  const enumVals = ctxField?.enumValues || [];
  def.views = enumVals.map(val => ({
    id: val,
    name: val === 'hasItems' ? 'Has Items' : val.charAt(0).toUpperCase() + val.slice(1),
    enumValues: [val]
  }));
  if (!def.views.find(v => v.id === def.activeView)) {
    def.activeView = def.views[0]?.id;
  }
  refreshMsbCanvasButtons();
  renderBody();
  renderTree();
  toast('✓ States reset to 1:1', true);
}

function toggleMsbAdvanced(e) {
  e.stopPropagation();
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  def._advancedMapping = !def._advancedMapping;
  renderBody();
}

function refreshMsbCanvasButtons() {
  const def = EL_DEFS['msb-articles'];
  if (!def) return;
  const viewSel = document.getElementById('msb-view-sel');
  if (!viewSel) return;
  const views = def.views || [];
  const activeView = def.activeView;
  viewSel.innerHTML = views.map(v => {
    const disabled = v.enumValues.length === 0;
    const active = v.id === activeView;
    return `<button class="msb-view-btn ${active ? 'active' : ''} ${disabled ? 'disabled' : ''}" data-view="${v.id}" onclick="switchMsbView(event,'${v.id}')"${disabled ? ' title="No state mapped — won\'t show at runtime"' : ''}>${v.name}</button>`;
  }).join('');
}

function refreshMsbState() {
  const msbId = 'msb-articles';
  const def = EL_DEFS[msbId];
  if (!def) return;
  const bkey = msbId + '|Active State';
  const isBound = !!S.bindings[bkey];
  const msbEl = document.getElementById(msbId);
  if (!msbEl) return;

  if (isBound) {
    msbEl.classList.add('bound');
    document.querySelectorAll('#' + msbId + ' .msb-view').forEach(v => v.classList.remove('active'));
    const activeEl = document.getElementById('msb-view-' + def.activeView);
    if (activeEl) activeEl.classList.add('active');
  } else {
    msbEl.classList.remove('bound');
    document.querySelectorAll('#' + msbId + ' .msb-view').forEach(v => v.classList.remove('active'));
    const unboundEl = document.getElementById('msb-view-unbound');
    if (unboundEl) unboundEl.classList.add('active');
  }
  refreshAllPills();
}

/* ── PRODUCT MODE & SPEC PAGES ── */

const PRODUCT_SPECS = {
  'connect-value-panel': {
    title: 'Connect · Value Panel',
    component: 'Binding Dropdown (#dd)',
    status: 'implemented',
    owner: 'Context Binding Team',
    lastUpdated: 'Feb 2026',
    version: '2.0',
    sections: [
      {
        title: '📌 Overview',
        type: 'text',
        content: `The <b>Connect · Value Panel</b> is the core binding interface that allows users to connect any element property to a data source field. It appears as a floating dropdown positioned near the property row in the inspector, and provides a guided two-step flow: <b>Select Source → Select Field → Confirm Bind</b>.`
      },
      {
        title: '🎯 Purpose & Goals',
        type: 'list',
        items: [
          'Enable users to visually bind element properties (text value, image source, visibility, etc.) to context data fields without writing code',
          'Provide a clear, step-by-step flow that prevents invalid bindings through type compatibility checks',
          'Support both <b>data contexts</b> (CMS collections, APIs, custom datasets) and <b>function libraries</b> (formatters, transformers) as binding sources',
          'Handle nested scoping automatically when elements are inside repeaters — only showing fields from the correct scope level',
          'Give immediate visual feedback on the canvas when a binding is confirmed (bound indicator, sample data preview)'
        ]
      },
      {
        title: '🏗️ Architecture & Structure',
        type: 'html',
        content: `<div class="spec-wireframe">
          <div class="spec-wireframe-label">Component Structure</div>
          <div class="spec-wireframe-body">
            <svg viewBox="0 0 380 280" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%;max-width:380px">
              <rect x="1" y="1" width="378" height="278" rx="10" stroke="#c8c8d8" stroke-width="1" fill="#f8f8fc"/>
              <rect x="1" y="1" width="378" height="34" rx="10" fill="#eeeef5"/>
              <rect x="1" y="25" width="378" height="10" fill="#eeeef5"/>
              <text x="16" y="22" font-size="11" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Connect · Value</text>
              <text x="352" y="22" font-size="13" font-family="DM Sans" fill="#8888a8">✕</text>
              <text x="16" y="56" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT SOURCE</text>
              <rect x="12" y="62" width="356" height="32" rx="6" stroke="#c8c8d8" fill="white"/>
              <text x="22" y="82" font-size="11" font-family="DM Sans" fill="#4a4a6a">☁️ Weather App</text>
              <text x="340" y="82" font-size="9" fill="#8888a8">▾</text>
              <text x="16" y="116" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT FIELD</text>
              <rect x="12" y="122" width="356" height="32" rx="6" stroke="#3b82f6" stroke-width="1.5" fill="#3b82f608"/>
              <text x="22" y="142" font-size="11" font-family="DM Sans" fill="#3b82f6">temperature</text>
              <text x="340" y="142" font-size="9" fill="#8888a8">▾</text>
              <rect x="12" y="170" width="356" height="32" rx="6" fill="#3b82f6"/>
              <text x="140" y="190" font-size="11" font-family="DM Sans" fill="white" font-weight="500">✓ Bind · temperature</text>
              <rect x="12" y="215" width="356" height="50" rx="6" fill="#f0f0f5" stroke="#e0e0ea"/>
              <text x="22" y="234" font-size="9" font-family="DM Mono" fill="#8888a8">PREVIEW</text>
              <text x="22" y="252" font-size="11" font-family="DM Sans" fill="#4a4a6a">"24°C"</text>
            </svg>
          </div>
        </div>`
      },
      {
        title: '⚡ User Flow',
        type: 'flow',
        steps: ['Click ⚡ on property row', 'Panel opens near property', 'Select source context', 'Source dropdown closes, field opens', 'Select compatible field', 'Click "Bind" to confirm', 'Canvas updates with bound data']
      },
      {
        title: '🎬 Happy Flow Demo',
        type: 'html',
        content: `<div class="spec-text">Interactive walkthrough of the complete binding flow — from clicking the connect icon to seeing bound data on the canvas.</div>
        <div class="spec-demo-wrap" id="spec-demo">
          <div class="spec-demo-label">
            <span>Happy Flow Walkthrough</span>
            <span class="spec-demo-badge">ANIMATED</span>
          </div>
          <div class="spec-demo-body">
            <div class="spec-demo-canvas" id="spec-demo-canvas"></div>
          </div>
          <div class="spec-demo-caption" id="spec-demo-caption">Click Play to start the walkthrough</div>
          <div class="spec-demo-timeline" id="spec-demo-timeline"></div>
          <div class="spec-demo-controls">
            <button class="spec-demo-btn" onclick="specDemoPrev()">← Prev</button>
            <button class="spec-demo-btn" id="spec-demo-play-btn" onclick="specDemoTogglePlay()">▶ Play</button>
            <button class="spec-demo-btn" onclick="specDemoNext()">Next →</button>
          </div>
        </div>`
      },
      {
        title: '📐 Functional Requirements',
        type: 'table',
        headers: ['Requirement', 'Description', 'Status'],
        rows: [
          ['Two-step selection', 'Source dropdown → Field dropdown. Selecting a source auto-opens the field list.', '<span class="spec-status implemented">Implemented</span>'],
          ['Type compatibility', 'Field list filters to only show fields whose type is compatible with the property being bound (e.g., Image prop only shows image fields).', '<span class="spec-status implemented">Implemented</span>'],
          ['Scoped context (repeaters)', 'When an element is inside a repeater, the panel automatically scopes fields to the repeated item level, with a visual breadcrumb showing the scope path.', '<span class="spec-status implemented">Implemented</span>'],
          ['Function libraries', 'Sources include both data contexts and function libraries (formatters). Functions have parameter configuration after binding.', '<span class="spec-status implemented">Implemented</span>'],
          ['Out-of-scope fallback', 'If no context exists on the parent section, page-level contexts are shown with a warning notice.', '<span class="spec-status implemented">Implemented</span>'],
          ['Pre-selection memory', 'If the property is already bound, opening the panel pre-selects the current source and field.', '<span class="spec-status implemented">Implemented</span>'],
          ['Auto-select single source', 'When only one context is available, it is auto-selected to save the user a click.', '<span class="spec-status implemented">Implemented</span>'],
          ['Confirm binding', 'The "Bind" button only activates when both source and field are selected. Clicking it writes to the binding map and updates the canvas.', '<span class="spec-status implemented">Implemented</span>'],
          ['Keyboard shortcut', 'Pressing Escape closes the panel without binding.', '<span class="spec-status planned">Planned</span>'],
          ['Search/filter fields', 'A search input in the field dropdown to filter long field lists.', '<span class="spec-status planned">Planned</span>']
        ]
      },
      {
        title: '🔌 Data Model',
        type: 'html',
        content: `<div class="spec-text">The panel reads from and writes to the global state <span class="spec-code">S.dd</span> object and the <span class="spec-code">S.bindings</span> map.</div>
        <table class="spec-table">
          <tr><th>State Key</th><th>Type</th><th>Description</th></tr>
          <tr><td><span class="spec-code">S.dd.open</span></td><td>boolean</td><td>Whether the panel is currently visible</td></tr>
          <tr><td><span class="spec-code">S.dd.elId</span></td><td>string</td><td>The element ID being bound</td></tr>
          <tr><td><span class="spec-code">S.dd.propKey</span></td><td>string</td><td>The property key being bound (e.g., "Value", "Source")</td></tr>
          <tr><td><span class="spec-code">S.dd.srcId</span></td><td>string | null</td><td>Currently selected source context ID</td></tr>
          <tr><td><span class="spec-code">S.dd.fieldName</span></td><td>string | null</td><td>Currently selected field name</td></tr>
          <tr><td><span class="spec-code">S.dd.openPanel</span></td><td>'src' | 'field' | null</td><td>Which dropdown is currently expanded</td></tr>
          <tr><td><span class="spec-code">S.bindings[key]</span></td><td>object</td><td>Final binding record: <span class="spec-code">{ctxId, fieldName, sample}</span></td></tr>
        </table>`
      },
      {
        title: '📏 Layout & Positioning',
        type: 'html',
        content: `<div class="spec-note"><span class="spec-note-icon">📐</span><div>The panel is positioned dynamically. It anchors to the left edge of the right inspector panel minus the panel width (260px), ensuring it sits adjacent to the property row that triggered it. Vertical position is set to <span class="spec-code">top: 0</span> to align with the canvas top.</div></div>
        <table class="spec-table">
          <tr><th>Property</th><th>Value</th></tr>
          <tr><td>Width</td><td>260px (fixed)</td></tr>
          <tr><td>Max height</td><td>Viewport height minus padding</td></tr>
          <tr><td>Position</td><td>Fixed, calculated from inspector panel edge</td></tr>
          <tr><td>Z-index</td><td>600 (above canvas, below modals)</td></tr>
          <tr><td>Border radius</td><td>10px</td></tr>
          <tr><td>Shadow</td><td>0 8px 30px rgba(0,0,0,0.12)</td></tr>
        </table>`
      },
      {
        title: '🎨 Visual States',
        type: 'list',
        items: [
          '<b>Closed</b> — Panel hidden, <span class="spec-code">display: none</span>',
          '<b>Open · No selection</b> — Both dropdowns collapsed, source shows "Select…"',
          '<b>Source expanded</b> — Source dropdown open showing available contexts grouped under CONTEXTS and FUNCTION LIBRARIES headers',
          '<b>Source selected, field expanding</b> — Source dropdown closes, field dropdown auto-opens',
          '<b>Field selected</b> — Both dropdowns show selected values, "Bind" button becomes active (blue)',
          '<b>Already bound (re-opening)</b> — Pre-selects current source and field, both dropdowns collapsed'
        ]
      },
      {
        title: '⚠️ Edge Cases',
        type: 'list',
        items: [
          'No context on parent section → shows page-level contexts with an "out of scope" warning banner',
          'No compatible fields for property type → shows empty state with "No compatible fields" message and explanatory text',
          'Element inside nested repeater → field list is scoped to the repeater item level with a blue scope breadcrumb header',
          'Function library selected → field label changes to "Select Function", field names render in monospace',
          'Function with parameters → after binding, parameter rows appear in the inspector for additional configuration',
          'Clicking outside the panel → panel closes without binding',
          'Single available context → auto-selects the source, skipping the first selection step'
        ]
      },
      {
        title: '🔗 Related Components',
        type: 'html',
        content: `<div class="spec-flow">
          <div class="spec-flow-step">Inspector Property Row</div>
          <div class="spec-flow-arrow">→</div>
          <div class="spec-flow-step" style="border-color:var(--acc);color:var(--acc);font-weight:600">Connect Panel (this)</div>
          <div class="spec-flow-arrow">→</div>
          <div class="spec-flow-step">Canvas Binding Indicator</div>
          <div class="spec-flow-arrow">→</div>
          <div class="spec-flow-step">Context Pill</div>
        </div>
        <div class="spec-text" style="margin-top:8px">The panel is triggered from the property row's ⚡ icon in the inspector. On successful binding, it updates the canvas element's visual state (adds <span class="spec-code">.bound</span> class and bind tag) and refreshes the context pill to reflect the new connection.</div>`
      }
    ]
  }
};

const SPEC_MAP = {
  'dd': 'connect-value-panel',
  'dd-body': 'connect-value-panel',
  'dd-title': 'connect-value-panel',
};

function getSpecIdForElement(elId) {
  if (SPEC_MAP[elId]) return SPEC_MAP[elId];
  const el = document.getElementById(elId);
  if (el && el.closest('#dd')) return 'connect-value-panel';
  if (el && el.closest('.dd')) return 'connect-value-panel';
  return null;
}

function toggleProductMode() {
  S.productMode = !S.productMode;
  const btn = document.getElementById('product-mode-btn');
  btn.classList.toggle('product-mode-active', S.productMode);
  document.body.classList.toggle('product-mode', S.productMode);
  toast(S.productMode ? '📋 Product Mode ON — right-click components to view specs' : 'Product Mode OFF', S.productMode);
}

function openSpecFromContextMenu() {
  document.getElementById('canvas-ctx-menu').classList.remove('open');
  if (_ctxMenuSpecId) {
    openSpecPage(_ctxMenuSpecId);
  }
}

function openSpecPage(specId) {
  const spec = PRODUCT_SPECS[specId];
  if (!spec) { toast('No spec found for this component'); return; }

  closeDd();
  closeEtPanel();
  S.specPageOpen = true;
  S.specPageId = specId;
  S.preSpecPage = S.currentPage;

  document.getElementById('spec-topbar-name').textContent = spec.title;
  document.getElementById('spec-body').innerHTML = renderSpecContent(spec);
  updateSpecElementInfo(specId);
  document.getElementById('spec-page').classList.add('active');
  document.querySelector('.topbar').style.display = 'none';
  document.getElementById('action-bar').style.display = 'none';
  setTimeout(specDemoInit, 100);
}

function closeSpecPage() {
  S.specPageOpen = false;
  specDemoStopPlay();
  document.getElementById('spec-page').classList.remove('active');
  document.querySelector('.topbar').style.display = '';
  document.getElementById('action-bar').style.display = '';
  S.specPageId = null;
}

function updateSpecElementInfo(specId) {
  const el = document.getElementById('spec-topbar-element');
  const spec = PRODUCT_SPECS[specId];
  if (!spec) { el.style.display = 'none'; return; }

  let html = '';
  html += `<span class="spec-topbar-element-icon">⚡</span>`;
  html += `<span class="spec-topbar-element-name">${spec.component}</span>`;
  html += `<span class="spec-topbar-element-type">${spec.status}</span>`;

  if (S.sel) {
    const def = EL_DEFS[S.sel];
    if (def) {
      const binding = S.bindings[S.sel + '|Value'] || S.bindings[S.sel + '|Source'];
      html += `<div style="width:1px;height:14px;background:var(--b2)"></div>`;
      html += `<span style="font-size:10px;color:var(--t3)">Selected:</span>`;
      html += `<span style="font-weight:600;color:var(--t1)">${def.name}</span>`;
      if (binding) {
        const ctx = findSource(binding.ctxId);
        html += `<span class="spec-topbar-element-binding">${ctx ? ctx.name : ''} · ${binding.fieldName}</span>`;
      }
    }
  }

  el.innerHTML = html;
  el.style.display = 'flex';
}

function renderSpecContent(spec) {
  let html = `<div class="spec-hero">
    <h1>${spec.title}</h1>
    <div class="spec-hero-sub">${spec.component}</div>
    <div class="spec-meta">
      <div class="spec-meta-item"><span class="spec-status ${spec.status}">${spec.status.charAt(0).toUpperCase() + spec.status.slice(1)}</span></div>
      <div class="spec-meta-item">👤 ${spec.owner}</div>
      <div class="spec-meta-item">📅 ${spec.lastUpdated}</div>
      <div class="spec-meta-item">v${spec.version}</div>
    </div>
  </div>`;

  spec.sections.forEach(sec => {
    html += `<div class="spec-section">`;
    html += `<div class="spec-section-title">${sec.title}</div>`;

    if (sec.type === 'text') {
      html += `<div class="spec-text">${sec.content}</div>`;
    } else if (sec.type === 'list') {
      html += `<ul class="spec-list">${sec.items.map(i => `<li>${i}</li>`).join('')}</ul>`;
    } else if (sec.type === 'table') {
      html += `<table class="spec-table"><thead><tr>${sec.headers.map(h => `<th>${h}</th>`).join('')}</tr></thead><tbody>${sec.rows.map(r => `<tr>${r.map(c => `<td>${c}</td>`).join('')}</tr>`).join('')}</tbody></table>`;
    } else if (sec.type === 'flow') {
      html += `<div class="spec-flow">${sec.steps.map((s, i) => (i > 0 ? '<div class="spec-flow-arrow">→</div>' : '') + `<div class="spec-flow-step">${s}</div>`).join('')}</div>`;
    } else if (sec.type === 'html') {
      html += sec.content;
    }

    html += `</div>`;
  });

  return html;
}

/* ── SPEC DEMO ANIMATION ── */
const SPEC_DEMO_STEPS = [
  {
    caption: '<b>Step 1:</b> User clicks the ⚡ bind icon on the "Value" property row in the inspector',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <!-- Inspector panel bg -->
        <rect x="220" y="0" width="240" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea"/>
        <text x="240" y="24" font-size="11" font-family="DM Sans" fill="#1a1a2e" font-weight="600">Properties</text>
        <rect x="232" y="36" width="216" height="44" rx="6" fill="white" stroke="#e0e0ea"/>
        <text x="244" y="54" font-size="10" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Value</text>
        <text x="244" y="70" font-size="10" font-family="DM Sans" fill="#8888a8" font-style="italic">This is a Title</text>
        <!-- Bind icon with pulse -->
        <rect x="420" y="44" width="24" height="24" rx="5" fill="#3b82f615" stroke="#3b82f640" stroke-width="1.5">
          <animate attributeName="stroke-width" values="1.5;3;1.5" dur="1.2s" repeatCount="indefinite"/>
        </rect>
        <circle cx="432" cy="56" r="8" fill="none" stroke="#3b82f6" stroke-width="1.5" opacity=".3">
          <animate attributeName="r" values="8;16;8" dur="1.2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values=".3;0;.3" dur="1.2s" repeatCount="indefinite"/>
        </circle>
        <text x="428" y="60" font-size="12" font-family="DM Sans" fill="#3b82f6">⚡</text>
        <!-- Cursor -->
        <path d="M438 64 L438 76 L442 72 L447 78" stroke="#1a1a2e" stroke-width="1.5" fill="#1a1a2e" fill-opacity=".1">
          <animate attributeName="opacity" values="1;.6;1" dur="1s" repeatCount="indefinite"/>
        </path>
        <!-- Canvas hint -->
        <rect x="10" y="10" width="195" height="300" rx="8" fill="white" stroke="#e0e0ea"/>
        <text x="30" y="35" font-size="10" font-family="DM Sans" fill="#8888a8">Canvas</text>
        <rect x="30" y="50" width="155" height="24" rx="4" fill="#f5f5f8"/>
        <text x="42" y="66" font-size="11" font-family="DM Sans" fill="#4a4a6a">This is a Title</text>
        <rect x="30" y="82" width="155" height="80" rx="4" fill="#f0f0f5" stroke="#e0e0ea"/>
        <rect x="30" y="172" width="155" height="16" rx="4" fill="#f5f5f8"/>
        <rect x="30" y="194" width="100" height="16" rx="4" fill="#f5f5f8"/>
      </svg>`;
    }
  },
  {
    caption: '<b>Step 2:</b> The Connect panel opens — source dropdown is ready to select',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <rect x="220" y="0" width="240" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea" opacity=".5"/>
        <text x="240" y="24" font-size="11" font-family="DM Sans" fill="#1a1a2e" font-weight="600" opacity=".5">Properties</text>
        <!-- Connect panel -->
        <rect x="100" y="20" width="240" height="180" rx="10" fill="#f0f0f5" stroke="#c8c8d8" filter="url(#shadow1)"/>
        <defs><filter id="shadow1" x="-20" y="-10" width="300" height="220"><feDropShadow dx="0" dy="4" stdDeviation="10" flood-opacity=".1"/></filter></defs>
        <rect x="100" y="20" width="240" height="32" rx="10" fill="#e8e8f0"/>
        <rect x="100" y="42" width="240" height="10" fill="#e8e8f0"/>
        <text x="116" y="42" font-size="11" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Connect · Value</text>
        <text x="320" y="42" font-size="12" font-family="DM Sans" fill="#8888a8">✕</text>
        <text x="116" y="72" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT SOURCE</text>
        <rect x="112" y="78" width="216" height="30" rx="6" stroke="#c8c8d8" fill="white"/>
        <text x="124" y="97" font-size="11" font-family="DM Sans" fill="#8888a8">Select…</text>
        <text x="308" y="97" font-size="9" fill="#8888a8">▾</text>
        <text x="116" y="126" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT FIELD</text>
        <rect x="112" y="132" width="216" height="30" rx="6" stroke="#c8c8d8" fill="white" opacity=".5"/>
        <text x="124" y="151" font-size="11" font-family="DM Sans" fill="#b0b0c8">Pick source first</text>
        <rect x="112" y="174" width="216" height="22" rx="6" fill="#c8c8d8"/>
        <text x="184" y="189" font-size="10" font-family="DM Sans" fill="white">✓ Bind</text>
        <!-- Pulse on source box -->
        <rect x="112" y="78" width="216" height="30" rx="6" fill="none" stroke="#3b82f6" stroke-width="1.5" opacity=".6">
          <animate attributeName="opacity" values=".6;.2;.6" dur="1.5s" repeatCount="indefinite"/>
        </rect>
        <!-- Canvas dimmed -->
        <rect x="10" y="10" width="80" height="300" rx="8" fill="white" stroke="#e0e0ea" opacity=".3"/>
      </svg>`;
    }
  },
  {
    caption: '<b>Step 3:</b> User opens the source dropdown and selects <b>"Weather App"</b>',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <rect x="220" y="0" width="240" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea" opacity=".5"/>
        <!-- Connect panel -->
        <rect x="100" y="20" width="240" height="260" rx="10" fill="#f0f0f5" stroke="#c8c8d8" filter="url(#shadow2)"/>
        <defs><filter id="shadow2" x="-20" y="-10" width="300" height="300"><feDropShadow dx="0" dy="4" stdDeviation="10" flood-opacity=".1"/></filter></defs>
        <rect x="100" y="20" width="240" height="32" rx="10" fill="#e8e8f0"/>
        <rect x="100" y="42" width="240" height="10" fill="#e8e8f0"/>
        <text x="116" y="42" font-size="11" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Connect · Value</text>
        <text x="320" y="42" font-size="12" font-family="DM Sans" fill="#8888a8">✕</text>
        <text x="116" y="72" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT SOURCE</text>
        <rect x="112" y="78" width="216" height="30" rx="6" stroke="#3b82f6" stroke-width="1.5" fill="white"/>
        <text x="124" y="97" font-size="11" font-family="DM Sans" fill="#4a4a6a">Select…</text>
        <text x="308" y="96" font-size="9" fill="#3b82f6">▴</text>
        <!-- Dropdown open -->
        <text x="118" y="124" font-size="8" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">CONTEXTS</text>
        <rect x="112" y="129" width="216" height="28" rx="4" fill="#3b82f612" stroke="#3b82f640"/>
        <text x="126" y="147" font-size="11" font-family="DM Sans" fill="#3b82f6">☁️ Weather App</text>
        <text x="126" y="158" font-size="9" font-family="DM Sans" fill="#8888a8">Weather App · object</text>
        <rect x="112" y="162" width="216" height="28" rx="4" fill="transparent"/>
        <text x="126" y="180" font-size="11" font-family="DM Sans" fill="#4a4a6a">📝 CMS Articles</text>
        <text x="126" y="191" font-size="9" font-family="DM Sans" fill="#8888a8">CMS Collection · array</text>
        <text x="118" y="210" font-size="8" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">FUNCTION LIBRARIES</text>
        <rect x="112" y="215" width="216" height="28" rx="4" fill="transparent"/>
        <text x="126" y="233" font-size="11" font-family="DM Sans" fill="#4a4a6a">🔧 Formatters</text>
        <!-- Cursor on Weather App -->
        <path d="M200 148 L200 160 L204 156 L209 162" stroke="#1a1a2e" stroke-width="1.5" fill="#1a1a2e" fill-opacity=".1"/>
        <rect x="10" y="10" width="80" height="300" rx="8" fill="white" stroke="#e0e0ea" opacity=".3"/>
      </svg>`;
    }
  },
  {
    caption: '<b>Step 4:</b> Source selected — field dropdown auto-opens showing compatible fields',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <rect x="220" y="0" width="240" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea" opacity=".5"/>
        <!-- Connect panel -->
        <rect x="100" y="20" width="240" height="270" rx="10" fill="#f0f0f5" stroke="#c8c8d8" filter="url(#shadow3)"/>
        <defs><filter id="shadow3" x="-20" y="-10" width="300" height="310"><feDropShadow dx="0" dy="4" stdDeviation="10" flood-opacity=".1"/></filter></defs>
        <rect x="100" y="20" width="240" height="32" rx="10" fill="#e8e8f0"/>
        <rect x="100" y="42" width="240" height="10" fill="#e8e8f0"/>
        <text x="116" y="42" font-size="11" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Connect · Value</text>
        <text x="320" y="42" font-size="12" font-family="DM Sans" fill="#8888a8">✕</text>
        <text x="116" y="72" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT SOURCE</text>
        <rect x="112" y="78" width="216" height="30" rx="6" stroke="#c8c8d8" fill="#f8f8fc"/>
        <text x="126" y="97" font-size="11" font-family="DM Sans" fill="#4a4a6a">☁️ Weather App</text>
        <text x="308" y="97" font-size="9" fill="#8888a8">▾</text>
        <text x="116" y="126" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT FIELD</text>
        <rect x="112" y="132" width="216" height="30" rx="6" stroke="#3b82f6" stroke-width="1.5" fill="white"/>
        <text x="124" y="151" font-size="11" font-family="DM Sans" fill="#8888a8">Select…</text>
        <text x="308" y="150" font-size="9" fill="#3b82f6">▴</text>
        <!-- Field dropdown -->
        <rect x="112" y="168" width="216" height="26" rx="4" fill="transparent"/>
        <text x="126" y="185" font-size="11" font-family="DM Sans" fill="#4a4a6a">city</text>
        <text x="286" y="185" font-size="9" font-family="DM Mono" fill="#8888a8" text-anchor="end">string</text>
        <rect x="112" y="194" width="216" height="26" rx="4" fill="#3b82f608" stroke="#3b82f630"/>
        <text x="126" y="211" font-size="11" font-family="DM Sans" fill="#3b82f6" font-weight="500">temperature</text>
        <text x="286" y="211" font-size="9" font-family="DM Mono" fill="#3b82f6" text-anchor="end">number</text>
        <rect x="112" y="220" width="216" height="26" rx="4" fill="transparent"/>
        <text x="126" y="237" font-size="11" font-family="DM Sans" fill="#4a4a6a">condition</text>
        <text x="286" y="237" font-size="9" font-family="DM Mono" fill="#8888a8" text-anchor="end">enum</text>
        <rect x="112" y="246" width="216" height="26" rx="4" fill="transparent"/>
        <text x="126" y="263" font-size="11" font-family="DM Sans" fill="#4a4a6a">humidity</text>
        <text x="286" y="263" font-size="9" font-family="DM Mono" fill="#8888a8" text-anchor="end">number</text>
        <!-- Cursor on temperature -->
        <path d="M230 212 L230 224 L234 220 L239 226" stroke="#1a1a2e" stroke-width="1.5" fill="#1a1a2e" fill-opacity=".1"/>
        <rect x="10" y="10" width="80" height="300" rx="8" fill="white" stroke="#e0e0ea" opacity=".3"/>
      </svg>`;
    }
  },
  {
    caption: '<b>Step 5:</b> Field "temperature" selected — <b>Bind button activates</b>',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <rect x="220" y="0" width="240" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea" opacity=".5"/>
        <!-- Connect panel -->
        <rect x="100" y="20" width="240" height="190" rx="10" fill="#f0f0f5" stroke="#c8c8d8" filter="url(#shadow4)"/>
        <defs><filter id="shadow4" x="-20" y="-10" width="300" height="230"><feDropShadow dx="0" dy="4" stdDeviation="10" flood-opacity=".1"/></filter></defs>
        <rect x="100" y="20" width="240" height="32" rx="10" fill="#e8e8f0"/>
        <rect x="100" y="42" width="240" height="10" fill="#e8e8f0"/>
        <text x="116" y="42" font-size="11" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Connect · Value</text>
        <text x="320" y="42" font-size="12" font-family="DM Sans" fill="#8888a8">✕</text>
        <text x="116" y="72" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT SOURCE</text>
        <rect x="112" y="78" width="216" height="30" rx="6" stroke="#c8c8d8" fill="#f8f8fc"/>
        <text x="126" y="97" font-size="11" font-family="DM Sans" fill="#4a4a6a">☁️ Weather App</text>
        <text x="308" y="97" font-size="9" fill="#8888a8">▾</text>
        <text x="116" y="126" font-size="9" font-family="DM Mono" fill="#8888a8" letter-spacing="0.5">SELECT FIELD</text>
        <rect x="112" y="132" width="216" height="30" rx="6" stroke="#3b82f6" stroke-width="1.5" fill="#3b82f608"/>
        <text x="126" y="151" font-size="11" font-family="DM Sans" fill="#3b82f6">temperature</text>
        <text x="308" y="151" font-size="9" fill="#8888a8">▾</text>
        <!-- Bind button active -->
        <rect x="112" y="176" width="216" height="28" rx="6" fill="#3b82f6">
          <animate attributeName="fill" values="#3b82f6;#2563eb;#3b82f6" dur="1.5s" repeatCount="indefinite"/>
        </rect>
        <text x="168" y="194" font-size="11" font-family="DM Sans" fill="white" font-weight="500">✓ Bind · temperature</text>
        <!-- Cursor approaching bind -->
        <path d="M260 200 L260 212 L264 208 L269 214" stroke="#1a1a2e" stroke-width="1.5" fill="#1a1a2e" fill-opacity=".1">
          <animateTransform attributeName="transform" type="translate" values="0,0;0,-6;0,0" dur="1s" repeatCount="indefinite"/>
        </path>
        <rect x="10" y="10" width="80" height="300" rx="8" fill="white" stroke="#e0e0ea" opacity=".3"/>
      </svg>`;
    }
  },
  {
    caption: '<b>Step 6:</b> Binding confirmed! Canvas element now shows <b>bound data</b> with visual indicators',
    render: function(ctx) {
      return `<svg viewBox="0 0 460 320" fill="none" xmlns="http://www.w3.org/2000/svg" style="width:100%">
        <!-- Canvas -->
        <rect x="30" y="10" width="260" height="300" rx="8" fill="white" stroke="#e0e0ea"/>
        <text x="50" y="35" font-size="10" font-family="DM Sans" fill="#8888a8">Canvas</text>
        <!-- Element with bound state -->
        <rect x="50" y="50" width="220" height="36" rx="6" fill="white" stroke="#d946a8" stroke-width="1.5" stroke-dasharray="0">
          <animate attributeName="stroke-dasharray" values="10,5;0,0;0,0" dur="1s" fill="freeze" repeatCount="1"/>
        </rect>
        <!-- Bound dot -->
        <circle cx="60" cy="68" r="4" fill="#d946a8">
          <animate attributeName="r" values="0;4;4" dur=".6s" fill="freeze"/>
        </circle>
        <!-- Bind tag -->
        <rect x="70" y="53" width="120" height="14" rx="3" fill="#d946a812">
          <animate attributeName="opacity" values="0;1" dur=".5s" fill="freeze"/>
        </rect>
        <text x="76" y="63" font-size="8" font-family="DM Mono" fill="#d946a8" font-weight="600">
          ☁️ Weather · temperature
          <animate attributeName="opacity" values="0;1" dur=".5s" fill="freeze"/>
        </text>
        <!-- Updated value -->
        <text x="62" y="80" font-size="13" font-family="DM Sans" fill="#1a1a2e" font-weight="500">"24°C"</text>
        <!-- Other elements -->
        <rect x="50" y="100" width="220" height="80" rx="4" fill="#f0f0f5" stroke="#e0e0ea"/>
        <rect x="50" y="190" width="220" height="16" rx="4" fill="#f5f5f8"/>
        <rect x="50" y="214" width="140" height="16" rx="4" fill="#f5f5f8"/>
        <!-- Context pill -->
        <rect x="20" y="46" width="20" height="94" rx="4" fill="#d946a812" stroke="#d946a835">
          <animate attributeName="opacity" values="0;1" dur=".5s" fill="freeze"/>
        </rect>
        <text x="30" y="96" font-size="8" font-family="DM Sans" fill="#d946a8" transform="rotate(-90,30,96)">☁️ Weather</text>
        <!-- Inspector showing bound state -->
        <rect x="310" y="0" width="150" height="320" rx="0" fill="#f5f5f8" stroke="#e0e0ea"/>
        <text x="322" y="24" font-size="10" font-family="DM Sans" fill="#1a1a2e" font-weight="600">Properties</text>
        <rect x="318" y="36" width="134" height="50" rx="6" fill="white" stroke="#e0e0ea"/>
        <text x="326" y="52" font-size="9" font-family="DM Sans" fill="#4a4a6a" font-weight="600">Value</text>
        <rect x="326" y="58" width="100" height="18" rx="4" fill="#d946a812" stroke="#d946a835"/>
        <text x="332" y="71" font-size="8" font-family="DM Mono" fill="#d946a8">temperature</text>
        <rect x="430" y="56" width="16" height="18" rx="3" fill="#d946a812" stroke="#d946a835"/>
        <text x="434" y="69" font-size="9" fill="#d946a8">⚡</text>
        <!-- Toast -->
        <rect x="140" y="268" width="180" height="28" rx="14" fill="#1a1a2e">
          <animate attributeName="opacity" values="0;1;1;1" dur="2s" fill="freeze"/>
        </rect>
        <text x="170" y="286" font-size="10" font-family="DM Sans" fill="#22c55e" font-weight="500">
          ✓ Bound to temperature
          <animate attributeName="opacity" values="0;1;1;1" dur="2s" fill="freeze"/>
        </text>
      </svg>`;
    }
  }
];

let _specDemoStep = 0;
let _specDemoTimer = null;
let _specDemoPlaying = false;

function specDemoInit() {
  const canvas = document.getElementById('spec-demo-canvas');
  const timeline = document.getElementById('spec-demo-timeline');
  if (!canvas || !timeline) return;

  let tlHtml = '';
  SPEC_DEMO_STEPS.forEach(function(s, i) {
    if (i > 0) tlHtml += '<div class="spec-demo-line" id="spec-demo-line-' + (i-1) + '"></div>';
    tlHtml += '<div class="spec-demo-dot" id="spec-demo-dot-' + i + '" onclick="specDemoGoTo(' + i + ')"></div>';
  });
  timeline.innerHTML = tlHtml;

  _specDemoStep = 0;
  specDemoRender();
}

function specDemoRender() {
  var canvas = document.getElementById('spec-demo-canvas');
  var caption = document.getElementById('spec-demo-caption');
  if (!canvas) return;

  canvas.innerHTML = SPEC_DEMO_STEPS[_specDemoStep].render();
  if (caption) caption.innerHTML = SPEC_DEMO_STEPS[_specDemoStep].caption;

  SPEC_DEMO_STEPS.forEach(function(s, i) {
    var dot = document.getElementById('spec-demo-dot-' + i);
    var line = document.getElementById('spec-demo-line-' + i);
    if (dot) {
      dot.className = 'spec-demo-dot' + (i === _specDemoStep ? ' active' : '') + (i < _specDemoStep ? ' done' : '');
    }
    if (line) {
      line.className = 'spec-demo-line' + (i < _specDemoStep ? ' done' : '');
    }
  });
}

function specDemoNext() {
  if (_specDemoStep < SPEC_DEMO_STEPS.length - 1) {
    _specDemoStep++;
    specDemoRender();
  } else if (_specDemoPlaying) {
    specDemoStopPlay();
  }
}

function specDemoPrev() {
  if (_specDemoStep > 0) {
    _specDemoStep--;
    specDemoRender();
  }
}

function specDemoGoTo(idx) {
  _specDemoStep = idx;
  specDemoRender();
}

function specDemoTogglePlay() {
  if (_specDemoPlaying) {
    specDemoStopPlay();
  } else {
    _specDemoPlaying = true;
    var btn = document.getElementById('spec-demo-play-btn');
    if (btn) { btn.textContent = '⏸ Pause'; btn.classList.add('playing'); }
    if (_specDemoStep >= SPEC_DEMO_STEPS.length - 1) { _specDemoStep = 0; specDemoRender(); }
    _specDemoTimer = setInterval(specDemoNext, 3000);
  }
}

function specDemoStopPlay() {
  _specDemoPlaying = false;
  clearInterval(_specDemoTimer);
  _specDemoTimer = null;
  var btn = document.getElementById('spec-demo-play-btn');
  if (btn) { btn.textContent = '▶ Play'; btn.classList.remove('playing'); }
}

/* ── TOAST ── */
function toast(msg, ok) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = 'toast show' + (ok?' ok':'');
  clearTimeout(t._t);
  t._t = setTimeout(()=>t.classList.remove('show'), 2400);
}

/* ── CLOSE ON OUTSIDE CLICK ── */
document.addEventListener('click', e => {
  const dd = document.getElementById('dd');
  if (!dd.contains(e.target) && !e.target.closest('.bind-btn')) closeDd();
  const tp = document.getElementById('tree-panel');
  if (!tp.contains(e.target) && !e.target.closest('.ctx-tree-btn') && !e.target.closest('.ctx-tree-cta')) tp.classList.remove('open');
  const pp = document.getElementById('pages-panel');
  if (pp && !pp.contains(e.target) && !e.target.closest('.page-sel')) pp.classList.remove('open');
  // close ctx card dropdowns
  if (!e.target.closest('.ctx-card-menu')) {
    document.querySelectorAll('.ctx-card-dropdown.open').forEach(d => d.classList.remove('open'));
  }
  // close filter confirm popovers
  if (!e.target.closest('.ctx-filter-row')) {
    document.querySelectorAll('.ctx-filter-confirm.open').forEach(p => p.classList.remove('open'));
  }
});

/* ── SURGICAL PROP ROW UPDATE (no full re-render) ── */
function updatePropRowDOM(elId, propKey) {
  // find the prop definition
  const def = EL_DEFS[elId];
  if (!def) return;
  if (propKey === 'Visible') {
    const visCat = document.getElementById('rp-cat-visibility');
    if (visCat && S.sel === elId) {
      const visibleProp = def.props.find(p => p.k === 'Visible');
      const body = visCat.querySelector('.rp-cat-body');
      if (body) body.innerHTML = renderVisibleProp(elId, visibleProp);
    }
    return;
  }
  const prop = def.props.find(p => p.k === propKey);
  if (!prop) return;
  const rowId = `pr-${elId}-${propKey.replace(/\s/g,'_')}`;
  const existingRow = document.getElementById(rowId);
  if (!existingRow) return;
  const tmp = document.createElement('div');
  tmp.innerHTML = renderPropRow(elId, prop);
  existingRow.replaceWith(tmp.firstElementChild);
}

/* ── REPEATER: propagate binding to all items ── */
const ARTICLES_DATA = [{"title": "The Future of AI in Design", "author": "Sarah Chen", "category": "Tech", "readTime": "5 min"}, {"title": "Building Better Products", "author": "Mark Rivera", "category": "Product", "readTime": "8 min"}, {"title": "Design Systems at Scale", "author": "Jane Doe", "category": "Design", "readTime": "6 min"}];

function applyRepBindingToAll(templateKey, propKey, field, ctxId) {
  const ctx = findSource(ctxId);
  // update all 3 items (item 1 already done by applyBindingToCanvas, but redo for consistency)
  [1,2,3].forEach(i => {
    const elId = templateKey + '-' + i;
    const domEl = document.getElementById(elId);
    if (!domEl) return;
    const article = ARTICLES_DATA[i-1] || {};
    const realVal = article[field.name] || field.sample.replace(/^"|"$/g, '');
    S.bindings[elId + '|' + propKey] = {ctxId, fieldName: field.name, sample: '"' + realVal + '"'};
    domEl.classList.add('bound');
    const srcTag = document.getElementById('src-' + elId);
    if (srcTag) srcTag.textContent = ctx ? 'Connected · ' + field.name : '';
    const bindTag = domEl.querySelector('.el-bind-tag');
    if (bindTag) bindTag.textContent = ctx ? 'Connected · ' + field.name : '';
    // update value: text elements use v-{id}, image elements use cimg-{id}
    if (domEl.classList.contains('c-el-img') || domEl.classList.contains('c-el-badge') && false) {
      const cimg = document.getElementById('cimg-' + elId);
      if (cimg) cimg.src = IMG_SKY;
    } else {
      const valEl = document.getElementById('v-' + elId);
      if (valEl) {
        valEl.textContent = realVal;
        if (valEl.classList.contains('val')) valEl.classList.remove('static');
      }
    }
  });
}

/* ── PARAM DROPDOWN ── */
function renderDdParam(body, elId, propKey, paramName) {
  const mainBinding = S.bindings[`${elId}|${propKey}`];
  const param = mainBinding?.fnParams?.find(p => p.name === paramName);
  if (!param) return;

  const available = getAvailableCtx(elId, true);
  const srcId = S.dd.srcId;
  const fieldName = S.dd.fieldName;
  const srcOpen = S.dd.openPanel === 'src';
  const fieldOpen = S.dd.openPanel === 'field';
  const selectedCtx = srcId ? findSource(srcId) : null;

  if (!S.dd.srcId && available.length === 1) {
    S.dd.srcId = available[0].id;
    S.dd.openPanel = 'field';
  }

  const ctxItems = available.length === 0
    ? `<div class="dd-notice" style="padding:8px 12px;line-height:1.6">No contexts available.</div>`
    : available.map(ctx => `
        <div class="dd-sel-item ${S.dd.srcId===ctx.id?'sel':''}" onclick="ddParamSelSource(event,'${ctx.id}')">
          <div style="flex:1;min-width:0">
            <div class="dd-sel-item-name">${ctx.name}</div>
            <div class="dd-sel-item-sub">${ctx.source} · ${ctx.type}</div>
          </div>
        </div>`).join('');

  const srcItems = `<div class="dd-src-section">
      <div class="dd-src-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"/><path d="M4 12h16"/><path d="M4 17h10"/></svg> Data Sources <span class="dd-src-count">${available.length}</span></div>
      ${ctxItems}
    </div>`;

  const filteredFields = !selectedCtx ? [] : selectedCtx.fields.filter(f => isCompat(f.type, param.type));

  const fieldItems = !selectedCtx
    ? `<div class="dd-sel-item" style="opacity:.4;pointer-events:none;padding:8px 10px;font-size:11px;color:var(--t3)">Select a source first</div>`
    : filteredFields.length === 0
    ? `<div style="padding:12px 14px;text-align:center">
        <div style="font-size:22px;margin-bottom:6px">🔍</div>
        <div style="font-size:11px;font-weight:600;color:var(--t2);margin-bottom:4px">No compatible fields</div>
        <div style="font-size:10px;color:var(--t3);line-height:1.5">No fields match <span style="font-family:'DM Mono',monospace;color:var(--acc)">${param.type}</span> for this parameter.</div>
      </div>`
    : filteredFields.map(f => `<div class="dd-sel-item ${fieldName===f.name?'sel':''}" onclick="ddParamSelField(event,'${f.name}')">
          <div style="flex:1;min-width:0">
            <div>${f.name}</div>
            <div class="dd-sel-item-sub">${f.sample || f.type}</div>
          </div>
          <span class="dd-sel-tag">${f.type}</span>
        </div>`).join('');

  body.innerHTML = `
    <div style="padding:6px 10px;font-size:9px;color:var(--acc);font-family:'DM Mono',monospace;background:var(--acc-d);border-bottom:1px solid color-mix(in srgb, var(--acc) 20%, transparent)">
      <span style="text-transform:uppercase;letter-spacing:.5px">⚡ PARAM: ${paramName}</span>
    </div>
    <div class="dd-selectors">
      <div class="dd-sel-group">
        <div class="dd-sel-label">Select Source</div>
        <div class="dd-sel-box ${S.dd.srcId?'filled':''} ${srcOpen?'open':''}" id="dd-src-box">
          <div class="dd-sel-trigger ${S.dd.srcId?'has-val':''}" onclick="toggleParamSrcBox(event)">
            ${S.dd.srcId && selectedCtx
              ? `<span>${selectedCtx.icon}</span><span>${selectedCtx.name}</span>`
              : `<span style="color:var(--t3)">Select…</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${srcItems}</div>
        </div>
      </div>
      <div class="dd-sel-group">
        <div class="dd-sel-label">Select Field</div>
        <div class="dd-sel-box ${fieldName?'filled':''} ${fieldOpen?'open':''} ${!S.dd.srcId?'style="opacity:.5;pointer-events:none"':''}" id="dd-field-box">
          <div class="dd-sel-trigger ${fieldName?'has-val green':''}" onclick="toggleParamFieldBox(event)">
            ${fieldName ? `<span>${fieldName}</span>` : `<span style="color:var(--t3)">${S.dd.srcId ? 'Select…' :'Pick source first'}</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${fieldItems}</div>
        </div>
      </div>
    </div>
    <button class="dd-confirm ${(S.dd.srcId && fieldName)?'show':''}" onclick="confirmParamBind(event)">
      ✓ Bind · ${paramName}${fieldName ? ` → ${fieldName}` : ''}
    </button>
  `;
}

function toggleParamSrcBox(e) { if (e) e.stopPropagation(); S.dd.openPanel = S.dd.openPanel === 'src' ? null : 'src'; renderDd(); }
function toggleParamFieldBox(e) { if (e) e.stopPropagation(); if (!S.dd.srcId) return; S.dd.openPanel = S.dd.openPanel === 'field' ? null : 'field'; renderDd(); }
function ddParamSelSource(e, id) { if (e) e.stopPropagation(); S.dd.srcId = id; S.dd.fieldName = null; S.dd.openPanel = 'field'; renderDd(); }
function ddParamSelField(e, name) { if (e) e.stopPropagation(); S.dd.fieldName = name; S.dd.openPanel = null; renderDd(); }

function confirmParamBind(e) {
  if (e) e.stopPropagation();
  const {elId, propKey, paramName, srcId, fieldName} = S.dd;
  if (!srcId || !fieldName || !paramName) return;
  const ctx = findSource(srcId);
  const field = ctx.fields.find(f => f.name === fieldName);
  const paramBKey = `${elId}|${propKey}|param:${paramName}`;
  S.bindings[paramBKey] = {ctxId: srcId, fieldName, sample: field?.sample || ''};
  closeDd();
  toast(`✓ ${paramName} → ${ctx.name} · ${fieldName}`, true);
  updateFnCanvasPreview(elId, propKey);
  updatePropRowDOM(elId, propKey);
}

/* ── REPEATER ITEMS DROPDOWN — two-step: context → array field ── */
function renderDdRepeaterItems(body, elId, srcId) {
  const def = EL_DEFS[elId];
  const parentId = def?.section;
  const ids = S.ctxMap[parentId] || [];
  // all contexts on parent section (any type), excluding unmodified instances
  const allContexts = ids
    .map(id => findSource(id))
    .filter(Boolean)
    .filter(c => !isUnmodifiedInstance(c.id))
    .map(c => ({...c, _scope: EL_DEFS[parentId]?.name || parentId}))
    .sort((a, b) => (CTX_GROUP_ORDER[a.group] ?? 99) - (CTX_GROUP_ORDER[b.group] ?? 99));

  const fieldName = S.dd.fieldName;
  const srcOpen   = S.dd.openPanel === 'src';
  const fieldOpen = S.dd.openPanel === 'field';
  const selectedCtx = srcId ? findSource(srcId) : null;
  const isSelectedFn = selectedCtx && FN_LIBS.some(l => l.id === srcId);

  // field panel stays collapsed until user clicks

  // array fields of selected context
  const arrayFields = selectedCtx
    ? selectedCtx.fields.filter(f => f.type === 'array')
    : [];

  const ctxSrcItems = allContexts.length === 0
    ? `<div class="dd-notice" style="padding:8px 12px;line-height:1.6">⚠ No context on parent section.<br>Add a context with an array field first.</div>`
    : allContexts.map(ctx => `
        <div class="dd-sel-item ${srcId===ctx.id?'sel':''}" onclick="ddRepSelSource(event,'${ctx.id}')">
          <div style="flex:1;min-width:0">
            <div class="dd-sel-item-name">${ctx.name}</div>
            <div class="dd-sel-item-sub">${ctx.source} · ${ctx.type}</div>
          </div>
        </div>`).join('');

  const fnLibSrcItems = FN_LIBS.map(lib => `
        <div class="dd-sel-item ${srcId===lib.id?'sel':''}" onclick="ddRepSelSource(event,'${lib.id}')">
          <div style="flex:1;min-width:0">
            <div class="dd-sel-item-name">${lib.name}</div>
            <div class="dd-sel-item-sub">${lib.functions.length} functions · ${lib.description}</div>
          </div>
        </div>`).join('');

  const srcItems = `<div class="dd-src-section">
      <div class="dd-src-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"/><path d="M4 12h16"/><path d="M4 17h10"/></svg> Data Sources <span class="dd-src-count">${allContexts.length}</span></div>
      ${ctxSrcItems}
    </div>
    <div class="dd-src-divider"></div>
    <div class="dd-src-section">
      <div class="dd-src-header"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 18l6-6-6-6"/><path d="M8 6l-6 6 6 6"/></svg> Functions <span class="dd-src-count">${FN_LIBS.length}</span></div>
      ${fnLibSrcItems}
    </div>`;

  const fieldItems = !selectedCtx
    ? `<div class="dd-sel-item" style="opacity:.4;pointer-events:none;padding:8px 10px;font-size:11px;color:var(--t3)">Select a source first</div>`
    : arrayFields.length === 0
    ? `<div style="padding:12px 14px;text-align:center">
        <div style="font-size:22px;margin-bottom:6px">📭</div>
        <div style="font-size:11px;font-weight:600;color:var(--t2);margin-bottom:4px">No array fields</div>
        <div style="font-size:10px;color:var(--t3);line-height:1.5">This context has no <span style="font-family:'DM Mono',monospace;color:var(--acc)">array</span> fields.<br>Add an array field to use it in a repeater.</div>
      </div>`
    : arrayFields.map(f => `
        <div class="dd-sel-item ${fieldName===f.name?'sel':''}" onclick="ddRepSelField(event,'${f.name}')">
          <div style="flex:1;min-width:0">
            <div ${isSelectedFn ? 'style="font-family:\'DM Mono\',monospace;font-size:11px"' : ''}>${f.name}</div>
            <div class="dd-sel-item-sub">${f.description || f.sample}</div>
          </div>
          <span class="dd-sel-tag">${f.type}</span>
        </div>`).join('');

  const ddRepCanAddField = selectedCtx && (selectedCtx.source === 'CMS' || selectedCtx.source === 'Custom Code') && !isSelectedFn;
  const ddRepAddFieldBtn = ddRepCanAddField
    ? `<div class="dd-add-field-btn" onclick="event.stopPropagation();openAddFieldModal('${srcId}')"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg> Add field</div>`
    : '';

  body.innerHTML = `
    <div class="dd-selectors">
      <div class="dd-sel-group">
        <div class="dd-sel-label">Select Source</div>
        <div class="dd-sel-box ${srcId?'filled':''} ${srcOpen?'open':''}" id="dd-src-box">
          <div class="dd-sel-trigger ${srcId?'has-val':''}" onclick="ddRepToggleSrc(event)">
            ${srcId && selectedCtx
              ? (isSelectedFn
                ? `<span style="font-size:13px">${selectedCtx.icon}</span><span>${selectedCtx.name}</span>`
                : `<span>${selectedCtx.icon}</span><span>${selectedCtx.name}</span>`)
              : `<span style="color:var(--t3)">Select…</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${srcItems}</div>
        </div>
      </div>
      <div class="dd-sel-group">
        <div class="dd-sel-label">${isSelectedFn ? 'Select Function' : 'Select Field'}</div>
        <div class="dd-sel-box ${fieldName?'filled':''} ${fieldOpen?'open':''} ${!srcId?'style="opacity:.5;pointer-events:none"':''}" id="dd-field-box">
          <div class="dd-sel-trigger ${fieldName?'has-val green':''}" onclick="ddRepToggleField(event)">
            ${fieldName ? `<span>${isSelectedFn ? '<span style="font-family:\'DM Mono\',monospace;font-size:11px">' + fieldName + '</span>' : fieldName}</span>` : `<span style="color:var(--t3)">${srcId ? (isSelectedFn ? 'Select function…' : 'Select…') : 'Pick source first'}</span>`}
            <span class="dd-sel-chevron">▾</span>
          </div>
          <div class="dd-sel-dropdown">${fieldItems}${ddRepAddFieldBtn}</div>
        </div>
      </div>
    </div>
    <button class="dd-confirm ${(srcId && fieldName)?'show':''}" onclick="ddRepConfirm(event)">
      ✓ Bind Repeater${fieldName ? ` · ${fieldName}` : ''}
    </button>
  `;
}

function ddRepToggleSrc(e) {
  if (e) e.stopPropagation();
  S.dd.openPanel = S.dd.openPanel === 'src' ? null : 'src';
  renderDd();
}
function ddRepToggleField(e) {
  if (e) e.stopPropagation();
  if (!S.dd.srcId) return;
  S.dd.openPanel = S.dd.openPanel === 'field' ? null : 'field';
  renderDd();
}
function ddRepSelSource(e, id) {
  if (e) e.stopPropagation();
  S.dd.srcId = id;
  S.dd.fieldName = null;
  S.dd.openPanel = 'field';
  renderDd();
}
function ddRepSelField(e, name) {
  if (e) e.stopPropagation();
  S.dd.fieldName = name;
  S.dd.openPanel = null;
  renderDd();
}
function ddRepConfirm(e) {
  if (e) e.stopPropagation();
  const {elId, srcId, fieldName} = S.dd;
  if (!srcId || !fieldName) return;
  ddBindRepeater(null, srcId, fieldName);
}

function ddBindRepeater(e, ctxId, fieldName) {
  if (e) e.stopPropagation();
  const {elId} = S.dd;
  const ctx = findSource(ctxId);
  if (!ctx || !fieldName) return;
  // bind Items → context + array field
  const bkey = elId + '|Items';
  S.bindings[bkey] = {ctxId, fieldName, sample: ''};
  // update canvas repeater header
  const domEl = document.getElementById(elId);
  if (domEl) {
    domEl.classList.add('bound');
    const countEl = document.getElementById('rep-count-' + elId.replace('repeater-',''));
    if (countEl) countEl.textContent = `Connected · ${fieldName} · 3 items`;
  }
  closeDd();
  toast(`✓ Repeater → ${ctx.name} · ${fieldName}`, true);
  if (S.sel === elId) renderSettings && renderBody();
}

function renderImgPropRow(elId, propK, isBound, isActiveDd, ctx, b) {
  var canvasImg = document.getElementById('cimg-' + elId);
  var currentSrc = canvasImg ? canvasImg.src : IMG_PLACEHOLDER;
  var thumbSrc = currentSrc;
  var rowId = 'pr-' + elId + '-' + propK.replace(/\s/g,'_');
  var blur = isBound ? 'filter:blur(2px) brightness(.7)' : '';
  var ctxIcon = (ctx && ctx.icon) ? ctx.icon : '';
  var ctxName = (ctx && ctx.name) ? ctx.name : '';
  var fieldName = (b && b.fieldName) ? b.fieldName : '';

  var chipHtml = isBound
    ? '<div style="position:absolute;inset:0;display:flex;align-items:flex-start;padding:4px">'
    + '<span class="img-ctrl-chip">' + ctxIcon + ' ' + fieldName + '</span></div>'
    : '';

  var actionsHtml = isBound
    ? '<span class="prop-bound-ctx" onclick="navToSectionCtx(\'' + elId + '\',event)">' + ctxIcon + ' ' + ctxName + '</span>'
    + '<span class="prop-bound-field">' + fieldName + '<span class="chip-x" onclick="unbind(\'' + elId + '\',\'' + propK + '\',event)">&#x2715;</span></span>'
    : '<span class="img-ctrl-hint">Static image</span>';

  var svg = '<svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" width="12" height="12">'
    + '<circle cx="4.5" cy="3.5" r="2"/><circle cx="11.5" cy="12.5" r="2"/><path d="M4.5 5.5C4.5 9 11.5 7 11.5 10.5"/>'
    + '</svg>';

  return '<div class="prop-wrap" id="' + rowId + '">'
    + '<div class="prop-key">' + propK + '</div>'
    + '<div class="prop-row img-prop-row' + (isBound?' bound':'') + (isActiveDd?' active-bind':'') + '">'
    + '<div class="img-ctrl' + (isBound?' bound':'') + '">'
      + '<div class="img-ctrl-thumb">'
        + '<img src="' + thumbSrc + '" style="width:100%;height:100%;object-fit:cover;border-radius:5px;display:block;' + blur + '">'
        + chipHtml
      + '</div>'
      + '<div class="img-ctrl-actions">'
        + actionsHtml
        + '<div class="bind-btn" onclick="openDd(event,\'' + elId + '\',\'' + propK + '\')" title="Connect to context" style="margin-top:auto">' + svg + '</div>'
      + '</div>'
    + '</div>'
  + '</div>'
  + '</div>';
}
// Initialize bound classes from S.bindings
Object.keys(S.bindings).forEach(bkey => {
  if (bkey.includes('|param:')) return;
  const [elId] = bkey.split('|');
  const domEl = document.getElementById(elId);
  if (!domEl) return;
  if (domEl.classList.contains('c-el')) domEl.classList.add('bound');
  if (domEl.classList.contains('c-repeater') && bkey.endsWith('|Items')) domEl.classList.add('bound');
  const b = S.bindings[bkey];
  if (b && b.fnHasParams && b.fnTemplate) updateFnCanvasPreview(elId, bkey.split('|')[1]);
});
refreshAllPills();
document.getElementById('cimg-el-weather-img').src = 'https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png';
document.getElementById('cimg-el-d262-weather-img').src = 'https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png';
updateInspectorToggle();
initElementDrag();

(function() {
  const canvas = document.getElementById('canvas');
  const STICK_OFFSET = 20;
  const ICON_H = 28;
  const PAD = 8;
  function updateStickyPills() {
    const cRect = canvas.getBoundingClientRect();
    document.querySelectorAll('.ctx-pill:not(.rep-pill)').forEach(function(pill) {
      const sec = pill.parentElement;
      if (!sec || !sec.classList.contains('has-ctx')) return;
      const sRect = sec.getBoundingClientRect();
      const relTop = sRect.top - cRect.top;
      if (relTop >= STICK_OFFSET - PAD) {
        pill.style.top = PAD + 'px';
      } else if (relTop + sRect.height - ICON_H - PAD <= STICK_OFFSET) {
        pill.style.top = (sRect.height - ICON_H - PAD) + 'px';
      } else {
        pill.style.top = (STICK_OFFSET - relTop) + 'px';
      }
    });
  }
  canvas.addEventListener('scroll', updateStickyPills, { passive: true });
  updateStickyPills();
})();

/* ── SORT / FILTER DIALOGS ── */
var sfDialogType = null;
var sfTempRules = [];

function getAvailableFields() {
  if (S.ctxSettingsView) {
    const ctx = findSource(S.ctxSettingsView);
    if (ctx) return ctx.fields.filter(f => f.type !== 'array');
  }
  const bkey = S.sel + '|Items';
  const b = S.bindings[bkey];
  if (!b) return [];
  const ctx = findSource(b.ctxId);
  if (!ctx) return [];
  return ctx.fields.filter(f => f.type !== 'array');
}

function openSfDialog(type) {
  sfDialogType = type;
  sfTempRules = JSON.parse(JSON.stringify(type === 'sort' ? S.sortRules : S.filterRules));
  if (sfTempRules.length === 0) {
    sfTempRules.push(type === 'sort' ? {field:'', dir:'asc'} : {field:'', condition:'contains', value:''});
  }
  document.getElementById('sf-dialog-title').textContent = type === 'sort' ? 'Sort' : 'Filter';
  document.getElementById('sf-dialog-desc').textContent = type === 'sort'
    ? 'Choose which order items are shown in this repeater by adding sorts.'
    : 'Choose which items to show in this repeater. Only items that match the filter conditions will appear.';
  renderSfBody();
  document.getElementById('sf-dialog-overlay').classList.add('open');
}

function closeSfDialog() {
  document.getElementById('sf-dialog-overlay').classList.remove('open');
  sfDialogType = null;
  sfTempRules = [];
}

function applySfDialog() {
  const valid = sfTempRules.filter(r => r.field);
  if (sfDialogType === 'sort') S.sortRules = valid;
  else S.filterRules = valid;
  if (S.ctxSettingsView) markInstanceModified(S.ctxSettingsView);
  closeSfDialog();
  const count = valid.length;
  const label = sfDialogType === 'sort' ? 'sort' : 'filter';
  toast('✓ ' + count + ' ' + label + (count !== 1 ? 's' : '') + ' applied', true);
  renderBody();
}

function renderSfBody() {
  const body = document.getElementById('sf-dialog-body');
  const fields = getAvailableFields();
  const fieldOptions = fields.map(f => '<option value="' + f.name + '">' + f.name + '</option>').join('');

  if (sfDialogType === 'sort') {
    body.innerHTML = sfTempRules.map(function(rule, i) {
      return '<div class="sf-row">'
        + '<select class="sf-select" onchange="sfUpdateRule(' + i + ',\'field\',this.value)">'
        + '<option value="">Choose a field</option>' + fieldOptions.replace('value="' + rule.field + '"', 'value="' + rule.field + '" selected') + '</select>'
        + '<div class="sf-sort-btns">'
        + '<button class="sf-sort-btn ' + (rule.dir === 'asc' ? 'active' : '') + '" onclick="sfUpdateRule(' + i + ',\'dir\',\'asc\')" title="A to Z">A↓</button>'
        + '<button class="sf-sort-btn ' + (rule.dir === 'desc' ? 'active' : '') + '" onclick="sfUpdateRule(' + i + ',\'dir\',\'desc\')" title="Z to A">Z↓</button>'
        + '</div>'
        + '<button class="sf-delete-btn" onclick="sfDeleteRule(' + i + ')" title="Remove">🗑</button>'
        + '</div>';
    }).join('')
    + '<div class="sf-add" onclick="sfAddRule()">+ Add another sort</div>';
  } else {
    body.innerHTML = '<div class="sf-row" style="gap:12px;margin-bottom:2px">'
      + '<div style="flex:1"><div class="sf-field-label">Field</div></div>'
      + '<div style="flex:1"><div class="sf-field-label">Condition</div></div>'
      + '<div style="flex:1"><div class="sf-field-label">Value</div></div>'
      + '<div style="width:36px"></div>'
      + '</div>'
      + sfTempRules.map(function(rule, i) {
        return '<div class="sf-row">'
          + '<select class="sf-select" onchange="sfUpdateRule(' + i + ',\'field\',this.value)">'
          + '<option value="">Choose…</option>' + fieldOptions.replace('value="' + rule.field + '"', 'value="' + rule.field + '" selected') + '</select>'
          + '<select class="sf-select" onchange="sfUpdateRule(' + i + ',\'condition\',this.value)">'
          + '<option value="contains"' + (rule.condition === 'contains' ? ' selected' : '') + '>contains</option>'
          + '<option value="equals"' + (rule.condition === 'equals' ? ' selected' : '') + '>equals</option>'
          + '<option value="not_equals"' + (rule.condition === 'not_equals' ? ' selected' : '') + '>not equals</option>'
          + '<option value="starts_with"' + (rule.condition === 'starts_with' ? ' selected' : '') + '>starts with</option>'
          + '<option value="ends_with"' + (rule.condition === 'ends_with' ? ' selected' : '') + '>ends with</option>'
          + '<option value="greater_than"' + (rule.condition === 'greater_than' ? ' selected' : '') + '>greater than</option>'
          + '<option value="less_than"' + (rule.condition === 'less_than' ? ' selected' : '') + '>less than</option>'
          + '</select>'
          + '<input class="sf-input" placeholder="Value" value="' + (rule.value || '') + '" oninput="sfUpdateRule(' + i + ',\'value\',this.value)">'
          + '<button class="sf-delete-btn" onclick="sfDeleteRule(' + i + ')" title="Remove">🗑</button>'
          + '</div>';
      }).join('')
      + '<div class="sf-add" onclick="sfAddRule()">+ Add another filter</div>';
  }
}

function sfUpdateRule(idx, key, val) {
  sfTempRules[idx][key] = val;
  if (key !== 'value') renderSfBody();
}

function sfDeleteRule(idx) {
  sfTempRules.splice(idx, 1);
  if (sfTempRules.length === 0) {
    sfTempRules.push(sfDialogType === 'sort' ? {field:'', dir:'asc'} : {field:'', condition:'contains', value:''});
  }
  renderSfBody();
}

function sfAddRule() {
  sfTempRules.push(sfDialogType === 'sort' ? {field:'', dir:'asc'} : {field:'', condition:'contains', value:''});
  renderSfBody();
}

/* ── CANVAS PANNING ── */
(function() {
  const canvas = document.getElementById('canvas');
  let isPanning = false;
  let startX, startY;
  let panX = 0, panY = 0, savedPanX = 0, savedPanY = 0;
  let didDrag = false;

  function isCanvasBg(el) {
    return el === canvas || el.classList.contains('canvas-grid') || el.classList.contains('canvas-inner');
  }

  function applyPan() {
    canvas.querySelectorAll('.canvas-inner, .items-page, .item-detail-page').forEach(function(el) {
      el.style.transform = 'translate(' + panX + 'px, ' + panY + 'px)';
    });
  }

  function resetPan() {
    panX = 0; panY = 0; savedPanX = 0; savedPanY = 0;
    canvas.querySelectorAll('.canvas-inner, .items-page, .item-detail-page').forEach(function(el) {
      el.style.transform = '';
    });
  }
  window._resetCanvasPan = resetPan;

  canvas.addEventListener('mousedown', function(e) {
    if (e.button !== 0 || !isCanvasBg(e.target)) return;
    isPanning = true;
    didDrag = false;
    startX = e.clientX;
    startY = e.clientY;
    savedPanX = panX;
    savedPanY = panY;
    canvas.classList.add('panning');
    e.preventDefault();
  });

  window.addEventListener('mousemove', function(e) {
    if (!isPanning) return;
    var dx = e.clientX - startX;
    var dy = e.clientY - startY;
    if (Math.abs(dx) > 3 || Math.abs(dy) > 3) didDrag = true;
    panX = savedPanX + dx;
    panY = savedPanY + dy;
    applyPan();
  });

  window.addEventListener('mouseup', function() {
    if (!isPanning) return;
    isPanning = false;
    canvas.classList.remove('panning');
  });

  var origCanvasClick = window.canvasClick;
  window.canvasClick = function(e) {
    if (didDrag) { didDrag = false; return; }
    origCanvasClick(e);
  };
})();
</script>

<!-- SORT/FILTER DIALOG -->
<div class="sf-dialog-overlay" id="sf-dialog-overlay" onclick="if(event.target===this)closeSfDialog()">
  <div class="sf-dialog" id="sf-dialog">
    <div class="sf-dialog-head">
      <div class="sf-dialog-title" id="sf-dialog-title">Sort</div>
      <div class="sf-dialog-head-actions">
        <div class="sf-dialog-help">?</div>
        <button class="sf-dialog-close" onclick="closeSfDialog()">✕</button>
      </div>
    </div>
    <div class="sf-dialog-desc" id="sf-dialog-desc"></div>
    <div class="sf-dialog-body" id="sf-dialog-body"></div>
    <div class="sf-dialog-foot">
      <button class="sf-btn-cancel" onclick="closeSfDialog()">Cancel</button>
      <button class="sf-btn-apply" onclick="applySfDialog()">Apply</button>
    </div>
  </div>
</div>

<!-- CHANGE IMAGE MODAL -->
<div class="ci-overlay" id="ci-modal" onclick="if(event.target===this)closeChangeImage()">
  <div class="ci-dialog">
    <div class="ci-head">
      <div class="ci-title">Change Image</div>
      <button class="ci-close" onclick="closeChangeImage()">✕</button>
    </div>
    <div class="ci-tabs">
      <div class="ci-tab active">Upload Media</div>
      <div class="ci-tab">Wix Media</div>
      <div class="ci-tab">URL</div>
    </div>
    <div class="ci-body">
      <div class="ci-upload-area">
        <div class="ci-upload-icon"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div>
        <div class="ci-upload-text">Drag media here</div>
        <div class="ci-upload-sub">or click to browse files</div>
      </div>
    </div>
    <div class="ci-foot">
      <button class="ci-btn ci-btn-cancel" onclick="closeChangeImage()">Cancel</button>
    </div>
  </div>
</div>

<!-- CONTEXT PICKER MODAL -->
<div class="modal-overlay" id="confirm-modal" style="z-index:9999" onclick="if(event.target===this)cancelConfirm()">
  <div class="modal-box" style="width:300px">
    <div class="modal-head">
      <div class="modal-title" id="confirm-title">Confirm</div>
    </div>
    <div style="padding:14px 16px 0;font-size:12px;line-height:1.7;color:var(--t2);white-space:pre-line" id="confirm-msg"></div>
    <div id="confirm-warning" style="display:none;margin:8px 16px 14px;padding:8px 10px;background:#3a0a1a;border:1px solid var(--grn);border-radius:7px;font-size:11px;color:var(--grn);line-height:1.5">
      ⚠️ All elements bound to this context will be disconnected and revert to their static values.
    </div>
    <div class="modal-foot">
      <button class="modal-btn modal-cancel" onclick="cancelConfirm()">Cancel</button>
      <button class="modal-btn" id="confirm-ok-btn" onclick="doConfirmOk()" style="background:var(--red);color:#fff">Remove</button>
    </div>
  </div>
</div>

<div class="ctx-menu" id="canvas-ctx-menu">
  <div class="ctx-menu-item spec" id="ctx-menu-spec" style="display:none" onclick="openSpecFromContextMenu()">📋 Read Product Specification</div>
  <div class="ctx-menu-sep" id="ctx-menu-spec-sep" style="display:none"></div>
  <div class="ctx-menu-item danger" onclick="removeContextMenuTarget()">🗑 Remove</div>
</div>

</body>
</html>
